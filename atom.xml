<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Ivanclf</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2025-06-10T15:53:00.141Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>Ivan Chen</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Multiple Processor Systems and Security - Modern Operating System</title>
    <link href="http://example.com/2025/06/01/OS-4/"/>
    <id>http://example.com/2025/06/01/OS-4/</id>
    <published>2025-06-01T15:15:06.000Z</published>
    <updated>2025-06-10T15:53:00.141Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Multiple-Processor-System"><a href="#Multiple-Processor-System" class="headerlink" title="Multiple Processor System"></a>Multiple Processor System</h2><p>There are 3 types of sharing multiple processor.</p><p><img src="/2025/06/01/OS-4/8-1.png" alt="3 types"></p><div class="note note-info">            <p>Multicomputer and Message Passing is not the same concept. Multicomputer is just like an apartment with many rooms, everyone in rooms (processors) has own tables and file chests (local memory), while message passing is like people sent information via phones or mails, but not rush to other’s room to take file immediately.</p>          </div><h3 id="Multiprocessors"><a href="#Multiprocessors" class="headerlink" title="Multiprocessors"></a>Multiprocessors</h3><p>A shared-memory multiprocessor is a computer system in which two or more CPUs share full access to a common RAM.</p><h4 id="Multiprocessor-Hardware"><a href="#Multiprocessor-Hardware" class="headerlink" title="Multiprocessor Hardware"></a>Multiprocessor Hardware</h4><p>Although all multiprocessors have the property that every CPU can address all of memory, some multiprocessors have the additional property that every memory word can be read as fast as every other memory word. These machines are called <strong>UMA</strong> (<strong>Uniform Memory Access</strong> 统一内存访问) multiprocessors. In contrast, <strong>NUMA</strong> (<strong>Nonuniform Memory Access</strong>) multiprocessors do not have this property.</p><ul><li><p>UMA Multiprocessors with Bus-Based Architectures</p><p>  The simplest multiprocessors are based on a single bus.</p><p>  <img src="/2025/06/01/OS-4/8-2.png" alt="bus-based architecture"></p><p>  With two or three CPUs, contention for the bus will be manageable; with 32 or 64 it will be unbearable. The system will be totally limited by the bandwidth of the bus, and most of the CPUs will be <em>idle</em> (空闲的) most of the time.</p><p>  The solution to this problem is to add a cache to each CPU. Each cache block is marked as being either read only (in which case it can be present in multiple caches at the same time) or read-write (in which case it may not be present in any other caches). If a CPU attempts to write a word that is in one or more remote caches, the bus hardware detects the write and puts a signal on the bus informing all other caches of the write.</p><p>  Yet another possibility is the design of Fig. 8-2(c), in which each CPU has not only a cache, but also a local, private memory which it accesses over a dedicated (private) bus.</p></li><li><p>UMA Multiprocessors Using Crossbar Switches</p><p>  The simplest circuit for connecting $n$ CPUs to $k$ memories is the <strong>crossbar switch</strong>.</p><p>  <img src="/2025/06/01/OS-4/8-3.png" alt="crossbar switch"></p><p>  One of the nicest properties of the crossbar switch is that it is a <strong>nonblocking network</strong>, meaning that no CPU is ever denied the connection it needs because some crosspoint or line is already occupied.</p><p>  One of the worst properties of the crossbar switch is the fact that the number of crosspoints grows as $n^2$. With 1000 CPUs and 1000 memory modules we need a million crosspoints. Such a large crossbar switch is not <em>feasible</em> (可行的). Nevertheless, for medium-sized systems, a crossbar design is workable.</p></li><li><p>UMA Multiprocessors Using Multistage Switching Networks</p><p>  similar to a router, we can set a router to multiprocessors.</p><p>  <img src="/2025/06/01/OS-4/8-5.png" alt="router?"></p></li><li><p>NUMA Multiprocessors</p><p>  NUMA machines have three key characteristics that all of them possess and which together distinguish them from other multiprocessors:</p><ol><li>There is a single address space visible to all CPUs.</li><li>Access to remote memory is via LOAD and STORE instructions.</li><li>Access to remote memory is slower than access to local memory.</li></ol><p>  When the access time to remote memory is not hidden (because there is no caching), the system is called NC-NUMA (Non Cache-coherent NUMA). When the caches are coherent, the system is called CC-NUMA (Cache-Coherent NUMA).</p></li></ul><h3 id="Multiprocessors-Operating-System-Types"><a href="#Multiprocessors-Operating-System-Types" class="headerlink" title="Multiprocessors Operating System Types"></a>Multiprocessors Operating System Types</h3><ul><li><p>Each CPU Has Its Own Operating System</p><p>  <img src="/2025/06/01/OS-4/8-7.png" alt="similar as Bus-Based Architectures"></p><p>  This scheme is still better than having $n$ separate computers since it allows all the machines to share a set of disks and other I&#x2F;O devices, and it also allows the memory to be shared flexibly.</p></li><li><p>Master-Slave Multiprocessors</p><p>  <img src="/2025/06/01/OS-4/8-8.png" alt="a progress"></p><p>  The master-slave model solves most of the problems of the first model. And the problem with this model is that with many CPUs, the master will become a bottleneck. After all, it must handle all system calls from all CPUs. If, say, 10% of all time is spent handling system calls, then 10 CPUs will pretty much <em>saturate</em> (饱和) the master, and with 20 CPUs it will be completely overloaded.</p></li><li><p><strong>SMP</strong> (<strong>Symmetric Multiprocessors</strong> 对称多处理器)</p><p>  <img src="/2025/06/01/OS-4/8-9.png" alt="there is one copy of the operating system in memory, but any CPU can run it."></p><p>  When a system call is made, the CPU on which the system call was made traps to the kernel and processes the system call.</p><p>  But it introduces its own problems. In particular, if two or more CPUs are running operating system code at the same time, disaster may well result. Imagine two CPUs <em>simultaneously</em> (同时) picking the same process to run or claiming the same free memory page. The simplest way around these problems is to associate a mutex (i.e., lock) with the operating system, making the whole system one big critical region. This approach is somethings called a <strong>big kernel lock</strong>.</p></li></ul><h3 id="Multiprocessors-Synchronization"><a href="#Multiprocessors-Synchronization" class="headerlink" title="Multiprocessors Synchronization"></a>Multiprocessors Synchronization</h3><p><img src="/2025/06/01/OS-4/8-10.png" alt="TSL instruction can fail if bus already locked"></p><p>Now think about what could happen on a multiprocessor. We see the worst-case timing, in which memory word 1000, being used as a lock, is initially 0. In step 1, CPU 1 reads out the word and gets a 0. In step 2, before CPU 1 has a chance to rewrite the word to 1, CPU 2 gets in and also reads the word out as a 0. In step 3, CPU 1 writes a 1 into the word. In step 4, CPU 2 also writes a 1 into the word. Both CPUs got a 0 back from the TSL instruction, so both of them now hav e access to the critical region and the mutual exclusion fails.</p><p>To prevent this problem, the <strong>TSL</strong> (<strong>Test and Set Lock</strong>), an atomic operation, instruction must first lock the bus, preventing other CPUs from accessing it, then do both memory accesses, then unlock the bus.</p><p>Problem: put a massive load on the bus or memory, slowing down all other CPUs trying to do their normal work.</p><p>An even better idea is to give each CPU wishing to acquire the mutex its own private lock variable to test.</p><p><img src="/2025/06/01/OS-4/8-11.png" alt="an instance of spinning lock"></p><h3 id="Multicomputer-Virtualization"><a href="#Multicomputer-Virtualization" class="headerlink" title="Multicomputer Virtualization"></a>Multicomputer Virtualization</h3><ul><li>Type I <em>Hypervisor</em> (监视器)<br>  In reality, it is the operating system, since it is the only program running in kernel mode. Its job is to support multiple copies of the actual hardware, called virtual machines, similar to the processes a normal operating system supports.</li><li>Type II Hypervisor<br>  It is just a user program running on, say, Windows or Linux that “interprets” the machine’s instruction set, which also creates a virtual machine. We put “interprets” in quotes because usually chunks of code are processed in a certain way and then cached and executed directly to improve performance, but in principle, full interpretation would work, <em>albeit</em> (尽管) slowly.</li></ul><p><img src="/2025/06/01/OS-4/type-I-hypervisor.png" alt="illustration of type I hypervisor"></p><h2 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h2><h3 id="Goals-and-Threats"><a href="#Goals-and-Threats" class="headerlink" title="Goals and Threats"></a>Goals and Threats</h3><p><img src="/2025/06/01/OS-4/9-1.png" alt="conclusion"></p><p>Many security texts decompose the security of an information system in three components: <em>confidentiality</em> (保密性), <em>integrity</em> (完整性), and <em>availability</em> (可用性). And preventing the threads of <em>exposure of data</em> (数据泄露), <em>tampering with data</em> (篡改数据) and <em>denial of service</em> (拒绝服务).</p><h3 id="Formal-Models-of-Secure-Systems-Covert-Channels"><a href="#Formal-Models-of-Secure-Systems-Covert-Channels" class="headerlink" title="Formal Models of Secure Systems - Covert Channels"></a>Formal Models of Secure Systems - Covert Channels</h3><p><img src="/2025/06/01/OS-4/9-12.png" alt="the purest form of covert channel"></p><p>In this instance, the first process, the client, wants some work performed by the second one, the server. For example, the server’s job is to help clients with filling out their tax forms. The clients are worried that the server will secretly record their financial data, for example, maintaining a secret list of who earns how much, and then selling the list. The server is worried that the clients will try to steal the valuable tax program.</p><p>The third process is the <em>collaborator</em> (合作者), which is <em>conspiring</em> (共谋) with the server to indeed steal the client’s confidential data. The collaborator and server are typically owned by the same person. The object is to design a system in which it is impossible for the server process to leak to the collaborator process the information.</p><p>From the system designer’s point of view, the goal is to <em>encapsulate</em> (封装) or <em>confine</em> (限制) the server in such a way that it cannot pass information to the collaborator. Unfortunately, more subtle communication channels may also be available. This communication channel is known as a <strong>covert channel</strong>.</p><h3 id="Exploiting-Software-Buffer-Overflow-Attacks"><a href="#Exploiting-Software-Buffer-Overflow-Attacks" class="headerlink" title="Exploiting Software - Buffer Overflow Attacks"></a>Exploiting Software - Buffer Overflow Attacks</h3><p>One rich source of attacks has been due to the fact that virtually all operating systems and most systems programs are written in the C or C++ programming languages (because programmers like them and they can be compiled to extremely efficient object code). Unfortunately, no C or C++ compiler does array bounds checking.</p><p><img src="/2025/06/01/OS-4/9-21.png" alt="how overflow works"></p><p>In Fig. 9-21(a), we see the main program running, with its local variables on the stack. At some point it calls the procedure $A$, as shown in Fig. 9-21(b). The standard calling sequence starts out by pushing the return address (which points to the instruction following the call) onto the stack. It then transfers control to $A$, which decrements the stack pointer by 128 to allocate storage for its local variable (buffer B).</p><p>So what exactly will happen if the user provides more than 128 characters? Figure 9-21(c) shows this situation. The function copies all the bytes into and beyond the buffer, overwriting possibly many things on the stack, but in particular overwriting the return address pushed there earlier. In other words, part of the log entry now fills the memory location that the system assumes to hold the address of the instruction to jump to when the function returns. As long as the user typed in a regular log message, the characters of the message would probably not represent a valid code address. As soon as the function A returns, the program would try to jump to an invalid target—something the system would not like at all. In most cases, the program would crash immediately.</p><p>Now assume that this is not a <em>benign</em> (良性) user who provides an overly long message by mistake, but an attacker who provides a tailored message specifically aimed at <em>subverting</em> (破坏) the program’s control flow. Say the attacker provides an input that is carefully crafted to overwrite the return address with the address of buffer B. The result is that upon returning from function A, the program will jump to the beginning of buffer B and execute the bytes in the buffer as code. Since the attacker controls the content of the buffer, he can fill it with machine instructions—to execute the attacker’s code within the context of the original program. In effect, the attacker has overwritten memory with his own code and gotten it executed.</p><h3 id="Malware-恶意软件"><a href="#Malware-恶意软件" class="headerlink" title="Malware (恶意软件)"></a><em>Malware</em> (恶意软件)</h3><ul><li><p>Trojan Horses</p><p>  When the free program is started, it calls a function that writes the malware to disk as an executable program and starts it. The malware can then do whatever damage it was designed for, such as deleting, modifying, or <em>encrypting files</em> (加密文件). It can also search for credit card numbers, passwords, and other useful data and send them back to Mal over the Internet. More likely, it attaches itself to some IP port and waits there for directions, making the machine a zombie, ready to do whatever its remote master wishes. Usually, the malware will also <em>invoke</em> (调用) the commands necessary to make sure the malware is restarted whenever the machine is rebooted.</p></li><li><p>Virus</p><p>  What is a virus, anyway? To make a long story short, a virus is a program that can reproduce itself by attaching its code to another program, <em>analogous</em> (类似) to how biological viruses reproduce. The virus can also do other things in addition to reproducing itself.</p><p>  Once installed on the victim’s machine, the virus lies <em>dormant</em> (休眠) until the infected program is executed. Once started, it usually begins by infecting other programs on the machine and then executing its payload. In many cases, the payload may do nothing until a certain date has passed to make sure that the virus is widespread before people begin noticing it.</p><p>  <img src="/2025/06/01/OS-4/9-29.png" alt="virus rooted in executable program"></p></li><li><p>Worms</p><p>  Technically, the worm consisted of two programs, the bootstrap and the worm proper. The bootstrap was compiled and executed on the system under attack. Once running, it connected to the machine from which it came, uploaded the main worm, and executed it. After going to some trouble to hide its existence, the worm then looked through its new host’s routing tables to see what machines that host was connected to and attempted to spread the bootstrap to those machines.</p></li></ul><h3 id="Protection"><a href="#Protection" class="headerlink" title="Protection"></a>Protection</h3><h4 id="cryptography-密码学"><a href="#cryptography-密码学" class="headerlink" title="cryptography (密码学)"></a><em>cryptography</em> (密码学)</h4><p><img src="/2025/06/01/OS-4/9-15.png" alt="cryptography is to build a function to encryption and decryption"></p><ul><li><p>Public-Key Cryptography</p><p>  The way public-key cryptography works is that everyone picks a (public key, private key) pair and publishes the public key. The public key is the encryption key; the private key is the decryption key. Usually, the key generation is automated, possibly with a user-selected password fed into the algorithm as a seed. To send a secret message to a user, a <em>correspondent</em> (通信方) encrypts the message with the receiver’s public key. Since only the receiver has the private key, only the receiver can decrypt the message.</p></li><li><p>one-way functions</p><p>  In various situations that we will see later it is desirable to have some function, $f$, which has the property that given $f$ and its parameter $x$, computing $y&#x3D;f(x)$ is easy to do, but given only $f(x)$, finding $x$ is computationally <em>infeasible</em> (不可行的).  Such a function is called a <strong>cryptographic hash function</strong>.</p></li><li><p>RSA</p>  <div class="note note-info">            <p><em>totient</em> (欧拉函数) $f(n)$ of $n$<br>$f(n)$ is a function that computes $n$ with the result is the quantity of numbers that smaller than $n$ and are <em>coprime</em> (互质) with $n$ in [1~n].</p><p>Euler’s theorem makes sense only when for any numbers $a$ and $n$, as long as the numbers are coprimed, satisfies<br>$$<br>a^{\phi(n)} \equiv 1 \mod n<br>$$</p><p>examples:</p><p>$$<br>a&#x3D;3;n&#x3D;10;\phi(10)&#x3D;4;\quad 3^4&#x3D;81 \equiv 1 \mod 10\\<br>a&#x3D;2;n&#x3D;11;\phi(11)&#x3D;10;\quad 2^{10}&#x3D;1024\equiv1\mod 11<br>$$</p>          </div><ol><li>choose two pretty huge prime numbers $p$ and $q$.</li><li>let $n&#x3D;p \cdot q$.</li><li>let $f(n)&#x3D;(p-1)\cdot (q-1)$.</li><li>choose a number $e$, satisfying $e&lt;n$ and coprimed with $f(n)$.</li><li>choose a number $d$, satisfying $e\cdot d \mod f(n) &#x3D; 1$.</li><li>so the public key is $(e, n)$, private key is $d$.</li></ol><p>  encrypt message $m$ : $c&#x3D;m^e \mod n$<br>  decrypt message $c$ : $m&#x3D;c^d \mod n$</p><p>  Why can decrypt? According to Euler’s theorem,</p><p>  $$<br>  c^d \mod n &#x3D; m^{e\cdot d} \mod n &#x3D; m^{kf(n) + 1} \mod n &#x3D; m<br>  $$</p></li><li><p>Digital Signatures</p><p>  <img src="/2025/06/01/OS-4/9-16.png" alt="encryption of signature"></p><p>  In order to ensure original document is not tampered. We append a signature. The private key encrypts document’s MD5 value, while public key decrypts the signature and get its MD5 value.</p></li></ul><h4 id="mechanism"><a href="#mechanism" class="headerlink" title="mechanism"></a>mechanism</h4><ul><li><p>protection domains</p><p>  A domain is a set of (object, rights) pairs. Each pair specifies an object and some subset of the operations that can be performed on it. A right in this context means permission to perform one of the operations.</p><p>  <img src="/2025/06/01/OS-4/9-3.png" alt="Examples of three protection domains"><br>  <img src="/2025/06/01/OS-4/9-4.png" alt="it can also be shown as matrix"><br>  <img src="/2025/06/01/OS-4/9-8.png" alt="or lists"></p></li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Multiple-Processor-System&quot;&gt;&lt;a href=&quot;#Multiple-Processor-System&quot; class=&quot;headerlink&quot; title=&quot;Multiple Processor System&quot;&gt;&lt;/a&gt;Multiple Pr</summary>
      
    
    
    
    <category term="日常" scheme="http://example.com/categories/%E6%97%A5%E5%B8%B8/"/>
    
    
    <category term="日常" scheme="http://example.com/tags/%E6%97%A5%E5%B8%B8/"/>
    
    <category term="复习" scheme="http://example.com/tags/%E5%A4%8D%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>File Systems and I/O - Modern Operating System</title>
    <link href="http://example.com/2025/05/27/OS-3/"/>
    <id>http://example.com/2025/05/27/OS-3/</id>
    <published>2025-05-27T13:51:11.000Z</published>
    <updated>2025-06-18T01:54:30.812Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Files"><a href="#Files" class="headerlink" title="Files"></a>Files</h2><h3 id="File-Types"><a href="#File-Types" class="headerlink" title="File Types"></a>File Types</h3><ul><li><p><strong>executable file</strong></p><p>  Example: <code>.exe</code> in Windows.</p><p>  An executive files has five sections: header, text, data, relocation bits, and symbol table.</p><p>  The header starts with a so-called <strong>magic number</strong>, identifying the file as an executable file (to prevent the accidental execution of a file not in this format). Then come the sizes of the various pieces of the file, the address at which execution starts, and some flag bits.</p><p>  Following the header are the text and data of the program itself. These are loaded into memory and relocated using the relocation bits. The symbol table is used for debugging.</p></li><li><p><strong>archive</strong> (归档文件)</p><p>  Example: <code>.zip</code>, <code>.tar</code>, <code>.rar</code></p><p>  It consists of a collection of library procedures (modules) compiled but not linked. Each one begins with a header telling its name, creation date, owner, protection code, and size. Just as with the executable file, the module headers are full of binary numbers. Copying them to the printer would produce complete mess.</p></li></ul><p><img src="/2025/05/27/OS-3/4-3.png" alt="the difference between two types of files"></p><h4 id="An-Example-Program-Using-File-System-Calls"><a href="#An-Example-Program-Using-File-System-Calls" class="headerlink" title="An Example Program Using File-System Calls"></a>An Example Program Using File-System Calls</h4><p>Here is an instance that how we use file-system calls</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;sys/types.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;fcntl.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span>;<br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> BUF_SIZE 4096       <span class="hljs-comment">// use a buffer size of 4096 bytes</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> OUTPUT_MODE 0700    <span class="hljs-comment">// protection bits for output file</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> *argv[])</span><br>&#123;<br>    <span class="hljs-type">int</span> in_fd, out_fd, rd_count, wt_count;<br>    <span class="hljs-type">char</span> buffer[BUF_SIZE];<br><br>    <span class="hljs-keyword">if</span>(argc != <span class="hljs-number">3</span>)   <span class="hljs-comment">// see note below</span><br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br><br>    <span class="hljs-comment">// open the input file and create the output file</span><br>    in_fd = open(argv[<span class="hljs-number">1</span>], O_RDONLY);<br>    <span class="hljs-keyword">if</span>(in_fd &lt; <span class="hljs-number">0</span>)<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">2</span>);<br>    out_fd = create(argv[<span class="hljs-number">2</span>], OUTPUT_MODE);<br>    <span class="hljs-keyword">if</span>(out_fd &lt; <span class="hljs-number">0</span>)<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">3</span>);<br><br>    <span class="hljs-comment">// copy loop</span><br>    <span class="hljs-keyword">while</span>(TRUE)<br>    &#123;<br>        rd_count = read(in_fd, buffer, BUF_SIZE);<br>        <span class="hljs-keyword">if</span>(rd_count &lt;= <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">break</span>;<br>        wt_count = write(out_fd, buffer, rd_count);<br>        <span class="hljs-keyword">if</span>(wt_count &lt;= <span class="hljs-number">0</span>)<br>            <span class="hljs-keyword">break</span>;<br>    &#125;<br><br>    <span class="hljs-comment">// close the files</span><br>    close(in_fd);<br>    close(out_fd);<br>    <span class="hljs-keyword">if</span>(rd_count == <span class="hljs-number">0</span>)<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">0</span>);<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">5</span>);<br>&#125;<br></code></pre></td></tr></table></figure><div class="note note-success">            <p>Why there must be 3 parameters in argv? Because each argv has its meaning.</p><ol><li><p><code>argv[0]</code> is the name of this program, which is bound in C language program.</p></li><li><p><code>argv[1]</code> is the path of input file.</p></li><li><p><code>argv[2]</code> is the path of output file.</p></li></ol><p>For instance, this program, named <em>copyfile</em>, executes by the command line</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">./copyfile abc xyz<br></code></pre></td></tr></table></figure><p>then it copies the file <code>abc</code> to <code>xyz</code>.</p>          </div><h3 id="Directories"><a href="#Directories" class="headerlink" title="Directories"></a>Directories</h3><h4 id="Path-Names"><a href="#Path-Names" class="headerlink" title="Path Names"></a>Path Names</h4><p>Different operating systems have different path names.</p><ul><li><p>Windows: <code>\usr\ast\mailbox</code></p></li><li><p>UNIX: <code>/usr/ast/mailbox</code></p></li><li><p>MULTICS: <code>&gt;usr&gt;ast&gt;mailbox</code></p></li></ul><p>Be attention to distinguish the difference of <strong>relative path name</strong> and <strong>absolute path name</strong></p><h4 id="Directory-Operations"><a href="#Directory-Operations" class="headerlink" title="Directory Operations"></a>Directory Operations</h4><p>Here we mainly focus on the operation <code>Link</code> and <code>Unlink</code>.</p><p>Link. Linking is a technique that allows a file to appear in more than one directory. This call can create a <strong>hard link</strong>.</p><p>Unlink. A directory entry is removed.</p><p>A variant on the idea of linking files is the <strong>symbolic link</strong>. Instead, of having two names point to the same internal data structure representing a file, a name can be created that points to a tiny file naming another file.</p><p><a href="#share-files">Click and see more difference</a></p><h3 id="File-System-Implementation"><a href="#File-System-Implementation" class="headerlink" title="File-System Implementation"></a>File-System Implementation</h3><h4 id="File-System-Layout"><a href="#File-System-Layout" class="headerlink" title="File System Layout"></a>File System Layout</h4><p>File systems are stored on disks. Most disks can be divided up into one or more partitions, with independent file systems on each partition. Sector 0 of the disk is called the <strong>MBR</strong> (<strong>Master Boot Record</strong>) and is used to boot the computer. The end of the MBR contains the partition table. This table gives the starting and ending addresses of each partition. One of the partitions in the table is marked as active. When the computer is booted, the BIOS reads in and executes the MBR.</p><p>Other than starting with a <strong>boot block</strong>, the layout of a disk partition varies a lot from file system to file system. Often the file system will contain some of the items. The first one is the <strong>superblock</strong>. This block contains global information and key parameters of whole file system.</p><p>The MBR is the Sector 0 of whole disk and used to guide BIOS and portion table, not being any part of certain file system. While super block is the beginning position of certain file system. But usually, a portion of disk maps a file system.</p><p><img src="/2025/05/27/OS-3/4-9.png" alt="possible file system layout"></p><h4 id="Implementing-Files"><a href="#Implementing-Files" class="headerlink" title="Implementing Files"></a>Implementing Files</h4><ul><li><em>Contiguous Allocation</em> (连续分配)</li></ul><p><img src="/2025/05/27/OS-3/4-10.png" alt="how contiguous allocation works"></p><p>This method has two advantages. First, it is simple to implement. Second, the read performance is excellent (because the entire file can be read from the disk in a single operation).</p><p>However, contiguous allocation also has a very serious drawback: over the course of time, the disk becomes <em>fragmented</em> (碎片化).</p><ul><li>Linked-List Allocation</li></ul><p><img src="/2025/05/27/OS-3/4-11.png" alt="how linked-list allocation works"></p><p>Now no space is lost to disk fragmentation. On the other hand, although reading a file sequentially is straightforward, random access is extremely slow.</p><p>Also, the amount of data storage in a block is no longer a <em>power of two</em> (2的幂) because the pointer takes up a few bytes.</p><ul><li><strong>Linked-List Allocation Using a Table in Memory</strong></li></ul><p><img src="/2025/05/27/OS-3/4-12.png" alt="how FAT works"></p><p>In Fig. 4-11 and Fig. 4-12, we have two files. File <code>A</code> uses disk blocks 4, 7, 2, 10, and 12, in that order, and file <code>B</code> uses disk blocks 6, 3, 11, and 14, in that order. Using the table of Fig. 4-12, we can start with block 4 and follow the chain all the way to the end. The same can be done starting with block 6. Both chains are terminated with a special marker (e.g., −1) that is not a valid block number. Such a table in main memory is called a <strong>FAT</strong> (<strong>File Allocation Table</strong>).</p><p>Using this organization, the entire block is available for data. Furthermore, random access is much easier.</p><p>The primary disadvantage of this method is that the entire table must be in memory all the time to make it work. Clearly the FAT idea does not scale well to large disks.</p><p>It was the original MS-DOS file system and is still fully supported by early versions of Windows though.</p><ul><li><strong>I-nodes</strong></li></ul><p><img src="/2025/05/27/OS-3/4-13.png" alt="example of i-node"></p><p>Associating with <code>each file</code> a data structure called an <strong>i-node</strong> (<strong>index-node</strong>), which lists the attributes and disk addresses of the file’s blocks.</p><p>The big advantage of this scheme over linked files using an in-memory table is that the i-node need be in memory only when the corresponding file is open.</p><p>It is often used in Linux&#x2F;Unix file system (Ext 2&#x2F;3&#x2F;4) and Windows (NTFS).</p><h4 id="Share-Files"><a href="#Share-Files" class="headerlink" title="Share Files"></a>Share Files</h4><p>In UNIX there are two ways to share files: symbolic linking and hard linking. Assume that there are two files: <code>B</code> and <code>C</code>.</p><ul><li><p>symbolic link</p><p>  Use <code>ln -s [source file or directory] [symbolic name]</code> command to create a symbolic link.</p><p>  Essentially symbolic link is just a special file that points to another file or directory.</p><p>  B links to C by having the system create a new file, of type LINK. The new file contains just just the path name of the file to which it is linked. When B reads from the linked file, the operating system sees that the file being read from is of type LINK, looks up the name of the file, and reads that file.</p><p>  Symbolic name can be used when you wanna access file from other directory (say, Desktop).</p>  <div class="note note-success">            <p>Even the symbolic link itself is a file, so when creating it, an i-node is created.</p>          </div></li><li><p>hard link</p><p>  Use <code>ln [source file] [hard link name]</code> command to create a hard link.</p><p>  Essentially hard link is just different entry of a file.</p><p>  Disk blocks are not listed in directories, but in a little data structure associated with the file itself. The directories would then point just to the little data structure (or i-node in UNIX).</p><p>  Hard link can be used when you want a file has multiple name and do not wanna lose file because of deleting one name.</p></li></ul><p><img src="/2025/05/27/OS-3/4-17.png" alt="how a hard link works"></p><h4 id="Log-Structure-File-Systems"><a href="#Log-Structure-File-Systems" class="headerlink" title="Log-Structure File Systems"></a>Log-Structure File Systems</h4><p>The <strong>LFS</strong> (<strong>Log-Structure File System</strong>) sees all changes on file system as a <strong>journal records</strong>, and appends the records on s constant region of disks in order.</p><h4 id="Journaling-File-System"><a href="#Journaling-File-System" class="headerlink" title="Journaling File System"></a>Journaling File System</h4><p>It is a tradition file system that appends a journal record, mainly recording changes in data.</p><h3 id="File-System-Backups"><a href="#File-System-Backups" class="headerlink" title="File-System Backups"></a>File-System Backups</h3><p>Tw o strategies can be used for dumping a disk to a backup disk: a physical dump or a logical dump.</p><p>A <strong>physical dump</strong> starts at block 0 of the disk, writes all the disk blocks onto the output disk in order, and stops when it has copied the last one. Such a program is so simple that it can probably be made 100% bug free. The main advantages of physical dumping are simplicity and great speed (basically, it can run at the speed of the disk). The main disadvantages are the inability to skip selected directories, make incremental dumps, and restore individual files upon request.</p><p>A <strong>logical dump</strong> starts at one or more specified directories and recursively dumps all files and directories found there that have changed since some given base date (e.g., the last backup for an incremental dump or system installation for a full dump).</p><h3 id="The-UNIX-V7-File-System"><a href="#The-UNIX-V7-File-System" class="headerlink" title="The UNIX V7 File System"></a>The UNIX V7 File System</h3><p>The file system is in the form of a tree starting at the root directory, with the addition of links. forming <em>acyclic graph</em> (无环图).</p><p>A UNIX directory entry contains one entry for each file. The entries is simple because UNIX uses the i-node scheme. A directory contains only two fields: the file name and the number of the i-node for that file.</p><p><img src="/2025/05/27/OS-3/4-32.png" alt="the structure of an entry"></p><div class="note note-success">            <p>Because I-node number takes up to 2 bytes, 16 bits, so quantity of files is $2^{16}$. But file name quantity might be bigger than $2^{16}$ since hard link’s existence.</p>          </div><p>Keeping track of disk blocks is done using a generalization of Fig. 4-13 in order to handle very large files. The first 10 disk addresses are stored in the i-node itself, so for small files, all the necessary information is right in the i-node. For somewhat larger files, one of the addresses in the i-node is the address of a disk block called a <strong>single indirect block</strong>. This block contains additional disk addresses. If this still is not enough, another address in the i-node, called a <strong>double indirect block</strong>, contains the address of a block that contains a list of single indirect blocks. Each of these single indirect blocks points to a few hundred data blocks. If even this is not enough, a <strong>triple indirect block</strong> can also be used.</p><p><img src="/2025/05/27/OS-3/4-33.png" alt="complete picture"></p><p><img src="/2025/05/27/OS-3/unix.png" alt="another picture"></p><h2 id="I-O"><a href="#I-O" class="headerlink" title="I&#x2F;O"></a>I&#x2F;O</h2><h3 id="Principles-of-I-O-Hardware"><a href="#Principles-of-I-O-Hardware" class="headerlink" title="Principles of I&#x2F;O Hardware"></a>Principles of I&#x2F;O Hardware</h3><h4 id="I-O-Device"><a href="#I-O-Device" class="headerlink" title="I&#x2F;O Device"></a>I&#x2F;O Device</h4><p>I&#x2F;O devices can be roughly divided into two categories: <strong>block devices</strong> and <strong>character devices</strong>.</p><p>A block device is one that stores information in fixed-size blocks, each one with its own address. The essential property of a block device is that it is possible to read or write each block independently of all the other ones. Hard disks, Blu-ray discs, and USB sticks are common block devices.</p><p>A character device delivers or accepts a stream of characters, without regard to any block structure. It is not addressable and does not have any seek operation. Printers, network interfaces, mice, and most other devices that are not disk-like can be seen as character devices.</p><h4 id="Memory-Mapped-I-O"><a href="#Memory-Mapped-I-O" class="headerlink" title="Memory-Mapped I&#x2F;O"></a>Memory-Mapped I&#x2F;O</h4><p>Early operating systems (like Intel 8086 or some embedded OS) use <strong>separate I&#x2F;O</strong>, which means we need a separate bus to execute these commands, while <em>concurrent access</em> (并发访问) is hardly possible. CPU must use special commands (say <code>in</code> and <code>out</code>) to communicate with devices. But now we often map memory address with I&#x2F;O devices’ registers or something else.</p><p><img src="/2025/05/27/OS-3/5-2.png" alt="how CPU communicates with the devices"></p><p>Each controller has a few registers that are used for communicating with the CPU.  In addition to the control registers, many devices have a data buffer that the operating system can read and write. The issue thus arises of how the CPU communicates with the control registers and also with the device data buffers. Two alternatives exist.</p><p>In the first approach, each control register is assigned an <strong>I&#x2F;O port</strong> number. The set of all the I&#x2F;O ports form the <strong>I&#x2F;O port space</strong>, which is protected so that ordinary user programs cannot access it (only the operating system can).</p><p>The second approach is to map all the control registers into the memory space. Each control register is assigned a unique memory address to which no memory is assigned. This system is called <strong>memory-mapped I&#x2F;O</strong>. The x86 uses the hybrid scheme.</p><h4 id="Direct-Memory-Access"><a href="#Direct-Memory-Access" class="headerlink" title="Direct Memory Access"></a>Direct Memory Access</h4><p>No matter whether a CPU does or does not have memory-mapped I&#x2F;O, it needs to address the device controllers to exchange data with them. The CPU can request data from an I&#x2F;O controller one byte at a time, but doing so wastes the CPU’s time, so a different scheme, called <strong>DMA</strong> (<strong>Direct Memory Access</strong>) is often used.</p><p>Then the DMA takes change of bus.</p><p><img src="/2025/05/27/OS-3/5-4.png" alt="how DMA works"></p><p>Let us first look at how disk reads occur when DMA is not used.</p><ol><li>the disk controller reads the block (one or more sectors) from the drive serially, bit by bit, until the entire block is in the controller’s internal buffer.</li><li>it computes the checksum to verify that no read errors have occurred.</li><li>the controller causes an interrupt.</li></ol><p>When the operating system starts running, it can read the disk block from the controller’s buffer a byte or a word at a time by executing a loop, with each iteration reading one byte or word from a controller device register and storing it in main memory.</p><p>When DMA is used, the procedure is different.</p><ol><li>the CPU programs the DMA controller by setting its registers so it knows what to transfer where. It also issues a command to the disk controller telling it to read data from the disk into its internal buffer and verify the checksum. When valid data are in the disk controller’s buffer, DMA can begin.</li><li>The DMA controller initiates the transfer by issuing a read request over the bus to the disk controller.</li><li>When the disk controller fetches the next word from its internal buffer, it knows where to write it. The write to memory is another standard bus cycle.</li><li>When the write is complete, the disk controller sends an acknowledgement signal to the DMA controller, also over the bus.</li></ol><p>But not all computers use DMA. The argument against it is that the main CPU is often far faster than the DMA controller and can do the job much faster. If there is no other work for it to do, having the (fast) CPU wait for the (slow) DMA controller to finish is pointless. Also, getting rid of the DMA controller and having the CPU do all the work in software saves money, important on low-end (embedded) computers.</p><h4 id="Interrupts-Revisited"><a href="#Interrupts-Revisited" class="headerlink" title="Interrupts Revisited"></a>Interrupts Revisited</h4><p>Interrupts can be categorized by 2 types: precise interrupt and imprecise interrupt. A <strong>precise interrupt</strong> leaves the machine in a well-defined state. Such an interrupt has four properties:</p><ol><li>The PC (program counter) is saved in a known place.</li><li>All instructions before the <em>one pointed by the PC</em> (由程序计数器指向的) have completed.</li><li>No instruction beyond the one pointed to by the PC has finished.</li><li>The execution state os the instruction pointed by the PC is known.</li></ol><p>An interrupt that does not meet these requirements is called an <strong>imprecise interrupt</strong>.</p><p><img src="/2025/05/27/OS-3/5-6.png" alt="difference between interrupts"></p><p>Some machines, such as the x86 family, hav e precise interrupts to allow old software to work correctly.</p><h3 id="Principles-of-I-O-Software"><a href="#Principles-of-I-O-Software" class="headerlink" title="Principles of I&#x2F;O Software"></a>Principles of I&#x2F;O Software</h3><h4 id="Programmed-I-O"><a href="#Programmed-I-O" class="headerlink" title="Programmed I&#x2F;O"></a>Programmed I&#x2F;O</h4><p>The simplest form of I&#x2F;O is to have CPU do all work. This method is called <strong>programmed I&#x2F;O</strong>. This is simple but has the disadvantage of typing up the CPU full time until all the I&#x2F;O is done.</p><h3 id="Interrupt-Driven-I-O"><a href="#Interrupt-Driven-I-O" class="headerlink" title="Interrupt-Driven I&#x2F;O"></a>Interrupt-Driven I&#x2F;O</h3><p>When the system call, for example, to print the string is made, the buffer is copied to kernel space, as we showed earlier, and the first character is copied to the printer as soon as it is willing to accept a character. At that point the CPU calls the scheduler and some other process is run. The process that asked for the string to be printed is blocked until the entire string has printed. When the printer has printed the character and is prepared to accept the next one, it generates an interrupt. This interrupt stops the current process and saves its state. Then the printer interrupt-service procedure is run.</p><p>An obvious disadvantage of interrupt-driven I&#x2F;O is that an interrupt occurs on ev ery character. Interrupts take time, so this scheme wastes a certain amount of CPU time.</p><h4 id="Using-DMA"><a href="#Using-DMA" class="headerlink" title="Using DMA"></a>Using DMA</h4><p>A solution is to use DMA. Here the idea is to let the DMA controller feed the characters to the printer one at time, without the CPU being bothered.</p><p>The big win with DMA is reducing the number of interrupts from one per character to one per buffer printed. If there are many characters and interrupts are slow, this can be a major improvement. On the other hand, the DMA controller is usually much slower than the main CPU. If the DMA controller is not capable of driving the device at full speed, or the CPU usually has nothing to do anyway while waiting for the DMA interrupt, then interrupt-driven I&#x2F;O or even programmed I&#x2F;O may be better. Most of the time, though, DMA is worth it.</p><h3 id="Disk-Formatting"><a href="#Disk-Formatting" class="headerlink" title="Disk Formatting"></a>Disk Formatting</h3><p>Before the disk can be used, each <em>platter</em> (磁盘片) must receive a <strong>low-level format</strong> done by software.</p><p><img src="/2025/05/27/OS-3/5-21.png" alt="disk"></p><p>The preamble starts with a certain bit pattern that allows the hardware to recognize the start of the sector. The ECC field contains <em>redundant</em> (冗余) information that can be used to recover from read errors.</p><p>The position of sector 0 on each track is offset from the previous track when the low-level format is laid down. This offset, called <strong>cylinder skew</strong> (柱面斜进), is done to improve performance. The idea is to allow the disk to read multiple tracks in one continuous operation without losing data.</p><p><img src="/2025/05/27/OS-3/5-22.png" alt="cylinder skew"></p><p>As a result of the low-level formatting, disk capacity is reduced.</p><p>The final step in preparing a disk for use is to perform a <strong>high-level format</strong> of each partition (separately). This operation lays down a boot block, the free storage administration (free list or bitmap), root directory, and an empty file system.</p><div class="note note-info">            <p>low-level format initializes sectors, high-level skew format initialize boot blocks and data structure that manages free blocks.</p>          </div><h3 id="User-Interfaces-Fonts"><a href="#User-Interfaces-Fonts" class="headerlink" title="User Interfaces: Fonts"></a>User Interfaces: Fonts</h3><p>In versions of Windows before 3.1, characters were represented as bitmaps. But it cannot change point type. The solution was the introduction od TrueType fonts. Each TrueType character is defined by a sequence of points around its <em>perimeter</em> (边缘). Using this system, it is easy to scale the characters up or down. All that has to be done is to multiply each <em>coordinate</em> (坐标) by the same scale factor. Once at the proper size, the points can be connected using the follow-the-dots algorithm.</p><h3 id="Power-Management-of-CPU"><a href="#Power-Management-of-CPU" class="headerlink" title="Power Management of CPU"></a>Power Management of CPU</h3><p><img src="/2025/05/27/OS-3/5-42.png" alt="CPU power management"></p><p>On many computers, there is a relationship between CPU voltage, clock cycle, and power usage. The CPU voltage can often be reduced in software, which saves energy but also reduces the clock cycle (approximately linearly). Since power consumed is proportional to the square of the voltage, cutting the voltage in half makes the CPU about half as fast but at 1&#x2F;4 the power.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Files&quot;&gt;&lt;a href=&quot;#Files&quot; class=&quot;headerlink&quot; title=&quot;Files&quot;&gt;&lt;/a&gt;Files&lt;/h2&gt;&lt;h3 id=&quot;File-Types&quot;&gt;&lt;a href=&quot;#File-Types&quot; class=&quot;headerlink&quot; </summary>
      
    
    
    
    <category term="日常" scheme="http://example.com/categories/%E6%97%A5%E5%B8%B8/"/>
    
    
    <category term="日常" scheme="http://example.com/tags/%E6%97%A5%E5%B8%B8/"/>
    
    <category term="复习" scheme="http://example.com/tags/%E5%A4%8D%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>Memory Management - Modern Operating System</title>
    <link href="http://example.com/2025/05/22/OS-2/"/>
    <id>http://example.com/2025/05/22/OS-2/</id>
    <published>2025-05-22T04:19:31.000Z</published>
    <updated>2025-06-18T02:07:36.720Z</updated>
    
    <content type="html"><![CDATA[<h2 id="No-Memory-Abstraction"><a href="#No-Memory-Abstraction" class="headerlink" title="No Memory Abstraction"></a>No Memory Abstraction</h2><p>The simplest memory abstraction is to have no abstraction at all.</p><p>Even with no memory abstraction, it is possible to run multiple programs at the same time. What the operating system has to do is save the entire contents of memory to a disk file, then bring in and run the next program. As long as there is only one program at a time in memory, there are no conflicts.</p><p>With the addition of some special hardware, it is possible to run multiple programs concurrently, even without swapping. It is shown as below. The figure (C) was the combination of program of (a) and (b)</p><p><img src="/2025/05/22/OS-2/3-2.png" alt="illustration of the relocation problem"></p><p>Modify the second program on the fly as it loaded it into memory using a technique known as <strong>static relocation</strong>. It worked like this: When a program was loaded at address 16,384, the constant 16,384 was added to every program address during the load process (so “JMP 28” became “JMP 16,412”, etc.). While the <strong>dynamic relocation</strong> (动态重定位) is to add a base address to the program.</p><p>Static relocation is like printing a map where all of addresses can easy to find, but once the map is printed, the location would have settled. And the dynamic relocation is like using GPS that knows your currently address, once you move to different location, address would change.</p><p>But the physical memory of the computer isn’t large enough to hold all the processes often, so we need a strategy to manage the processes.</p><h3 id="Swapping"><a href="#Swapping" class="headerlink" title="Swapping"></a>Swapping</h3><p>The operation of a swapping system is illustrated below.</p><p><img src="/2025/05/22/OS-2/3-4.png" alt="an example of swapping"></p><h3 id="Managing-Free-Memory"><a href="#Managing-Free-Memory" class="headerlink" title="Managing Free Memory"></a>Managing Free Memory</h3><p>When memory is assigned dynamically, the operating system must manage it. We have two ways to manage the operating system.</p><p><img src="/2025/05/22/OS-2/3-6.png" alt="overview of two ways"></p><ul><li><p>with bitmap</p><p>  Memory is divided into allocation units (small as a few words, large as several kilobytes). Corresponding to each allocation unit is a bit in the bitmap, which is 0 if the unit is free and 1 if it is occupied (or vice versa).</p></li><li><p>with linked lists</p><p>  Another way is to maintain a linked list of allocated and free memory segments, where a segment either contains a process (<code>P</code>) or is an empty hole (<code>H</code>) between two processes.</p></li></ul><p>Both methods have their pros and cons. Bitmap is simple. The main problem is that when it has been decided to bring a k-unit process into memory, the memory manager must search the bitmap to find a run of $k$ consecutive 0 bits in the map. Searching a bitmap for a run of a given length is a slow operation. And the linked lists might be too large when there are too many processes.</p><p>When the processes and holes are kept on a list sorted by address, several algorithms can be allocate memory for a created process.</p><ul><li><p><strong>first fit</strong></p><p>  Simplest algorithm. The memory manager scans along the list of segments until it finds a hole that is big enough.</p></li><li><p><strong>next fit</strong></p><p>  The same way as first fit, except that it keeps track of where it is whenever it finds a suitable hole.</p></li><li><p><strong>best fit</strong></p><p>  Searches the entire list, from beginning to end, and takes the smallest hole that is adequate.</p></li><li><p><strong>worst fit</strong></p><p>  Always take the largest available hole, so that the new hole will be big enough to be useful.</p></li></ul><h2 id="Virtual-Memory"><a href="#Virtual-Memory" class="headerlink" title="Virtual Memory"></a>Virtual Memory</h2><p>The basic idea behind <strong>virtual memory</strong> is that each program has its own address space, which is broken up into chunks called <strong>pages</strong>. Each page is a contiguous range of addresses. These pages are mapped onto physical memory, but not all pages have to be in physical memory at the same time to run the program.</p><h3 id="Paging"><a href="#Paging" class="headerlink" title="Paging"></a>Paging</h3><p><img src="/2025/05/22/OS-2/3-8.png" alt="how the virtual address work"></p><p>Those program-generated addresses are called <strong>virtual addresses</strong> and form the <strong>virtual address space</strong>. When virtual memory is used, the virtual addresses do not go directly to the memory bus. Instead, they go to an <strong>MMU</strong> (<strong>Memory Management Unit</strong>) that maps the virtual addresses onto the physical memory addresses.</p><p>The virtual address space consists of fixed-size units called pages. The corresponding units in the physical memory are called <strong>page frames</strong>. The pages and page frames are generally the same size.</p><p><img src="/2025/05/22/OS-2/3-9.png" alt="relationship between different addresses"></p><p>In the actual hardware, a <strong>Present&#x2F;absent bit</strong>keeps track of which pages are physical present in memory. If the program references an unmapped address, it will cause CPU to trap to the operating system. This trap is called a <strong>page fault</strong>. The operating system picks a little-used page frame and writes its contents back to the disk (if it is not already there), and then fetches (also from the disk) the page that was just referenced into the page frame just freed, change the map, and restarts the trapped instruction.</p><p>The page number is used as an index into the <strong>page table</strong>, yielding the number of the page frame corresponding to that virtual page.</p><h3 id="Page-Tables"><a href="#Page-Tables" class="headerlink" title="Page Tables"></a>Page Tables</h3><p>The purpose of the page table is to map virtual pages onto page frames.</p><p><img src="/2025/05/22/OS-2/3-10.png" alt="page table"></p><div class="note note-info">            <p>NOTES:</p><ul><li><p><em>page table</em> (页表)</p></li><li><p>Because in this case the pages occupied 4KB (or $2^{12}$ bit), we take the back 12 bits (<strong>The lowest $\log_2B$ bits</strong>) to contain the offset.</p></li><li><p>There are 16 pages, so we take the front 4 bits to contain the virtual page number.</p></li></ul>          </div><div class="note note-success">            <p>Usually, each process has its own page table.</p>          </div><p><img src="/2025/05/22/OS-2/3-11.png" alt="structure of a page table entry"></p><p>We could see that</p><ul><li>the <em>Caching disable</em> bits tell whether being caching is permitted.</li><li>the <em>Protection</em> bits tell what kind of access are permitted.</li><li>the <em>Modified</em> and <em>Referenced</em> bits keep track of page usage. If the page in it has been <em>modified</em> (修改), it must be written back to the disk, and it also called <em>dirty bit</em>. The <em>Reference</em> bit is set a page is referenced, either for reading or for writing.</li><li>the <em>Present&#x2F;absent</em> bits tells whether this virtual page is in the physical memory.</li></ul><h3 id="Speeding-Up-Paging"><a href="#Speeding-Up-Paging" class="headerlink" title="Speeding Up Paging"></a>Speeding Up Paging</h3><p>In any paging system, two issues must be faced:</p><ol><li><p>The mapping from virtual address to physical address must be fast.</p></li><li><p>If the virtual address space is large, the page table will be large.</p></li></ol><p>The former is easier but the latter would be harder. In order to solve the problem we would add a devise called <strong>TLB</strong> (<strong>Translation Lookaside Buffer</strong> 页表缓存).</p><p>When software TLB management is used, it is essential to understand the difference between different kinds of misses. A <strong>soft miss</strong> occurs when the page referenced is not in the TLB, but is in memory. All that is needed here is for the TLB to be updated. No disk I&#x2F;O is needed. In contrast, a <strong>hard miss</strong> occurs when the page itself is not in memory (and of course, also not in the TLB). A disk access is required to bring in the page, which can take several milliseconds, depending on the disk being used.</p><p>The error that we do not need to access the disk again, but merely map the page appropriately in the page tables. This is a pretty soft miss that is known as a <strong>minor page fault</strong>. A <strong>major page fault</strong> occurs if the page needs to be brought in from disk. And it is possible that the program simply accessed an invalid address and no mapping needs to be added in the TLB at all. In that case, the operating system typically kills the program with a <strong>segmentation fault</strong>.</p><h3 id="Page-Table-for-Large-Memories"><a href="#Page-Table-for-Large-Memories" class="headerlink" title="Page Table for Large Memories"></a>Page Table for Large Memories</h3><ul><li><p>multilevel page tables</p><p>  <img src="/2025/05/22/OS-2/3-13.png" alt="two-level page tables"></p>  <div class="note note-info">            <p>As an example, consider the 32-bit virtual address 0x00403004. This virtual address corresponds to <code>PT1 = 1</code>, <code>PT2 = 3</code>, and <code>Offset = 4</code>. The MMU first uses <code>PT1</code> to index into the top-level page table and obtain entry 1, which corresponds to addresses 4M to 8M − 1. It then uses <code>PT2</code> to index into the second-level page table just found and extract entry 3, which corresponds to addresses 12288 to 16383 within its 4M chunk. This entry contains the page frame number of the page containing virtual address 0x00403004.</p>          </div></li><li><p>Inverted Page Tables</p><p>  <img src="/2025/05/22/OS-2/3-14.png" alt="physical addresses mark virtual addresses"></p><p>  Operating system only maintains a global page table. Physical address is just a index by hash on virtual page, and attaches a string of virtual addresses.</p><p>  Inverted Page Tables can obviously cut down physical memory occupied, but the speed of address transferring is relatively slow.</p></li></ul><h2 id="Page-Replacement-Algorithms"><a href="#Page-Replacement-Algorithms" class="headerlink" title="Page Replacement Algorithms"></a>Page Replacement Algorithms</h2><p>Now we are trying to find out algorithms that can avoid page fault occurring most.</p><h3 id="The-Optimal-Page-Replacement-Algorithm-OPT"><a href="#The-Optimal-Page-Replacement-Algorithm-OPT" class="headerlink" title="The Optimal Page Replacement Algorithm (OPT)"></a>The Optimal Page Replacement Algorithm (OPT)</h3><p>It is the best possible replacement algorithm. And it goes like this: at the moment that a page fault occurs, the page with the highest number of instructions that will be execute before that page is first referenced should be removed.</p><h3 id="The-First-In-First-Out-FIFO-Replacement-Algorithm"><a href="#The-First-In-First-Out-FIFO-Replacement-Algorithm" class="headerlink" title="The First-In First-Out (FIFO) Replacement Algorithm"></a>The First-In First-Out (FIFO) Replacement Algorithm</h3><p>It is easy to figure out.</p><h3 id="The-Second-Chance-Page-Replacement-Algorithm"><a href="#The-Second-Chance-Page-Replacement-Algorithm" class="headerlink" title="The Second-Chance Page Replacement Algorithm"></a>The Second-Chance Page Replacement Algorithm</h3><p>A progress in FIFO algorithm.</p><p><img src="/2025/05/22/OS-2/3-15.png" alt="an instance of second-chance replacement algorithm"></p><h3 id="The-Clock-Page-Replacement-Algorithm"><a href="#The-Clock-Page-Replacement-Algorithm" class="headerlink" title="The Clock Page Replacement Algorithm"></a>The Clock Page Replacement Algorithm</h3><p><img src="/2025/05/22/OS-2/3-16.png" alt="an instance of clock replacement algorithm"></p><h3 id="The-Last-Recently-Used-LRU-Page-Replacement-Algorithm"><a href="#The-Last-Recently-Used-LRU-Page-Replacement-Algorithm" class="headerlink" title="The Last Recently Used (LRU) Page Replacement Algorithm"></a>The Last Recently Used (LRU) Page Replacement Algorithm</h3><p>When a page fault occurs, the <strong>Last Recently Used</strong> (<strong>LRU</strong>) algorithm throws out the page that has been unused for the longest time.</p><p>But this algorithm has a problem: it is not cheap by a long shot. To fully implement LRU, it is necessary to maintain a linked list of all pages in memory, with the most recently used page at the front and the least recently used page at the rear. The difficulty is that the list must be updated on every memory reference.</p><h3 id="Simulating-LRU-in-Software"><a href="#Simulating-LRU-in-Software" class="headerlink" title="Simulating LRU in Software"></a>Simulating LRU in Software</h3><p>One possibility is called the <strong>NFU</strong> (<strong>Not Frequently Used</strong>) algorithm. When a page fault occurs, the page with the lowest counter is chosen for replacement.</p><p>The main problem with NFU is that it never forgets anything. Consequently, the operating system will remove useful pages instead of pages no longer in use. So there is a modification to NFU, known as <strong>aging</strong>.</p><p><img src="/2025/05/22/OS-2/3-17.png" alt="how aging works"></p><p>aging is most used (except of WSClock) now.</p><h2 id="Design-Issues-for-Paging-Systems"><a href="#Design-Issues-for-Paging-Systems" class="headerlink" title="Design Issues for Paging Systems"></a>Design Issues for Paging Systems</h2><h3 id="Page-Size"><a href="#Page-Size" class="headerlink" title="Page Size"></a>Page Size</h3><p>We stand $s$ bytes for average process size, $p$ bytes for page size, $e$ bytes for each page entry. So its <em>overhead</em> (开销) can be figure out</p><p>$$<br>\text{overhead} &#x3D; \frac{se}{p}+\frac{p}{2}<br>$$</p><p>take the first derivative</p><p>$$<br>-\frac{se}{p^2}+\frac{1}{2} &#x3D; 0<br>$$</p><p>So the optimum page size is</p><p>$$<br>p&#x3D;\sqrt{2se}<br>$$</p><h3 id="Share-Pages"><a href="#Share-Pages" class="headerlink" title="Share Pages"></a>Share Pages</h3><p>When more processes share some code, a problem occurs with the shared pages. If one process is removed from the memory, evicting all its pages, others will generate large number of page faults. So when a process terminates, special page data structures are needed to keep track of shared pages.</p><p>Sharing data is more tricker than sharing code, and what is often done is to give each of these processes its own page table and have both od them point to the same set of pages. However, all the data pages are mapped into both processes as <code>READ ONLY</code>. As soon as one process updates a memory system, the violation of the read-only protection causes a trap to the operating system. A copy is then made of the offending page so that each process now has its own <strong>private copy</strong> (专用副本). All copies are now set to <code>READ/WRITE</code>, so subsequent writes to one copy proceed without trapping. This strategy means that those pages that are never modified (including all the program pages) need not be copied. Only the data pages that are actually modified need to be copied. This approach, called <strong>copy on write</strong>(<strong>COW</strong>), improves performance by reducing copying.</p><p><img src="/2025/05/22/OS-2/3-25.png" alt="an instance that share the same program"></p><h3 id="Shared-Libraries"><a href="#Shared-Libraries" class="headerlink" title="Shared Libraries"></a>Shared Libraries</h3><div class="note note-warning">            <p>This part should be linked to file system.</p>          </div><p>Statically linking hundreds of programs with all these libraries would waste a tremendous amount of space on the disk as well as wasting space in RAM when they were loaded since the system would have no way of knowing it could share them. This is where shared libraries come in. When a program is linked with shared libraries, instead of including the actual function called, the linker includes a small <em>stub routine</em> (存根例程) that binds to the called function at run time.</p><p>Note that when a library is loaded or used, the entire library is not read into memory whole. It is paged in, page by page, as needed.</p><p>As shared library, <code>.so</code> on Linux, <code>.dll</code> on Windows, inner data and code must use relative addresses.</p><p><img src="/2025/05/22/OS-2/3-26.png" alt="an instance of share library"></p><div class="note note-success">            <p>Shared library uses relative address instead of absolute address. When program loading shared library, it will map shared library to address space while running, so using relative address can let shared library load to different memory addresses.</p>          </div><h3 id="Mapped-Files"><a href="#Mapped-Files" class="headerlink" title="Mapped Files"></a>Mapped Files</h3><p>Shared libraries are really a special case of a more general facility called <strong>memory-mapped files</strong>. The idea here is that a process can issue a system call to map a file onto a portion of its virtual address space.</p><p>We can imagine “copying” file to a portion of virtual memory, where program can treat file as common memory.</p><div class="note note-info">            <p>So in C language and C++, before operating a file, define a file pointer is necessary.</p>          </div><p>Mapped files provide an alternative model for I&#x2F;O. Instead, of doing <code>read()</code> and <code>write()</code>, the file can be accessed as a big character array in memory.</p><p>If two or more processes map onto the same file at the same time, they can communicate over shared memory. Writes done by one process to the shared memory are immediately visible when the other one reads from the part of its virtual address spaced mapped onto the file.</p><h2 id="Implementation-issues"><a href="#Implementation-issues" class="headerlink" title="Implementation issues"></a>Implementation issues</h2><h3 id="Locking-Pages-in-Memory"><a href="#Locking-Pages-in-Memory" class="headerlink" title="Locking Pages in Memory"></a>Locking Pages in Memory</h3><p>Consider a process that has just issued a system call to read from some file or device into a buffer within its address space. While waiting for the I&#x2F;O to complete, the process is suspended and another process is allowed to run. This other process gets a page fault. So we need to lock this page in memory to avoid it happened.</p><p>So locking pages in memory means keeping physical address corresponded with certain virtual address forcibly, not allowing operating system swap these pages to disk.</p><p>Excessive locking pages will decline available space of physical memory, and more page faults would be happened on other processes.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;No-Memory-Abstraction&quot;&gt;&lt;a href=&quot;#No-Memory-Abstraction&quot; class=&quot;headerlink&quot; title=&quot;No Memory Abstraction&quot;&gt;&lt;/a&gt;No Memory Abstraction&lt;/</summary>
      
    
    
    
    <category term="日常" scheme="http://example.com/categories/%E6%97%A5%E5%B8%B8/"/>
    
    
    <category term="日常" scheme="http://example.com/tags/%E6%97%A5%E5%B8%B8/"/>
    
    <category term="复习" scheme="http://example.com/tags/%E5%A4%8D%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>Processes and Threads - Modern Operating System</title>
    <link href="http://example.com/2025/05/14/OS/"/>
    <id>http://example.com/2025/05/14/OS/</id>
    <published>2025-05-13T16:31:17.000Z</published>
    <updated>2025-06-17T16:12:04.555Z</updated>
    
    <content type="html"><![CDATA[<div class="note note-success">            <p>As the final exam use English as its language, I shall try my best to edit it in English.</p>          </div><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><h3 id="Definition"><a href="#Definition" class="headerlink" title="Definition"></a>Definition</h3><p>What is an operating system?</p><ul><li><p>It can be a extended machine that manages how hardware work in harmony, and an abstraction of various hardwares.</p></li><li><p>It can be a resource manager that manage files of user’s or execute programs’.</p></li></ul><h3 id="Structures-of-a-Operating-Systems"><a href="#Structures-of-a-Operating-Systems" class="headerlink" title="Structures of a Operating Systems"></a>Structures of a Operating Systems</h3><h4 id="Monolithic-单体式-Systems"><a href="#Monolithic-单体式-Systems" class="headerlink" title="Monolithic (单体式) Systems"></a><em>Monolithic</em> (单体式) Systems</h4><p><img src="/2025/05/14/OS/1-24.png" alt="A monolithic systems"></p><p>By far the most common organization, in the monolithic approach the entire operating system runs as a single program in kernel mode. The operating system is written as a collection of procedures, linked together into a single large executable binary program.</p><p>It is often used in embedded operating systems and early operating systems.</p><h4 id="Layered-Systems"><a href="#Layered-Systems" class="headerlink" title="Layered Systems"></a>Layered Systems</h4><p><img src="/2025/05/14/OS/1-25.png" alt="An instance of a layered system"></p><h4 id="Virtual-Machines"><a href="#Virtual-Machines" class="headerlink" title="Virtual Machines"></a>Virtual Machines</h4><p><img src="/2025/05/14/OS/1-28.png" alt="One possible structure of VM"></p><p>The heart of the system, known as the virtual machine monitor, runs on the bare hardware and does the multiprogramming, providing not one, but several virtual machines to the next layer up.</p><h3 id="System-Calls"><a href="#System-Calls" class="headerlink" title="System Calls"></a>System Calls</h3><p>The system calls available in the interface vary from one operating system to another. Usually we would use system calls <code>open()</code> (open a file), <code>read()</code> (read a file), <code>write()</code> (write a file), <code>fork()</code> (create a process), <code>exit()</code> (kill a process), and so on.</p><p>Processes in UNIX have their memory divided up into three segments: the <strong>text segment</strong> (i.e., the program code), the <strong>data segment</strong> (i.e., the variables), and the <strong>stack segment</strong>. The data segment grows upward and the stack grows downward.</p><p>The global variables contain in the data segment, while the local variables contain in the stack segment.</p><p><img src="/2025/05/14/OS/1-20.png" alt="A process shown inIntel CPU"></p><p>In Intel CPU, biggest address is the bottom of stack, so decline pointer means push something in stack.</p><p>So how system call works?</p><ol><li>In most case user use standard library function to use system call (say, <code>printf()</code> uses <code>write()</code>).</li><li>Library function send parameters from user space to a certain position.</li><li>Library function execute a special command that force CPU to switch to kernel space to execute calls.</li><li>After executed, results would be stored to registers or somewhere else, then force CPU to switch to user space.</li></ol><h2 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h2><p>A process is just an instance of an executing program. A process is also a basic unit when operating system allocating resources.</p><h3 id="Kernel-Mode-and-User-Mode"><a href="#Kernel-Mode-and-User-Mode" class="headerlink" title="Kernel Mode and User Mode"></a>Kernel Mode and User Mode</h3><p>Kernel mode and user mode are two different running status of CPU.</p><p><strong>User mode</strong>: Processes is running under permission limited. When user processes need to use system call or something else, kernel mode is needed.</p><p><strong>Kernel mode</strong>: Operating Systems are running under kernel mode that have the highest permission.</p><h3 id="Process-Creation"><a href="#Process-Creation" class="headerlink" title="Process Creation"></a>Process Creation</h3><p>Four <em>principal</em> (主要的) events cause processes to be created</p><ol><li>System initialization.</li><li>Execution of a process-creation system call by a running process.</li><li>A user request to create a new process.</li><li>Initiation of a batch job.</li></ol><p>First of these is called <em>implicit invocation</em> (隐式调用), others are called explicit invocation.</p><p>In UNIX, the <em><code>ps</code></em> program can be used to list the running processes. In interactive systems, users can start a program by typing a command or (double) clicking on anicon.</p><p>In this C language program</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">pid_t</span> pid;<br>    pid = fork();<br>    <span class="hljs-keyword">if</span>(!pid)<br>    &#123;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<br>        &#123;<br>            sleep(<span class="hljs-number">1</span>);<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;haha\n&quot;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(pid &gt; <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<br>        &#123;<br>            sleep(<span class="hljs-number">1</span>);<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;hehe\n&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Child process would copies most of parent process such as data segment, data segment, heap and stack. But there are some difference like some status information.</p><p>The function <code>fork()</code> will return twice: the pid of child process in parent process, 0 in child process.</p><p>But the result on the DOS part does not relative to the pid, and it just constantly printing “haha” and “hehe”.</p><p>There are another call <code>execl</code>, and the example program is as follow</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;unistd.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">pid_t</span> pid;<br>    pid = fork();<br>    <span class="hljs-keyword">if</span>(pid==<span class="hljs-number">0</span>)<br>    &#123;<br>        execl(<span class="hljs-string">&quot;/bin/ls&quot;</span>,<span class="hljs-string">&quot;ls&quot;</span>,<span class="hljs-string">&quot;-1&quot;</span>,<span class="hljs-number">0</span>);<br>        <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<br>        &#123;<br>            sleep(<span class="hljs-number">1</span>);<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;haha\n&quot;</span>);<br>        &#125;<br>    &#125;<br>    <span class="hljs-keyword">if</span>(pid &gt; <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>)<br>        &#123;<br>            sleep(<span class="hljs-number">1</span>);<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;hehe\n&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>When a process execute <code>exec()</code>， it would swap whole memory image.</p><p>But remember, the <code>execl</code> command just swap the following code to the command <code>ls</code>, so the child process will execute the <code>ls</code> command while the parent command continue to print “hehe”. Which means that a portion behind child process is just <code>ls</code>, not going loop for infinity. The Command <code>execl</code> itself does not create a new process.</p><p>All in all, <code>fork()</code> is to create a process while <code>exec()</code> is to execute a program.</p><h3 id="Process-Termination"><a href="#Process-Termination" class="headerlink" title="Process Termination"></a>Process Termination</h3><p>Process might terminate in four conditions</p><ol><li>normal exit (voluntary)<br> When user click “exit” button or a program run out of code (including <code>exit(0)</code>).</li><li>error exit (voluntary)<br> When a program encounters an error that is not fatal but cannot continue to procedure, it usually calls <code>exit()</code> system call and return a not 0 value.</li><li><em>fatal error</em> (致命错误) (involuntary)<br> Examples:<ol><li>When the program tries to access a invalid memory address (segment fault).</li><li>Process divided into 0.</li><li>Stack overflow.</li></ol></li><li>killed by other process (involuntary)<br> User terminate a process via <code>kill</code> command, for instance.</li></ol><h3 id="Process-State"><a href="#Process-State" class="headerlink" title="Process State"></a>Process State</h3><p>Three states a process might be in:</p><ol><li>Running (actually using the CPU)</li><li>Ready (runnable, temporarily stopped to let another process run)</li><li>Blocked (unable to run until some external event happens)</li></ol><p><img src="/2025/05/14/OS/2-2.png" alt="status of a process"></p><p>In fact there are far more than three states</p><h3 id="Implementation-of-Processes"><a href="#Implementation-of-Processes" class="headerlink" title="Implementation of Processes"></a>Implementation of Processes</h3><p>To implement the process model, the operating system maintains a table (an array of structures) that contains all about the process, called the process table, with one entry per process. (Some authors call these entries <strong>process control blocks</strong>, or <strong>PCB</strong> for short)</p><p><img src="/2025/05/14/OS/2-4.png" alt="a PCB contains various information"></p><p>For short, a PCB concludes information as follow:</p><ul><li><strong>Registers</strong>: All values in registers when process is pausing.</li><li><strong>Program Counter</strong>: The address that next command will be executed.</li><li><strong>Process Status Word</strong>: running, ready or blocked.</li><li><strong>Scheduling Parameters</strong>: Process priority, scheduling queue pointer and so on.</li><li>Process ID (<strong>PID</strong>) and Parent Process ID (<strong>PPID</strong>): only way to mark a process.</li><li><strong>Memory Management Message</strong>: Relative to <em>Page Table</em> where PCB contains a pointer pointed to page table of this process.</li><li><strong>File Management Message</strong>: File list and file pointer.</li><li><strong>I&#x2F;O Status</strong>: I&#x2F;O devices allocated for process and unfinished I&#x2F;O request list.</li></ul><h3 id="Modeling-Multiprogramming"><a href="#Modeling-Multiprogramming" class="headerlink" title="Modeling Multiprogramming"></a>Modeling Multiprogramming</h3><p>We know that most of using time is on I&#x2F;O. Let the <code>n</code> stands for the number of processes, <code>p</code> stands for the I&#x2F;O time, the CPU utilization can be computed by this formula:</p><p>$$<br>\textup{CPU utilization} &#x3D; 1-p^n<br>$$</p><p>The figure is as follow</p><p><img src="/2025/05/14/OS/2-6.png" alt="degree of multiprogramming"></p><h2 id="Thread"><a href="#Thread" class="headerlink" title="Thread"></a>Thread</h2><p>Why we need thread instead of creating a new process?</p><ul><li>Threads can share an address space and all of its data among themselves (in the same process), while processes is relatively independent.</li><li>Threads are lighter weight than processes, which means they are easier to create and destroy than processes.</li><li>When there is substantial computing and also substantial I&#x2F;O, having threads allows these activities to overlap, thus speeding up the application.</li></ul><div class="note note-info">            <p>Though threads can share same memories, each thread has its own stack.</p>          </div><h3 id="The-Classical-Thread-Model"><a href="#The-Classical-Thread-Model" class="headerlink" title="The Classical Thread Model"></a>The Classical Thread Model</h3><p>What threads add to the process model is to allow multiple executions to take place in the same process environment, to a large degree independent of one another.  When multithreading is present, processes usually start with a single thread present.</p><h3 id="POSIX-Thread"><a href="#POSIX-Thread" class="headerlink" title="POSIX Thread"></a>POSIX Thread</h3><p>IEEE has defined a standard for threads in IEEE standard. The threads package it defines is called Pthreads. Most UNIX systems support it.</p><p><img src="/2025/05/14/OS/2-14.png" alt="some of the Pthreads function calls"></p><h2 id="InterProcess-Communication"><a href="#InterProcess-Communication" class="headerlink" title="InterProcess Communication"></a>InterProcess Communication</h2><p>Processes frequently need to communicate with other processes. In the following sections we will look at some of the issues related to this <strong>InterProcess Communication</strong>, or <strong>IPC</strong>.</p><h3 id="Race-Conditions-and-Critical-Regions"><a href="#Race-Conditions-and-Critical-Regions" class="headerlink" title="Race Conditions and Critical Regions"></a>Race Conditions and Critical Regions</h3><p>In some operating systems, processes that are working together may share some common storage that each one can read and write. where two or more processes are reading or writing some shared data and the final result depends on who runs precisely when, are called <strong>race conditions</strong>. We need to avoid that happens.</p><p>How to avoid race conditions? The key to preventing trouble here and in many other situations involving shared memory, shared files, and shared everything else is to find some way to prohibit more than one process from reading and writing the shared data at the same time. What we need is <em>mutual exclusion</em>(互斥) that puts in critical region or critical section.</p><p>But avoiding race conditions is not sufficient for having parallel processes cooperate correctly and efficiently using shared data. We need four conditions to hold to have a good solution:</p><ol><li>No two processes may <em>simultaneously</em>(同时地) inside their critical regions.</li><li>No assumptions may be made about speeds or the number of CPUs.</li><li>No process running outside its critical region may block any process.</li><li>No process should have to wait forever to enter its critical region.</li></ol><div class="note note-info">            <p>中文译文：</p><ol><li>临界区不能被两个进程同时进入。</li><li>不能提前预设CPU的数量。</li><li>不涉及临界区时，该进程不能阻挡其他进程运行。</li><li>不能发生进程永久等待以进入临界区的情况。</li></ol>          </div><h3 id="Mutual-Exclusion-with-Busy-Waiting"><a href="#Mutual-Exclusion-with-Busy-Waiting" class="headerlink" title="Mutual Exclusion with Busy Waiting"></a>Mutual Exclusion with Busy Waiting</h3><ul><li>Disabling Interrupts (禁用中断)</li></ul><p>On a single-processor system, the simplest solution is to have each process disable all interrupts just after entering its critical region. But it only useable in single-processor system.</p><ul><li><strong>Lock Variables</strong> (锁住变量)</li></ul><p>Most frequently-used method. Consider having a single, shared (lock) variable, initially 0. When a process wants to enter its critical region, it first tests the lock. If the lock is 0, the process sets it to 1 and enters the critical region. If the lock is already 1, the process just waits until it becomes 0.</p><ul><li><strong>Strict Alternation</strong> (严格轮替)</li></ul><p>Available when it is only 2 threads. of course more than 2 threads are also available, but not so flexible, which is called <strong>spin lock</strong>. However, this method <em>violate</em> (违反) “No process running outside its critical region may block another process.” principle.</p><p>More strictly, a spin lock means a lock that uses busy waiting. <strong>Busy waiting</strong> means Continuously testing a variable until some value appears. It is very suitable for this alternation.</p><p>a.c</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)<br>&#123;<br>    <span class="hljs-keyword">while</span>(turn != <span class="hljs-number">0</span>);<br>    critical_region();<br>    turn = <span class="hljs-number">1</span>;<br>    noncritical_region();<br>&#125;<br></code></pre></td></tr></table></figure><p>b.c</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)<br>&#123;<br>    <span class="hljs-keyword">while</span>(turn != <span class="hljs-number">1</span>);<br>    critical_region();<br>    turn = <span class="hljs-number">0</span>;<br>    noncritical_region();<br>&#125;<br></code></pre></td></tr></table></figure><ul><li><strong>Peterson’s Solution</strong></li></ul><p>code as below</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> FALSE 0</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> TRUE 1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> N 2 <span class="hljs-comment">/* number of processes */</span></span><br><br><span class="hljs-type">int</span> turn; <span class="hljs-comment">/* whose turn is it? */</span><br><span class="hljs-type">int</span> interested[N]; <span class="hljs-comment">/* all values initially 0 (FALSE) */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">enter_region</span><span class="hljs-params">(<span class="hljs-type">int</span> process)</span> <span class="hljs-comment">/* process is 0 or 1 */</span><br>&#123;<br>    <span class="hljs-type">int</span> other; <span class="hljs-comment">/* number of the other process */</span><br>    other = <span class="hljs-number">1</span> − process; <span class="hljs-comment">/*the opposite of process */</span><br>    interested[process] = TRUE; <span class="hljs-comment">/* show that you are interested */</span><br>    turn = process; <span class="hljs-comment">/*set flag*/</span><br><span class="hljs-keyword">while</span> (turn == process &amp;&amp; interested[other] == TRUE); <span class="hljs-comment">/* null statement */</span><br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">leave_region</span><span class="hljs-params">(<span class="hljs-type">int</span> process)</span><br>&#123;<br>    interested[process] = FALSE; <span class="hljs-comment">/* indicate departure from critical region */</span><br>&#125;<br></code></pre></td></tr></table></figure><p>Initially neither process is in its critical region. Now process 0 calls <code>enter_region</code>. It indicates its interest by setting its array element and sets <code>turn</code> to 0. Since process 1 is not interested, <code>enter_region</code> returns immediately. If process 1 now makes a call to <code>enter_region</code>, it will hang there until <code>interested[0]</code> goes to <code>FALSE</code>, an event happens only when process 0 calls <code>leave_region</code> to exits the critical region.</p><h3 id="Semaphores"><a href="#Semaphores" class="headerlink" title="Semaphores"></a>Semaphores</h3><p>A <strong>semaphore</strong> is a counter that indicates how many processes or threads use this resource. It could have the value 0, indicating that no wakeups were saved, or some positive value if one or more wakeups were pending. A semaphore have two operations: <strong>down</strong> and <strong>up</strong>.</p><p>The down operation (also calls <strong>P operation</strong>) on a semaphore checks if the value is greater than 0. If so, it decrements the value and just continues. If the value is 0, the process is put to sleep without completing the down for the moment.</p><p>Checking the value, changing it, and possibly going to sleep, are all done as a single, indivisible <strong>atomic action</strong>. It is guaranteed that once a semaphore operation has started, no other process can access the semaphore until the operation has completed or blocked. We can imitate this action via using various locks.</p><p>The up operation (also calls <strong>V operation</strong>) increments the value of the semaphore addressed. If one or more processes were sleeping on that semaphore, unable to complete an earlier down operation, one of them is chosen by the system (e.g., at random) and is allowed to complete its down.</p><div class="note note-info">            <p>Semaphore has no concepts like “possession”, so any process waiting for critical region might get resource.</p>          </div><p>using semaphores, we can resolve the producer-consumer problem</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> N 100</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">int</span> semaphore<br>semaphore mutex = <span class="hljs-number">1</span>;<br>semaphore empty = N;<br>semaphore full = <span class="hljs-number">0</span>;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">producer</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    <span class="hljs-type">int</span> item;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)<br>    &#123;<br>        item = produce_item();<br>        down(&amp;empty);<br>        down(&amp;mutex);<br>        insert_item(item);<br>        up(&amp;mutex);<br>        up(&amp;full);<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">consumer</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    <span class="hljs-type">int</span> item;<br>    <span class="hljs-keyword">while</span>(<span class="hljs-literal">true</span>)<br>    &#123;<br>        down(&amp;full);<br>        down(&amp;mutex);<br>        item = remove_item();<br>        up(&amp;mutex);<br>        up(&amp;empty);<br>        consume_item(item);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Here we have defined three semaphores</p><ul><li><p>mutex: a mutex semaphore to protect the critical region. When it down and up one time, a atomic action is completed.</p></li><li><p>empty: when producer is going to produce, it downs the empty semaphore to indicate that it is about to produce. Producer will be blocked when the empty semaphore is smaller than 0 because it is no available position to produce then. When the semaphore is upped, it reminds the producer to produce again.</p></li><li><p>full: A record of existing produce, when consumer is going to consume but the full semaphore is empty, it is blocked.</p></li></ul><h3 id="Mutexes"><a href="#Mutexes" class="headerlink" title="Mutexes"></a>Mutexes</h3><div class="note note-info">            <p>If mutex is like a key that who takes it will enter critical region, the semaphore might like a parking lot that have $N$ position: P operation, semaphore minus 1, stands cars waiting for a position and the position number minus 1. V operation, add 1, calling cars that are waiting are able to atop</p>          </div><p>A <strong>mutex</strong> is a simplified version of the semaphore, and it is a share variable that can be in two states: unlocked or locked.</p><p><img src="/2025/05/14/OS/2-29.png" alt="a possible implementation of mutex"></p><div class="note note-info">            <p>System call <code>thread_yield</code> is just a call to the scheduler in user space.</p>          </div><p>Pthreads provides a number of functions that can be used to synchronize threads.</p><p><img src="/2025/05/14/OS/2-30.png" alt="major calls relating to mutexes"></p><div class="note note-info">            <p>If call <code>Pthread_mutex_lock</code> cannot lock, the thread will sleep;<br>if call <code>Pthread_mutex_trylock</code> cannot lock, it will return <code>false</code>.</p>          </div><p>In addition to mutexes, Pthreads offers a second synchronization mechanism: <strong>condition variables</strong>. Mutexes are good for allowing or blocking access to a critical region. Condition variables allow threads to block due to some condition not being met. Almost always the two methods are used together.</p><p><img src="/2025/05/14/OS/2-31.png" alt="the most important calls related to condition variables"></p><div class="note note-info">            <p>when a call <code>Pthread_cond_wait</code> execute, it will give up the lock at the same time.</p>          </div><p>using mutex, we can also solve producer-consumer problem</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pthread.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX 1e10</span><br><span class="hljs-type">pthread_mutex_t</span> the_mutex;<br><span class="hljs-type">pthread_cond_t</span> condc, condp;<br><span class="hljs-type">int</span> buffer = <span class="hljs-number">0</span>;<br><br><span class="hljs-type">void</span> *<span class="hljs-title function_">producer</span><span class="hljs-params">(<span class="hljs-type">void</span> *ptr)</span><br>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= MAX; i++)<br>    &#123;<br>        pthread_mutex_lock(&amp;the_mutex);<br>        <span class="hljs-keyword">while</span>(buffer != <span class="hljs-number">0</span>)<br>            pthread_cond_wait(&amp;condp, &amp;the_mutex);<br>        buffer = i;<br>        pthread_cond_signal(&amp;condc);<br>        pthread_mutex_unlock(&amp;the_mutex);<br>    &#125;<br>    pthread_exit(<span class="hljs-number">0</span>);<br>&#125;<br><br><span class="hljs-type">void</span> *<span class="hljs-title function_">consumer</span><span class="hljs-params">(<span class="hljs-type">void</span> *ptr)</span><br>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= MAX; i++)<br>    &#123;<br>        pthread_mutex_lock(&amp;the_mutex);<br>        <span class="hljs-keyword">while</span>(buffer == <span class="hljs-number">0</span>)<br>            pthread_cond_wait(&amp;condc, &amp;the_mutex);<br>        buffer = <span class="hljs-number">0</span>;<br>        pthrad_cond_signal(&amp;condp);<br>        pthread_mutex_unlock(&amp;the_mutex);<br>    &#125;<br>    pthread_exit(<span class="hljs-number">0</span>);<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">int</span> argc, <span class="hljs-type">char</span> **argv)</span><br>&#123;<br>    <span class="hljs-type">pthread_t</span> pro, con;<br>    pthread_mutex_init(&amp;the mutex, <span class="hljs-number">0</span>);<br>    pthread_cond_init(&amp;condc, <span class="hljs-number">0</span>);<br>    pthread_cond_init(&amp;condp, <span class="hljs-number">0</span>);<br>    pthread_create(&amp;con, <span class="hljs-number">0</span>, consumer, <span class="hljs-number">0</span>);<br>    pthread_create(&amp;pro, <span class="hljs-number">0</span>, producer, <span class="hljs-number">0</span>);<br>    pthread_join(pro, <span class="hljs-number">0</span>);<br>    pthread_join(con, <span class="hljs-number">0</span>);<br>    pthread_cond_destroy(&amp;condc);<br>    pthread_cond_destroy(&amp;condp);<br>    pthread_mutex_destroy(&amp;the mutex);<br>&#125;<br></code></pre></td></tr></table></figure><p>First from producer. It gets mutex from <code>pthread_mutex_lock</code>, and waits until <code>buffer == 0</code>, if <code>buffer</code> does not empty, it calls <code>pthread_cond_wait</code>, releases lock, and waits for signal <code>condp</code>.</p><p>Now it comes to consumer, which is woken up now. It reads the <code>buffer</code> and make it empty while sending signal <code>endp</code> to wake up producer to produce. They go round until the program is exited.</p><p>Condition variable can avoid busy-waiting by making process into sleep status instead of looping to check whether condition is suitable, which is just a waste of CPU.</p><h2 id="Scheduling"><a href="#Scheduling" class="headerlink" title="Scheduling"></a>Scheduling</h2><h3 id="Scheduling-in-Batch-Systems"><a href="#Scheduling-in-Batch-Systems" class="headerlink" title="Scheduling in Batch Systems"></a>Scheduling in Batch Systems</h3><ul><li><p>1st-Come, 1st-Served</p></li><li><p>Shortest Time 1st</p></li><li><p>Shortest Remaining Time Next<br>  It is the preemptive version of shortest job 1st</p></li></ul><h3 id="Scheduling-in-Interactive-Systems"><a href="#Scheduling-in-Interactive-Systems" class="headerlink" title="Scheduling in Interactive Systems"></a>Scheduling in Interactive Systems</h3><ul><li><p>Round-Robin Scheduling</p><p>  Each process is assigned a time interval, called its quantum, during which it is allowed to run. If the process is still running at the end of the quantum, the CPU is preempted and given to another process. If the process has blocked or finished before the quantum has elapsed, the CPU switching is done when the process blocks, of course. Many scheduling below are other types of round-robin.</p><p>  <img src="/2025/05/14/OS/2-42.png" alt="round-robin scheduling"></p></li><li><p>Priority Scheduling</p><p>  Each process is assigned a priority. In a same priority they obey round-robin.</p><p>  <img src="/2025/05/14/OS/2-43.png" alt="priority scheduling"></p></li><li><p>Guaranteed Scheduling</p><p>  Operating system will keep track of each process and provide a guaranteed CPU occupation. The scheduler will priory select a process that has the lowest percentage to run.</p></li><li><p>Lottery Scheduling</p><p>  Scheduling like lottery, then it will be a balance at a long time.</p></li></ul><h2 id="Classic-IPC-Problems"><a href="#Classic-IPC-Problems" class="headerlink" title="Classic IPC Problems"></a>Classic IPC Problems</h2><h3 id="The-Dining-Philosophers-Problem"><a href="#The-Dining-Philosophers-Problem" class="headerlink" title="The Dining Philosophers Problem"></a><strong>The Dining Philosophers Problem</strong></h3><p><img src="/2025/05/14/OS/2-45.png" alt="description"></p><p>The life of a philosopher consists of alternating periods of eating and thinking. When a philosopher gets sufficiently hungry, she tries to acquire her left and right forks, one at a time, in either order. If successful in acquiring two forks, she eats for a while, then puts down the forks, and continues to think. The key question is: Can you write a program for each philosopher that does what it is supposed to do and never gets stuck?</p><p>Here is a solution</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> N 5 <span class="hljs-comment">/* number of philosophers */</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> LEFT (i + N - 1) % N <span class="hljs-comment">/* number of i&#x27;s left neighbor */</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> RIGHT (I + 1) % N <span class="hljs-comment">/* number of i&#x27;s right neighbor */</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> THINKING 0 </span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> HUNGRY 1</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> EATING 2</span><br><br><span class="hljs-keyword">typedef</span> <span class="hljs-type">int</span> semaphore;<br><span class="hljs-type">int</span> state[N];<br>semaphore mutex = <span class="hljs-number">1</span>;<br>semaphore s[N];<br><br><span class="hljs-comment">/* This function image philosopher&#x27;s actions, including thinking, taking forks and eating. */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">philosopher</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span><br>&#123;<br>    <span class="hljs-keyword">while</span>(TRUE)<br>    &#123;<br>        think();<br>        take_forks(i);<br>        eat();<br>        put_forks(i);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/* philosopher tries to take forks at her left or right */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">take_forks</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span><br>&#123;<br>    down(&amp;mutex); <span class="hljs-comment">/* enter critical region */</span><br>    state[i] = HUNGRY; <span class="hljs-comment">/* record that philosopher i is hungry */</span><br>    test(i);<br>    up(&amp;mutex); <span class="hljs-comment">/* exit critical region */</span><br>    down(&amp;s[i]); <span class="hljs-comment">/* block if forks are not required */</span><br>&#125;<br><br><span class="hljs-comment">/* philosopher tries to release forks */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">put_forks</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span><br>&#123;<br>    down(&amp;mutex); <span class="hljs-comment">/* enter critical region */</span><br>    state[i] = THINKING; <span class="hljs-comment">/* philosopher stop eating */</span><br>    test(LEFT); <span class="hljs-comment">/* see if left neighbor can now eat */</span><br>    test(RIGHT); <span class="hljs-comment">/* see if right neighbor can now eat */</span><br>    up(&amp;mutex); <span class="hljs-comment">/* exit critical region */</span><br>&#125;<br><br><span class="hljs-comment">/* test if philosopher i can eat</span><br><span class="hljs-comment">** if philosopher i is hungry, and the left and right neighbors are not eating, she can be eating.</span><br><span class="hljs-comment">** So let the state set eating, and wake up (by up(&amp;s[i]) operation) corresponding process.</span><br><span class="hljs-comment">*/</span> <br><span class="hljs-type">void</span> <span class="hljs-title function_">test</span><span class="hljs-params">(<span class="hljs-type">int</span> i)</span><br>&#123;<br><br>    <span class="hljs-keyword">if</span>(state[i] == HUNGRY &amp;&amp; state[LEFT] != EATING &amp;&amp; state[RIGHT] != EATING)<br>    &#123;<br>        state[i] = EATING;<br>        up(&amp;s[i]);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="The-Readers-and-Writers-Problem"><a href="#The-Readers-and-Writers-Problem" class="headerlink" title="The Readers and Writers Problem"></a>The Readers and Writers Problem</h3><p>Imagine, for example, an airline reservation system, with many competing processes wishing to read and write it. It is acceptable to have multiple processes reading the database at the same time, but if one process is updating (writing) the database, no other processes may have access to the database, not even readers. The question is how do you program the readers and the writers?</p><p>Here is a solution</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">typedef</span> <span class="hljs-type">int</span> semaphore<br>semaphore mutex = <span class="hljs-number">1</span>;<br>semaphore db = <span class="hljs-number">1</span>;<br><span class="hljs-type">int</span> rc = <span class="hljs-number">0</span>;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">reader</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    <span class="hljs-keyword">while</span>(TRUE)<br>    &#123;<br>        down(&amp;mutex);<br>        rc += <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span>(rc == <span class="hljs-number">1</span>)<br>            down(&amp;db);<br>        up(&amp;mutex);<br>        read_data_base();<br>        down(&amp;mutex);<br>        rc -= <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span>(rc == <span class="hljs-number">0</span>)<br>            up(&amp;db);<br>        up(&amp;mutex);<br>        use_data_read();<br>    &#125;<br>&#125;<br><br><span class="hljs-type">void</span> <span class="hljs-title function_">writer</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br>    <span class="hljs-keyword">while</span>(TRUE)<br>    &#123;<br>        think_up_data();<br>        down(&amp;db);<br>        write_data_base();<br>        up(&amp;db);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="Deadlock"><a href="#Deadlock" class="headerlink" title="Deadlock"></a>Deadlock</h2><p><strong>Resource deadlock</strong> is a common type of deadlock. A resource deadlock is a situation where two or more processes are blocked because each process is holding a resource and waiting for another resource acquired by some other process. Without external intervention, none of these processes can proceed further.</p><p>In simple terms, it occurs when multiple processes are waiting for each other to release resources, but since all processes are waiting and none releases their resources, they all remain stuck indefinitely.</p><h3 id="Conditions-for-Resource-Deadlocks"><a href="#Conditions-for-Resource-Deadlocks" class="headerlink" title="Conditions for Resource Deadlocks"></a>Conditions for Resource Deadlocks</h3><p>four conditions must hold for there to be a (resource) deadlock:</p><ol><li><p><strong>Mutual exclusion condition</strong>. Each resource is either currently assigned to exactly one process or is available.</p></li><li><p><strong>Hold-and-wait condition</strong>. Processes currently holding resources that were granted earlier can request new resources.</p></li><li><p><strong>No-preemption condition</strong>. Resources previously granted cannot be forcibly taken away from a process. They must be explicitly released by the process holding them.</p></li><li><p><strong>Circular wait condition</strong>. There must be a circular list of two or more processes, each of which is waiting for a resource held by the next member of the chain.</p></li></ol><div class="note note-info">            <p>死锁的4个必要条件（中文译文）</p><ol><li>互斥。每份资源要么已分配到进程中，要么处于可用状态。</li><li>持有并等待。允许进程在持有先前已分配的资源的情况下请求新资源。</li><li>非抢占。已授予的资源不能被强制从进程中收回，必须由持有它们的进程显式释放。</li><li>环路等待。必须存在2个以上的进程构成的环路链，每个进程都在等待链条上的另一个进程持有的资源。</li></ol>          </div><h3 id="Deadlock-Prevention"><a href="#Deadlock-Prevention" class="headerlink" title="Deadlock Prevention"></a>Deadlock Prevention</h3><p>The key to break deadlock is to break one of the 4 conditions.</p><ol><li><p>Attacking the Mutual Exclusion Condition.</p><p> Just spool everything. If no resource were ever assigned exclusively to a single process, we would never hav e deadlocks. Luckily, some devices (such as printer) can be spooled.</p></li><li><p>Attacking the Hold and Wait Condition.</p><p> Require processes to request resources before starting, so a process never has to wait for what it needs. An immediate problem with this approach is that many processes do not know how many resources they will need until they have started running.</p><p> A slightly different way to break the hold-and-wait condition is to require a process requesting a resource to first temporarily release all the resources it currently holds. Then it tries to get everything it needs all at once.</p></li><li><p>Attacking the No Preemption  </p><p> If a process has been assigned, say, the printer is in the middle of printing its output, forcibly taking away the printer because a needed plotter is not available. However, some resources can be virtualized to avoid this situation. Spooling printer output to the disk and allowing only the printer daemon access to the real printer eliminates deadlocks involving the printer, although it creates a potential for deadlock over disk space. With large disks though, running out of disk space is unlikely.</p><p> However, not all resources can be virtualized like this. For example, records in databases or tables inside the operating system must be locked to be used and therein lies the potential for deadlock.</p></li><li><p>Attacking the Circular Wait Condition</p><p> One way is simply to have a rule saying that a process is entitled only to a single resource at any moment. If it needs a second one, it must release the first one.</p><p> Another way to avoid the circular wait is to provide a global numbering of all the resources. Now the rule is this: processes can request resources whenever they want to, but all requests must be made in numerical order.</p></li></ol><p>There are another solution as well, such as setting two-phase locking, which is usually used in database.</p><h3 id="Ostrich-Algorithm"><a href="#Ostrich-Algorithm" class="headerlink" title="Ostrich Algorithm"></a>Ostrich Algorithm</h3><p>OS do nothing about deadlock, the OS might cannot take detecting deadlock anymore.</p><h3 id="Deadlock-Detection-and-Recovery"><a href="#Deadlock-Detection-and-Recovery" class="headerlink" title="Deadlock Detection and Recovery"></a>Deadlock Detection and Recovery</h3><h4 id="Deadlock-Detection-with-Multiple-Resources-of-Each-Type"><a href="#Deadlock-Detection-with-Multiple-Resources-of-Each-Type" class="headerlink" title="Deadlock Detection with Multiple Resources of Each Type"></a>Deadlock Detection with Multiple Resources of Each Type</h4><p>We will now present a matrix-based algorithm for detecting deadlock among $n$ processes, $P_1$ through $P_n$.</p><p>Let the number of resource classes be $m$, with $E_i$ resources of class i (1 ≤ i ≤ m). And $E$ is the <strong>existing resource vector</strong>. It gives the total number of instances of each resource in existence.</p><div class="note note-info">            <p>For example, if class 1 is tape drives, then $E_1 &#x3D; 2$ means the system has two tape drives.</p>          </div><p>Resources in existence</p><p>$$<br>E\ (E_1,\ E_2,\ E_3,\ \dotso,\ E_m)<br>$$</p><p>Let $A$ be the <strong>available resource vector</strong>, with $A_i$ giving the number of instances of resource i that are currently available.</p><div class="note note-info">            <p>If both of our two tape drives are assigned, $A_1$ will be 0.</p>          </div><p>Resources available</p><p>$$<br>A\ (A_1,\ A_2,\ A_3,\ \dotso,\ A_m)<br>$$</p><p>In particular, every resource is either allocated or is available. This observation is that</p><p>$$<br>\displaystyle\sum_{i&#x3D;1}^{n}C_{ij}+A_j&#x3D;E_j<br>$$</p><p>Now we have two matrix, $C$, the <strong>current allocation matrix</strong>, and $R$, the <strong>request matrix</strong>. Each row of matrix indicates what one process needs.</p><p>$$<br>\begin{bmatrix}<br>C_{11} &amp; C_{12} &amp; C_{13} &amp; \dotsm &amp; C_{1m}\\<br>C_{21} &amp; C_{22} &amp; C_{23} &amp; \dotsm &amp; C_{2m}\\<br>\vdots &amp; \vdots &amp; \vdots &amp;&amp; \vdots\\<br>C_{n1} &amp; C_{n2} &amp; C_{n3} &amp; \dotsm &amp; C_{nm}<br>\end{bmatrix}<br>\quad \quad<br>\begin{bmatrix}<br>R_{11} &amp; R_{12} &amp; R_{13} &amp; \dotsm &amp; R_{1m}\\<br>R_{21} &amp; R_{22} &amp; R_{23} &amp; \dotsm &amp; R_{2m}\\<br>\vdots &amp; \vdots &amp; \vdots &amp;&amp; \vdots\\<br>R_{n1} &amp; R_{n2} &amp; R_{n3} &amp; \dotsm &amp; R_{nm}<br>\end{bmatrix}<br>$$</p><p>$$<br>\text{Current allocation matrix}\quad \quad \quad \text{Resource matrix}<br>$$</p><p>Row $n$ on the left is current allocation to process $n$, on the right is what process $n$ needs.</p><p>Let us define the relation $A\leq B$ on two vectors A and B to mean that each element of $A$ is less than or equal to the corresponding element of $B$</p><p>Each process is initially said to be unmarked. As the algorithm progresses, processes will be marked, indicating that they are able to complete and are thus not deadlocked. When the algorithm terminates, any unmarked processes are known to be deadlocked. This algorithm assumes a worst-case <em>scenario</em>(场景): all processes keep all acquired resources until they exit.</p><p>The deadlock detection algorithm can now be given as follows.</p><ol><li><p>Look for an unmarked process, $P_i$, for which the $i$th row, $R\leq A$.</p></li><li><p>If such a process is found, add the $i$th row of $C$ to $A$, mark the process, and go back to step 1.</p></li><li><p>If no such process exists, the algorithm terminates.</p></li></ol><p>When the algorithm finishes, all the unmarked processes, if any, are deadlocked.</p><div class="note note-success">            <p>使用中文解释一遍书中的例题。<br>假设存在的资源为</p><p>$$<br>E\ &#x3D;\  (4 \quad 2 \quad 3 \quad 1)<br>$$</p><p>目前资源的分配矩阵为</p><p>$$<br>\text{Current allocation matrix}<br>$$</p><p>$$<br>C&#x3D;\begin{bmatrix}<br>0&amp;0&amp;1&amp;0\\<br>2&amp;0&amp;0&amp;1\\<br>0&amp;1&amp;2&amp;0<br>\end{bmatrix}<br>$$</p><p>目前空出的资源为</p><p>$$<br>A\ &#x3D;\ (2\quad 1\quad 0\quad 0)<br>$$</p><p>请求矩阵为</p><p>$$<br>\text{Resource matrix}<br>$$</p><p>$$<br>C&#x3D;\begin{bmatrix}<br>2&amp;0&amp;0&amp;1\\<br>1&amp;0&amp;1&amp;0\\<br>2&amp;1&amp;0&amp;0<br>\end{bmatrix}<br>$$</p><p>现在，只有线程3（第3行）能够匹配向量$A$，因此让线程3先使用资源，再释放。然后向量$A$的值变为（注意加上矩阵$C$中对应的值）</p><p>$$<br>A\ &#x3D;\ (4\quad 2\quad 2\quad 0)<br>$$</p><p>然后线程2符合条件，$A$的值变为</p><p>$$<br>A\ &#x3D;\ (4\quad 2\quad 2\quad 1)<br>$$</p><p>线程1符合条件。</p><p>至此，所有的线程均可以访问到资源，不会造成死锁。如果存在某线程无法分配到资源，则会发生死锁。</p>          </div><h3 id="Deadlock-Avoidance"><a href="#Deadlock-Avoidance" class="headerlink" title="Deadlock Avoidance"></a>Deadlock Avoidance</h3><p>We can also use similar algorithm to avoid deadlock.</p><p>$$<br>\begin{array}{|c|c|c|c|c|}<br>\text{A} &amp; 3 &amp; 0 &amp; 1 &amp; 1 \\<br>\text{B} &amp; 0 &amp; 1 &amp; 0 &amp; 0 \\<br>\text{C} &amp; 1 &amp; 1 &amp; 1 &amp; 0 \\<br>\text{D} &amp; 1 &amp; 1 &amp; 0 &amp; 1 \\<br>\text{E} &amp; 0 &amp; 0 &amp; 0 &amp; 0 \\<br>\end{array}<br>\quad \quad<br>\begin{array}{|c|c|c|c|c|}<br>\text{A} &amp; 1 &amp; 1 &amp; 0 &amp; 0 \\<br>\text{B} &amp; 0 &amp; 1 &amp; 2 &amp; 2 \\<br>\text{C} &amp; 3 &amp; 1 &amp; 0 &amp; 0 \\<br>\text{D} &amp; 0 &amp; 0 &amp; 1 &amp; 0 \\<br>\text{E} &amp; 2 &amp; 1 &amp; 0 &amp; 0 \\<br>\end{array}<br>$$</p><p>$$<br>\text{Resource assigned} \quad \quad \text{Resource still assigned}<br>$$</p><p>$$<br>\quad \text{E&#x3D;(6342)}\quad\text{P&#x3D;(5322)}\quad\text{A&#x3D;(1020)}<br>$$</p><p>The three vectors, stands for existing resources, $E$ , the possessed resources, $P$ , and the available resources $A$ .</p><p>Now $D$ is available, after executed, $A$ becomes $\text{A&#x3D;(2121)}$. And then $E$ is available, but it does not release resource, so we turn to $A$. After $A$ releasing resource, others can execute. So there is no deadlock.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note note-success&quot;&gt;
            &lt;p&gt;As the final exam use English as its language, I shall try my best to edit it in English.&lt;/p&gt;</summary>
      
    
    
    
    <category term="日常" scheme="http://example.com/categories/%E6%97%A5%E5%B8%B8/"/>
    
    
    <category term="日常" scheme="http://example.com/tags/%E6%97%A5%E5%B8%B8/"/>
    
    <category term="复习" scheme="http://example.com/tags/%E5%A4%8D%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>vue实践之商场app - 结算、支付与会员中心</title>
    <link href="http://example.com/2025/05/08/mall-front-8/"/>
    <id>http://example.com/2025/05/08/mall-front-8/</id>
    <published>2025-05-07T16:09:47.000Z</published>
    <updated>2025-05-08T11:43:03.331Z</updated>
    
    <content type="html"><![CDATA[<p>接下来是其余部分的实现。</p><h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><h3 id="支付相关"><a href="#支付相关" class="headerlink" title="支付相关"></a>支付相关</h3><p>在apis文件夹下新建<code>pay.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getOrderAPI</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">`/member/order/<span class="hljs-subst">$&#123;id&#125;</span>`</span><br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="会员中心"><a href="#会员中心" class="headerlink" title="会员中心"></a>会员中心</h3><p>在apis文件夹下新建<code>checkout.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getCheckInfoAPI</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;member/order/pre&#x27;</span><br>    &#125;)<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">createOrderAPI</span> = (<span class="hljs-params">data</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;member/order&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>        data<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>新建<code>order.js</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserOrderAPI</span> = (<span class="hljs-params">params</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;member/order&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;GET&#x27;</span>,<br>        params<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>在<code>user.js</code>下新增一个接口</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getLikeListAPI</span> = (<span class="hljs-params">&#123; limit = <span class="hljs-number">4</span> &#125;</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/goods/relevant&#x27;</span>,<br>        <span class="hljs-attr">params</span>: &#123;<br>            limit<br>        &#125;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="确认订单网页"><a href="#确认订单网页" class="headerlink" title="确认订单网页"></a>确认订单网页</h2><p>在views&#x2F;checkout文件夹下新建<code>index.vue</code>，<a href="#%E7%A1%AE%E8%AE%A4%E8%AE%A2%E5%8D%95">源码如下</a></p><p><img src="/2025/05/08/mall-front-8/checkout.png" alt="效果图（但这里有不少bug，比如选中的是所有货物而非勾选的货物，还有会漏掉第一项）"></p><p>其中的这部分</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>运<span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>费：<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br></code></pre></td></tr></table></figure><p>可以使用<code>&lt;i&gt;&lt;/i&gt;</code>来实现有效的字段偏移，实现等宽显示。</p><p>独立出来的<code>&lt;el-dialog /&gt;</code>部分用于显示切换地址部分。</p><p><img src="/2025/05/08/mall-front-8/address.png" alt="效果图"></p><p>其中需要一个接口获取相关信息</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getCheckInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getCheckInfoAPI</span>()<br>    checkInfo.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span><br><br>    <span class="hljs-keyword">const</span> item = checkInfo.<span class="hljs-property">value</span>.<span class="hljs-property">userAddresses</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">isDefault</span> === <span class="hljs-number">0</span>)<br>    curAddress.<span class="hljs-property">value</span> = item<br>&#125;<br><br><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getCheckInfo</span>())<br></code></pre></td></tr></table></figure><p>该方法通过相关接口获取订单信息。至于从购物车到订单的转换，是在后端实现的。同时，将显示地址切换为默认地址（找到默认地址。<br>若需要切换地址，也需要相应的方法。但需要注意，点击地址不等于立即切换，需要先在一个临时变量中存储切换到的值，点击确认后再将临时变量赋值给显示地址。而临时变量本身也承担着控制高亮组件的功能。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">switchAddress</span> = (<span class="hljs-params">item</span>) =&gt; &#123;<br>    activeAddAddress.<span class="hljs-property">value</span> = item<br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">confirm</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    curAddress.<span class="hljs-property">value</span> = activeAddAddress.<span class="hljs-property">value</span><br>    showDialog.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span><br>    activeAddAddress.<span class="hljs-property">value</span> = &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>创造订单功能，注入相关数据，并跳转到订单页，开始等待支付</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createOrder</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createOrderAPI</span>(&#123;<br>        <span class="hljs-attr">deliveryTimeType</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">payType</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">pauChannel</span>: <span class="hljs-number">1</span>,<br>        <span class="hljs-attr">buyMessage</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>        <span class="hljs-attr">goods</span>: checkInfo.<span class="hljs-property">value</span>.<span class="hljs-property">goods</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;<br>            <span class="hljs-keyword">return</span> &#123;<br>                <span class="hljs-attr">skuId</span>: item.<span class="hljs-property">skuId</span>,<br>                <span class="hljs-attr">count</span>: item.<span class="hljs-property">count</span><br>            &#125;<br>        &#125;),<br>        <span class="hljs-attr">addressId</span>: curAddress.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>,<br>    &#125;)<br>    <span class="hljs-keyword">const</span> orderId = res.<span class="hljs-property">result</span>.<span class="hljs-property">id</span><br>    router.<span class="hljs-title function_">push</span>(&#123;<br>        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/pay&#x27;</span>,<br>        <span class="hljs-attr">query</span>: &#123;<br>            <span class="hljs-attr">id</span>: orderId<br>        &#125;<br>    &#125;)<br>    cartStore.<span class="hljs-title function_">updateNewList</span>()<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="等待支付网页"><a href="#等待支付网页" class="headerlink" title="等待支付网页"></a>等待支付网页</h2><p>在views&#x2F;pay文件夹下新建<code>index.vue</code>，<a href="#%E7%AD%89%E5%BE%85%E6%94%AF%E4%BB%98">源码如下</a></p><p><img src="/2025/05/08/mall-front-8/pay.png" alt="等待支付页面"></p><p>js部分除了常规的调用接口，还有调用计数器部分，该部分需要在src&#x2F;composable下新建文件<code>useCountDown.vue</code>文件，源码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; computed, onUnmounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><span class="hljs-keyword">import</span> dayjs <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;dayjs&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">useCountDown</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br>    <span class="hljs-keyword">const</span> time = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br>    <span class="hljs-keyword">const</span> formatTime = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> dayjs.<span class="hljs-title function_">unix</span>(time.<span class="hljs-property">value</span>).<span class="hljs-title function_">format</span>(<span class="hljs-string">&#x27;mm分ss秒&#x27;</span>))<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">start</span> = (<span class="hljs-params">currentTime</span>) =&gt; &#123;<br>        formatTime.<span class="hljs-property">value</span> = currentTime<br>        <span class="hljs-built_in">setInterval</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>            formatTime.<span class="hljs-property">value</span>--<br>        &#125;, <span class="hljs-number">1000</span>)<br>    &#125;<br><br>    <span class="hljs-title function_">onUnmounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        timer &amp;&amp; <span class="hljs-built_in">clearInterval</span>(timer)<br>    &#125;)<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        formatTime,<br>        start<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>dayjs</code>库用于格式化日期输出，此处在计算方法中表现。start部分设立了一个每隔1000毫秒减1的计数器，开始时间由参数决定。</p><p>接下来配置沙箱网页和返回网页</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> baseURL = <span class="hljs-string">&#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net/&#x27;</span><br><span class="hljs-keyword">const</span> backURL = <span class="hljs-string">&#x27;http://127.0.0.1:5173/paycallback&#x27;</span><br><span class="hljs-keyword">const</span> redirectUrl = <span class="hljs-built_in">encodeURIComponent</span>(backURL)<br><span class="hljs-keyword">const</span> payUrl = <span class="hljs-string">`<span class="hljs-subst">$&#123;baseURL&#125;</span>pay/aliPay?orderId=<span class="hljs-subst">$&#123;route.query.id&#125;</span>&amp;redirect=<span class="hljs-subst">$&#123;redirectUrl&#125;</span>`</span><br></code></pre></td></tr></table></figure><h2 id="返回页"><a href="#返回页" class="headerlink" title="返回页"></a>返回页</h2><p>从沙箱中跳转后，需要一个页面显示支付情况。在pay文件夹下新建<code>payBack.vue</code>文件，<a href="#%E8%BF%94%E5%9B%9E">源码如下</a></p><p><img src="/2025/05/08/mall-front-8/payback.png" alt="效果图，但这两天返回后本地端口直接拒绝链接了，所以这里是直接调出来的失败页面"></p><h2 id="会员中心页面"><a href="#会员中心页面" class="headerlink" title="会员中心页面"></a>会员中心页面</h2><div class="note note-info">            <p>其实更贴切的说法是用户中心，但原视频如此，这里不好改变。</p>          </div><p>这里主要涉及三级路由的实现。在Member文件夹下新建components文件夹和<code>index.vue</code>文件，<a href="#%E4%BC%9A%E5%91%98%E5%BC%80%E5%A7%8B%E9%A1%B5%E9%9D%A2">源码如下</a></p><h3 id="用户信息"><a href="#用户信息" class="headerlink" title="用户信息"></a>用户信息</h3><p>在components文件夹下新建<code>UserInfo.vue</code>，<a href="#userinfo">代码如下</a></p><p><img src="/2025/05/08/mall-front-8/info.png" alt="效果图"></p><h3 id="订单信息"><a href="#订单信息" class="headerlink" title="订单信息"></a>订单信息</h3><p>在components文件夹下新建<code>UserOrder.vue</code>，<a href="#userinfo">代码如下</a></p><p><img src="/2025/05/08/mall-front-8/order.png" alt="效果图"></p><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><h3 id="确认订单"><a href="#确认订单" class="headerlink" title="确认订单"></a>确认订单</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; getCheckInfoAPI, createOrderAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../apis/checkout&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCartStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../stores/cartStore&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> checkInfo = <span class="hljs-title function_">ref</span>(&#123;&#125;)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> curAddress = <span class="hljs-title function_">ref</span>(&#123;&#125;)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> cartStore = <span class="hljs-title function_">useCartStore</span>()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getCheckInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getCheckInfoAPI</span>()</span><br><span class="language-javascript">    checkInfo.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> item = checkInfo.<span class="hljs-property">value</span>.<span class="hljs-property">userAddresses</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">isDefault</span> === <span class="hljs-number">0</span>)</span><br><span class="language-javascript">    curAddress.<span class="hljs-property">value</span> = item</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getCheckInfo</span>())</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> showDialog = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> activeAddAddress = <span class="hljs-title function_">ref</span>(&#123;&#125;)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">switchAddress</span> = (<span class="hljs-params">item</span>) =&gt; &#123;</span><br><span class="language-javascript">    activeAddAddress.<span class="hljs-property">value</span> = item</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">confirm</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    curAddress.<span class="hljs-property">value</span> = activeAddAddress.<span class="hljs-property">value</span></span><br><span class="language-javascript">    showDialog.<span class="hljs-property">value</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">    activeAddAddress.<span class="hljs-property">value</span> = &#123;&#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">createOrder</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">createOrderAPI</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">deliveryTimeType</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">payType</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">pauChannel</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">buyMessage</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">goods</span>: checkInfo.<span class="hljs-property">value</span>.<span class="hljs-property">goods</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> &#123;</span><br><span class="language-javascript">            <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-attr">skuId</span>: item.<span class="hljs-property">skuId</span>,</span><br><span class="language-javascript">                <span class="hljs-attr">count</span>: item.<span class="hljs-property">count</span></span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;),</span><br><span class="language-javascript">        <span class="hljs-attr">addressId</span>: curAddress.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>,</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> orderId = res.<span class="hljs-property">result</span>.<span class="hljs-property">id</span></span><br><span class="language-javascript">    router.<span class="hljs-title function_">push</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/pay&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">query</span>: &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">id</span>: orderId</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">    cartStore.<span class="hljs-title function_">updateNewList</span>()</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;xtx-pay-checkout-page&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrapper&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box-title&quot;</span>&gt;</span>收货地址<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box-body&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;address&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;none&quot;</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;!curAddress&quot;</span>&gt;</span>您需要先添加收货地址才可提交订单<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">v-else</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>收<span class="hljs-tag">&lt;<span class="hljs-name">i</span> /&gt;</span>货<span class="hljs-tag">&lt;<span class="hljs-name">i</span> /&gt;</span>人: <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>&#123;&#123; curAddress.receiver &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>联系方式: <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>&#123;&#123; curAddress.contact &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>收货地址<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>&#123;&#123; curAddress.fullLocation &#125;&#125; &#123;&#123; curAddress.address &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">dic</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;action&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;large&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;showDialog = true&quot;</span>&gt;</span>切换地址<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;large&quot;</span>&gt;</span>添加地址<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">dic</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>                <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box-title&quot;</span>&gt;</span>商品信息<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box-body&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">table</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;520&quot;</span>&gt;</span>商品信息<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;170&quot;</span>&gt;</span>单价<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;170&quot;</span>&gt;</span>数量<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;170&quot;</span>&gt;</span>小计<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;170&quot;</span>&gt;</span>实付<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;i in checkInfo.goods&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;i.id&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;info&quot;</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;i.picture&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span><br>                                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; i.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; i.attrsText &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span>&#123;&#123; i.price &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span>&#123;&#123; i.price &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span>&#123;&#123; i.totalPrice &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span>&#123;&#123; i.totalPayPrice &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box-title&quot;</span>&gt;</span>配送时间<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box-body&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;my-btn active&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>不限送货时间：周一至周日<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;my-btn&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>工作日送货：周一至周五<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;my-btn&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>双休日、假日送货：周六至周日<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box-title&quot;</span>&gt;</span>支付方式<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box-body&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;my-btn active&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>在线支付<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;my-btn&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>货到付款<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:#999&quot;</span>&gt;</span>货到付款需付5元手续费<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box-title&quot;</span>&gt;</span>金额明细<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box-body&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>商品件数：<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>&#123;&#123; checkInfo.summary?.goodsCount &#125;&#125;件<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>商品总价：<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>¥&#123;&#123; checkInfo.summary?.totalPrice.toFixed(2) &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>运<span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>费：<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>¥&#123;&#123; checkInfo.summary?.postFee.toFixed(2) &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>应付总额：<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">dd</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;price&quot;</span>&gt;</span>&#123;&#123; checkInfo.summary?.totalPayPrice.toFixed(2) &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;createOrder&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;large&quot;</span>&gt;</span>提交订单<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-dialog</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;showDialog&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;切换收货地址&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;30%&quot;</span> <span class="hljs-attr">center</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;addressWrapper&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text item&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123; active: activeAddAddress.id === item.id &#125;&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;switchAddress(item)&quot;</span></span><br><span class="hljs-tag">                <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in checkInfo.userAddresses&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>收<span class="hljs-tag">&lt;<span class="hljs-name">i</span> /&gt;</span>货<span class="hljs-tag">&lt;<span class="hljs-name">i</span> /&gt;</span>人：<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>&#123;&#123; item.receiver &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>联系方式：<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>&#123;&#123; item.contact &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>收货地址：<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>&#123;&#123; item.fullLocation + item.address &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">footer</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;dialog-footer&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span>&gt;</span>取消<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;confirm&quot;</span>&gt;</span>确定<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-dialog</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.xtx-pay-checkout-page</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.wrapper</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.box-title</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-weight</span>: normal;</span><br><span class="language-css">            <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.box-body</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.address</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">    <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.text</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">        <span class="hljs-attribute">min-height</span>: <span class="hljs-number">90px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.none</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">90px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        &gt;<span class="hljs-selector-tag">ul</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">line-height</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                    &gt;<span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">width</span>: <span class="hljs-number">0.5em</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">display</span>: inline-block;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        &gt;<span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">160px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">90px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">90px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-right</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.action</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">420px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.btn</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">140px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">46px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">44px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:first</span>-child &#123;</span><br><span class="language-css">                <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.goods</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border-collapse</span>: collapse;</span><br><span class="language-css">    <span class="hljs-attribute">border-spacing</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.info</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: left;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.right</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">24px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">tr</span> &#123;</span><br><span class="language-css">        <span class="hljs-selector-tag">th</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-weight</span>: normal;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">td</span>,</span><br><span class="language-css">        <span class="hljs-selector-tag">th</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:first</span>-child &#123;</span><br><span class="language-css">                <span class="hljs-attribute">border-left</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">border-right</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.my-btn</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">228px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e4e4e4</span>;</span><br><span class="language-css">    <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">48px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">25px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666666</span>;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: inline-block;</span><br><span class="language-css"></span><br><span class="language-css">    &amp;<span class="hljs-selector-class">.active</span>,</span><br><span class="language-css">    &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">border-color</span>: $xtxColor;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.total</span> &#123;</span><br><span class="language-css">    <span class="hljs-selector-tag">dl</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: flex-end;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">dt</span> &#123;</span><br><span class="language-css">            <span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">display</span>: inline-block;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">2em</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">dd</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">240px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: right;</span><br><span class="language-css">            <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-class">.price</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.submit</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">text-align</span>: right;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">60px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.addressWrapper</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">max-height</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">overflow-y</span>: auto;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.text</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">    <span class="hljs-attribute">min-height</span>: <span class="hljs-number">90px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">    <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">    &amp;<span class="hljs-selector-class">.item</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;<span class="hljs-selector-class">.active</span>,</span><br><span class="language-css">        &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">border-color</span>: $xtxColor;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: $xtxColor;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        &gt;<span class="hljs-selector-tag">ul</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="等待支付"><a href="#等待支付" class="headerlink" title="等待支付"></a>等待支付</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; getOrderAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/pay&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCountDown &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../composables/useCountDown&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; formatTime, start &#125; = <span class="hljs-title function_">useCountDown</span>()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> orderInfo = <span class="hljs-title function_">ref</span>(&#123;&#125;)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getOrderInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getOrderAPI</span>(route.<span class="hljs-property">query</span>.<span class="hljs-property">id</span>)</span><br><span class="language-javascript">    orderInfo.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span></span><br><span class="language-javascript">    <span class="hljs-title function_">start</span>(res.<span class="hljs-property">result</span>.<span class="hljs-property">countdown</span>)</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getOrderInfo</span>())</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> baseURL = <span class="hljs-string">&#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net/&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> backURL = <span class="hljs-string">&#x27;http://127.0.0.1:5173/paycallback&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> redirectUrl = <span class="hljs-built_in">encodeURIComponent</span>(backURL)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> payUrl = <span class="hljs-string">`<span class="hljs-subst">$&#123;baseURL&#125;</span>pay/aliPay?orderId=<span class="hljs-subst">$&#123;route.query.id&#125;</span>&amp;redirect=<span class="hljs-subst">$&#123;redirectUrl&#125;</span>`</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;xtx-pay-page&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pay-info&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-queren&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tip&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>订单提交成功，请尽快完成支付<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>支付还剩<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123; formatTime &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>，超时后将取消订单<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;amount&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>应付总额：<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span> &#123;&#123; orderInfo.payMoney?.toFixed(2) &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pay-type&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;head&quot;</span>&gt;</span>请选择以下支付方式付款<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>支付平台<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn wx&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn alipay&quot;</span> <span class="hljs-attr">:href</span>=<span class="hljs-string">&quot;payUrl&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>招商银行<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>工商银行<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>建设银行<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>农业银行<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>交通银行<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.xtx-pay-page</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.pay-info</span> &#123;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">    <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">240px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">80px</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.icon</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">80px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#1dc779</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.tip</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:first</span>-child &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.amount</span> &#123;</span><br><span class="language-css">        <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:first</span>-child &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.pay-type</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">    <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;<span class="hljs-selector-class">.head</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.btn</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">150px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e4e4e4</span>;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">48px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#666666</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: inline-block;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;<span class="hljs-selector-class">.active</span>,</span><br><span class="language-css">        &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">border-color</span>: $xtxColor;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;<span class="hljs-selector-class">.alipay</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/7b6b02396368c9314528c0bbd85a2e06.png</span>) no-repeat center / contain;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;<span class="hljs-selector-class">.wx</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/c66f98cff8649bd5ba722c2e8067c6ca.jpg</span>) no-repeat center / contain;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="返回"><a href="#返回" class="headerlink" title="返回"></a>返回</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; getOrderAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/pay&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> orderInfo = <span class="hljs-title function_">ref</span>(&#123;&#125;)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getOrderInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getOrderAPI</span>(route.<span class="hljs-property">query</span>.<span class="hljs-property">orderId</span>)</span><br><span class="language-javascript">    orderInfo.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getOrderInfo</span>())</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;xtx-pay-page&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pay-result&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-queren green&quot;</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;$route.query.payResult === &#x27;true&#x27;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-shanchu red&quot;</span> <span class="hljs-attr">v-else</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tit&quot;</span>&gt;</span>支付&#123;&#123; $route.query.payResult === &#x27;true&#x27; ? &#x27;成功&#x27; : &#x27;失败&#x27; &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tip&quot;</span>&gt;</span>我们将尽快为您发货，收货期间请保持手机畅通<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>支付方式：<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>支付宝<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>支付金额：<span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span>&#123;&#123; orderInfo.payMoney?.toFixed(2) &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;margin-right: 20px;&quot;</span>&gt;</span>查看订单<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span>&gt;</span>进入首页<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;alert&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-tip&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    温馨提示：小兔鲜儿不会以订单异常、系统升级为由要求您点击任何网址链接进行退款操作，谨防诈骗！<br>                <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.pay-result</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">100px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">    <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">    &gt;<span class="hljs-selector-class">.iconfont</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">100px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.green</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#1dc779</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.red</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.tit</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.tip</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.btn</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.alert</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="会员开始页面"><a href="#会员开始页面" class="headerlink" title="会员开始页面"></a>会员开始页面</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;xtx-member-aside&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-manage&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>我的账户<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;links&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/member&quot;</span>&gt;</span>个人中心<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>交易管理<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;links&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/member/order&quot;</span>&gt;</span>我的订单<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;article&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span> /&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">    <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.xtx-member-aside</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">220px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.user-manage</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">h4</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;</span><br><span class="language-css">                <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">52px</span> <span class="hljs-number">5px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">border-top</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f6f6f6</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.links</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">52px</span> <span class="hljs-number">10px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">                <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">                <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">                <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css"></span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                &amp;<span class="hljs-selector-class">.active</span>,</span><br><span class="language-css">                &amp;<span class="hljs-selector-class">.router-link-exact-active</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css"></span><br><span class="language-css">                    &amp;<span class="hljs-selector-pseudo">:before</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:before</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;&#x27;</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">display</span>: none;</span><br><span class="language-css">                    <span class="hljs-attribute">width</span>: <span class="hljs-number">6px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">height</span>: <span class="hljs-number">6px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">                    <span class="hljs-attribute">top</span>: <span class="hljs-number">19px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">left</span>: -<span class="hljs-number">16px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">background-color</span>: $xtxColor;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.article</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">1000px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="UserInfo"><a href="#UserInfo" class="headerlink" title="UserInfo"></a>UserInfo</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useUserStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../../stores/user&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; getLikeListAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../../apis/user&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">GoodsItem</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../Home/components/GoodsItem.vue&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> likeList = <span class="hljs-title function_">ref</span>([])</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getLikeList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getLikeListAPI</span>(&#123; <span class="hljs-attr">limit</span>: <span class="hljs-number">4</span> &#125;)</span><br><span class="language-javascript">    likeList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getLikeList</span>())</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home-overview&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;user-meta&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;avatar&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;userStore.userInfo?.avatar&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>&#123;&#123; userStore.userInfo?.account &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-huiyuan&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>会员中心<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-anquan&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>安全设置<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-dw&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>地址管理<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;like-container&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home-panel&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;header&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">h4</span> <span class="hljs-attr">data-v-bcb266e0</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span>猜你喜欢<span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-list&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">GoodsItem</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;good in likeList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;good.id&quot;</span> <span class="hljs-attr">:goods</span>=<span class="hljs-string">&quot;good&quot;</span> /&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.home-overview</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">132px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">@/assets/images/center-bg.png</span>) no-repeat center / cover;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.user-meta</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.avatar</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">85px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">85px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css">            <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">60px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">                <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">h4</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">26px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-weight</span>: normal;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: white;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.item</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: space-around;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;<span class="hljs-selector-pseudo">:first</span>-child &#123;</span><br><span class="language-css">            <span class="hljs-attribute">border-right</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f4f4f4</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: white;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.iconfont</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">line-height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.like-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.home-panel</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.header</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">66px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">18px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: space-between;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: baseline;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">h4</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">22px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.goods-list</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: space-around;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="UserOrder"><a href="#UserOrder" class="headerlink" title="UserOrder"></a>UserOrder</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; getUserOrderAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/order&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> tabTypes = [</span><br><span class="language-javascript">    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;all&quot;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;全部订单&quot;</span> &#125;,</span><br><span class="language-javascript">    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;unpay&quot;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;待付款&quot;</span> &#125;,</span><br><span class="language-javascript">    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;deliver&quot;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;待发货&quot;</span> &#125;,</span><br><span class="language-javascript">    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;receive&quot;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;待收货&quot;</span> &#125;,</span><br><span class="language-javascript">    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;comment&quot;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;待评价&quot;</span> &#125;,</span><br><span class="language-javascript">    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;complete&quot;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;已完成&quot;</span> &#125;,</span><br><span class="language-javascript">    &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;cancel&quot;</span>, <span class="hljs-attr">label</span>: <span class="hljs-string">&quot;已取消&quot;</span> &#125;</span><br><span class="language-javascript">]</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> orderList = <span class="hljs-title function_">ref</span>([])</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> total = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> params = <span class="hljs-title function_">ref</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">orderState</span>: <span class="hljs-number">0</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">pageSize</span>: <span class="hljs-number">2</span></span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getOrderList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getUserOrderAPI</span>(params.<span class="hljs-property">value</span>)</span><br><span class="language-javascript">    orderList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>.<span class="hljs-property">items</span></span><br><span class="language-javascript">    total.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>.<span class="hljs-property">counts</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getOrderList</span>())</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">tabChange</span> = (<span class="hljs-params">type</span>) =&gt; &#123;</span><br><span class="language-javascript">    params.<span class="hljs-property">value</span>.<span class="hljs-property">orderState</span> = type</span><br><span class="language-javascript">    <span class="hljs-title function_">getOrderList</span>()</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">pageChange</span> = (<span class="hljs-params">page</span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(page);</span><br><span class="language-javascript">    params.<span class="hljs-property">value</span>.<span class="hljs-property">page</span> = page</span><br><span class="language-javascript">    <span class="hljs-title function_">getOrderList</span>()</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">formatPayState</span> = (<span class="hljs-params">payState</span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> stateMap = &#123;</span><br><span class="language-javascript">        <span class="hljs-number">1</span>: <span class="hljs-string">&#x27;待付款&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;待发货&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-number">3</span>: <span class="hljs-string">&#x27;待收货&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-number">4</span>: <span class="hljs-string">&#x27;待评价&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-number">5</span>: <span class="hljs-string">&#x27;已完成&#x27;</span>,</span><br><span class="language-javascript">        <span class="hljs-number">6</span>: <span class="hljs-string">&#x27;已取消&#x27;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> stateMap[payState]</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;order-container&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-tabs</span> @<span class="hljs-attr">tab-change</span>=<span class="hljs-string">&quot;tabChange&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-tab-pane</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in tabTypes&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.name&quot;</span> <span class="hljs-attr">:label</span>=<span class="hljs-string">&quot;item.label&quot;</span> /&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;main-container&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;holder-container&quot;</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;orderList.length === 0&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">el-empty</span> <span class="hljs-attr">description</span>=<span class="hljs-string">&quot;暂无数据&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;order-item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;order in orderList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;order.id&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;head&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>下单时间：&#123;&#123; order.createTime &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>订单编号：&#123;&#123; order.id &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;down-time&quot;</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;order.orderState === 1&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-down-time&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">b</span>&gt;</span>付款截止：&#123;&#123; order.countdown &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">b</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;body&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column goods&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in order.skus&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;image&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;item.image&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;info&quot;</span>&gt;</span><br>                                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;name ellipsis-2&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;attr ellipsis&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123; item.attrsText &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;price&quot;</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span>&#123;&#123; item.realPay?.toFixed(2) &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span>×&#123;&#123; item.quantity &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column state&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; formatPayState(order.orderState) &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;order.orderState === 3&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;green&quot;</span>&gt;</span>查看物流<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;order.orderState === 4&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;green&quot;</span>&gt;</span>评价商品<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;order.orderState === 5&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;green&quot;</span>&gt;</span>查看评价<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column amount&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;red&quot;</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span>&#123;&#123; order.payMoney?.toFixed(2) &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>(含运费：&#123;&#123; order.postFree?.toFixed(2) &#125;&#125;)<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>在线支付<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;column action&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;order.orderState === 1&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;small&quot;</span>&gt;</span>立即付款<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;order.orderState === 3&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;small&quot;</span>&gt;</span>确认收货<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>查看详情<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;[2, 3, 4, 5].includes(order.orderState)&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>再次购买<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;[4, 5].includes(order.orderState)&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>申请售后<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;order.orderState === 1&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>取消订单<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;pagination-container&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">el-pagination</span> <span class="hljs-attr">:total</span>=<span class="hljs-string">&quot;total&quot;</span> @<span class="hljs-attr">current-change</span>=<span class="hljs-string">&quot;pageChange&quot;</span> <span class="hljs-attr">:page-size</span>=<span class="hljs-string">&quot;params.pageSize&quot;</span></span><br><span class="hljs-tag">                            <span class="hljs-attr">background</span> <span class="hljs-attr">layout</span>=<span class="hljs-string">&quot;prev, pager, next&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-tabs</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.order-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.pagination-container</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.main-container</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">min-height</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.holder-container</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">min-height</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">            <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.order-item</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.head</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-class">.down-time</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                <span class="hljs-attribute">float</span>: right;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">vertical-align</span>: middle;</span><br><span class="language-css">                    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">3px</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">b</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">vertical-align</span>: middle;</span><br><span class="language-css">                    <span class="hljs-attribute">font-weight</span>: normal;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.del</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">float</span>: right;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.body</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: stretch;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.column</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">border-left</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            &gt;<span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:first</span>-child &#123;</span><br><span class="language-css">                <span class="hljs-attribute">border-left</span>: none;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-class">.goods</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">                <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                <span class="hljs-attribute">align-self</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">ul</span> &#123;</span><br><span class="language-css">                    <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css"></span><br><span class="language-css">                        &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                            <span class="hljs-attribute">border-bottom</span>: none;</span><br><span class="language-css">                        &#125;</span><br><span class="language-css"></span><br><span class="language-css">                        <span class="hljs-selector-class">.image</span> &#123;</span><br><span class="language-css">                            <span class="hljs-attribute">width</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css">                            <span class="hljs-attribute">height</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css">                            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">                        &#125;</span><br><span class="language-css"></span><br><span class="language-css">                        <span class="hljs-selector-class">.info</span> &#123;</span><br><span class="language-css">                            <span class="hljs-attribute">width</span>: <span class="hljs-number">220px</span>;</span><br><span class="language-css">                            <span class="hljs-attribute">text-align</span>: left;</span><br><span class="language-css">                            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                            <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">                                <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                                &amp;<span class="hljs-selector-class">.name</span> &#123;</span><br><span class="language-css">                                    <span class="hljs-attribute">height</span>: <span class="hljs-number">38px</span>;</span><br><span class="language-css">                                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                                &amp;<span class="hljs-selector-class">.attr</span> &#123;</span><br><span class="language-css">                                    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                                    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                                    <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="language-css">                                        <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">                                    &#125;</span><br><span class="language-css">                                &#125;</span><br><span class="language-css">                            &#125;</span><br><span class="language-css">                        &#125;</span><br><span class="language-css"></span><br><span class="language-css">                        <span class="hljs-selector-class">.price</span> &#123;</span><br><span class="language-css">                            <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="language-css">                        &#125;</span><br><span class="language-css"></span><br><span class="language-css">                        <span class="hljs-selector-class">.count</span> &#123;</span><br><span class="language-css">                            <span class="hljs-attribute">width</span>: <span class="hljs-number">80px</span>;</span><br><span class="language-css">                        &#125;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-class">.state</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-class">.green</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-class">.amount</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-class">.red</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-class">.action</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">140px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css"></span><br><span class="language-css">                    &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;接下来是其余部分的实现。&lt;/p&gt;
&lt;h2 id=&quot;接口&quot;&gt;&lt;a href=&quot;#接口&quot; class=&quot;headerlink&quot; title=&quot;接口&quot;&gt;&lt;/a&gt;接口&lt;/h2&gt;&lt;h3 id=&quot;支付相关&quot;&gt;&lt;a href=&quot;#支付相关&quot; class=&quot;headerlink&quot; titl</summary>
      
    
    
    
    <category term="前端" scheme="http://example.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>vue实践之商场app - 购物车</title>
    <link href="http://example.com/2025/05/06/mall-front-7/"/>
    <id>http://example.com/2025/05/06/mall-front-7/</id>
    <published>2025-05-06T09:32:12.000Z</published>
    <updated>2025-05-07T16:08:32.767Z</updated>
    
    <content type="html"><![CDATA[<p>该部分与购物支付功能直接相关，涉及接口比较多。</p><h2 id="定义接口"><a href="#定义接口" class="headerlink" title="定义接口"></a>定义接口</h2><p>在apis文件夹下新建<code>cart.js</code>文件，定义以下接口。即更新账户购物车的操作都需要与服务器同步。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/utils/http&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">insertCartAPI</span> = (<span class="hljs-params">&#123; skuId, count &#125;</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/member/cart&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>        <span class="hljs-attr">data</span>: &#123;<br>            skuId,<br>            count<br>        &#125;<br>    &#125;)<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">findNewCartListAPI</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&quot;member/cart&quot;</span>,<br>    &#125;)<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">delCartAPI</span> = (<span class="hljs-params">ids</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/member/cart&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;DELETE&#x27;</span>,<br>        <span class="hljs-attr">data</span>: &#123;<br>            ids<br>        &#125;<br>    &#125;)<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">mergeCartAPI</span> = (<span class="hljs-params">data</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;member/cart/merge&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>        data<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="一级导航上的购物车组件"><a href="#一级导航上的购物车组件" class="headerlink" title="一级导航上的购物车组件"></a>一级导航上的购物车组件</h2><p>在Layout&#x2F;components下新进文件<code>HeaderCart.vue</code>，<a href="#headercart">源码见下</a><br>该部分作为整个组件嵌在LayoutHeader中，一开始只是个购物车图标，鼠标悬停在图标上时，剩余的部分透明度由0变成1。接口部分较为简单，直接调用store即可</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs scss">&amp;<span class="hljs-selector-pseudo">:hover</span> &#123;<br>    <span class="hljs-selector-class">.layer</span> &#123;<br>        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;<br>        <span class="hljs-attribute">transform</span>: none;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>后面的layer部分分条列举购物车项，最后在页脚显示商品总数和总价格。</p><p><img src="/2025/05/06/mall-front-7/headerCart.png" alt="效果图"></p><h2 id="购物车整个浏览页面"><a href="#购物车整个浏览页面" class="headerlink" title="购物车整个浏览页面"></a>购物车整个浏览页面</h2><p>在views&#x2F;CartList文件夹下新建文件<code>index.vue</code>，<a href="#indexvue">源码见下</a>。</p><p><img src="/2025/05/06/mall-front-7/cartList.png" alt="效果图"></p><p>可以看到左侧有复选框的功能，其中全选等部分功能的实现也是在store中定义好的。</p><h2 id="pinia管理购物车数据"><a href="#pinia管理购物车数据" class="headerlink" title="pinia管理购物车数据"></a>pinia管理购物车数据</h2><p>可以看出这部分是重头戏。在stores文件夹下新建文件<code>cartStore.js</code>文件，<a href="#cartstore">源码如下</a></p><h3 id="登录状态确认"><a href="#登录状态确认" class="headerlink" title="登录状态确认"></a>登录状态确认</h3><p>此处使用计算方法，若能检测到用户的token值则已登录</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> isLogin = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> userStore.<span class="hljs-property">userInfo</span>.<span class="hljs-property">token</span>)<br></code></pre></td></tr></table></figure><h3 id="获取更新后的购物车数据"><a href="#获取更新后的购物车数据" class="headerlink" title="获取更新后的购物车数据"></a>获取更新后的购物车数据</h3><p>经常要用到，在更新购物车状态后需要再获取一次服务器数据，重新渲染</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateNewList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">findNewCartListAPI</span>()<br>    cartList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span><br>&#125;<br></code></pre></td></tr></table></figure><h3 id="增加购物车内容"><a href="#增加购物车内容" class="headerlink" title="增加购物车内容"></a>增加购物车内容</h3><p>在商品详情页中用过一次</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">addCart</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">if</span> (skuObj.<span class="hljs-property">skuId</span>) &#123;<br>        cartStore.<span class="hljs-title function_">addCart</span>(&#123;<br>            <span class="hljs-attr">id</span>: goods.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>,<br>            <span class="hljs-attr">name</span>: goods.<span class="hljs-property">value</span>.<span class="hljs-property">name</span>,<br>            <span class="hljs-attr">picture</span>: goods.<span class="hljs-property">value</span>.<span class="hljs-property">mainPictures</span>[<span class="hljs-number">0</span>],<br>            <span class="hljs-attr">price</span>: goods.<span class="hljs-property">value</span>.<span class="hljs-property">price</span>,<br>            <span class="hljs-attr">count</span>: count.<span class="hljs-property">value</span>,<br>            <span class="hljs-attr">skuId</span>: skuObj.<span class="hljs-property">skuId</span>,<br>            <span class="hljs-attr">attrsText</span>: skuObj.<span class="hljs-property">specsText</span>,<br>            <span class="hljs-attr">selected</span>: <span class="hljs-literal">true</span><br>        &#125;)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">warning</span>(<span class="hljs-string">&#x27;请选择规格&#x27;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>此处传入了goods的多个参数，在store中需要用到两个(skuId和count)。<br>此处需要检测是否已经登录。若登录了就直接扔给后端处理，否则在本地处理。<br>如果在本地的购物车中找不到类似的商品（表现为skuId找不到一致的），就新增一项；若找到相似商品，就增加数量。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">addCart</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">goods</span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> &#123; skuId, count &#125; = goods<br>    <span class="hljs-keyword">if</span> (isLogin.<span class="hljs-property">value</span>) &#123;<br>        <span class="hljs-keyword">await</span> <span class="hljs-title function_">insertCartAPI</span>(&#123; skuId, count &#125;)<br>        <span class="hljs-title function_">updateNewList</span>()<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">const</span> item = cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> goods.<span class="hljs-property">skuId</span> === item.<span class="hljs-property">skuId</span>)<br>        <span class="hljs-keyword">if</span> (item) &#123;<br>            item.<span class="hljs-property">count</span>++<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(goods)<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="删除购物车中物品"><a href="#删除购物车中物品" class="headerlink" title="删除购物车中物品"></a>删除购物车中物品</h3><p>与增加的逻辑一致，若登录就交给后端处理，否则在本地处理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">delCart</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">skuId</span>) =&gt; &#123;<br>    <span class="hljs-keyword">if</span> (isLogin.<span class="hljs-property">value</span>) &#123;<br>        <span class="hljs-keyword">await</span> <span class="hljs-title function_">delCartAPI</span>([skuId])<br>        <span class="hljs-title function_">updateNewList</span>()<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">const</span> idx = cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> skuId === item.<span class="hljs-property">skuId</span>)<br>        cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">splice</span>(idx, <span class="hljs-number">1</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="清除购物车中物品"><a href="#清除购物车中物品" class="headerlink" title="清除购物车中物品"></a>清除购物车中物品</h3><p>用于在退出登录后对本地购物车清空，直接清空数组就好</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">clearCart</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    cartList.<span class="hljs-property">value</span> = []<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="单选"><a href="#单选" class="headerlink" title="单选"></a>单选</h3><p>改变指定项的<code>selected</code>选项（用于单击商品的复选框）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">singleCheck</span> = (<span class="hljs-params">skuId, selected</span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> item = cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">skuId</span> === skuId)<br>    item.<span class="hljs-property">selected</span> = selected<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="全选"><a href="#全选" class="headerlink" title="全选"></a>全选</h3><p>每一个的<code>selected</code>选项都赋指定值（用于点击全选栏的反应，不一定是真，看<code>selected</code>的参数值）</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">allCheck</span> = (<span class="hljs-params">selected</span>) =&gt; &#123;<br>    cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">selected</span> = selected)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="一些计算方法"><a href="#一些计算方法" class="headerlink" title="一些计算方法"></a>一些计算方法</h3><div class="note note-info">            <p><code>reduce()</code>是js数组中的一个方法，用于对数组中的元素进行累积计算。<br>如在</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">array.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, c</span>) =&gt;</span> a + c.<span class="hljs-property">count</span>, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure><p>中，<code>a</code>是累加器，表示当前的累加值；<code>c</code>是当前遍历的数组元素。该句表示累加器<code>a</code>累次与<code>c.count</code>相加，其中<code>a</code>的初始值为0。</p>          </div><ul><li><p>计算数量和</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> allCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, c</span>) =&gt;</span> a + c.<span class="hljs-property">count</span>, <span class="hljs-number">0</span>))<br></code></pre></td></tr></table></figure></li><li><p>计算价值和</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> allPrice = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, c</span>) =&gt;</span> a + c.<span class="hljs-property">count</span> * c.<span class="hljs-property">price</span>, <span class="hljs-number">0</span>))<br></code></pre></td></tr></table></figure></li><li><p>计算是否为全选（用于在单项点完后全选栏是否勾选）</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> isAll = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">selected</span>))<br></code></pre></td></tr></table></figure></li><li><p>计算已选商品的数量</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> selectedCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">selected</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, c</span>) =&gt;</span> a + c.<span class="hljs-property">count</span>, <span class="hljs-number">0</span>))<br></code></pre></td></tr></table></figure></li><li><p>计算已选商品的价格</p>  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> selectedPrice = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">selected</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, c</span>) =&gt;</span> a + c.<span class="hljs-property">count</span> * c.<span class="hljs-property">price</span>, <span class="hljs-number">0</span>))<br></code></pre></td></tr></table></figure></li></ul><div class="note note-info">            <p>这个数据和用户数据一样，持久化是最合适的，因此下面也有persist属性。</p>          </div><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><h3 id="HeaderCart"><a href="#HeaderCart" class="headerlink" title="HeaderCart"></a>HeaderCart</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCartStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/cartStore&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> cartStore = <span class="hljs-title function_">useCartStore</span>()</span><br><span class="language-javascript"></span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cart&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;curr&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-shoppingcart&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">em</span>&gt;</span>&#123;&#123; cartStore.cartList.length &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">em</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;layer&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;list&quot;</span>&gt;</span><br><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;i in cartStore.cartList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;i&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;i.picture&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;center&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;name ellipsis-2&quot;</span>&gt;</span>&#123;&#123; i.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;attr ellipsis&quot;</span>&gt;</span>&#123;&#123; i.attrText &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;right&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;price&quot;</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span> &#123;&#123; i.price &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;count&quot;</span>&gt;</span>x&#123;&#123; i.count &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-close-new&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;cartStore.delCart(i.skuId)&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;foot&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>共 &#123;&#123; cartStore.allCount &#125;&#125; 件商品<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span> &#123;&#123; cartStore.allPrice.toFixed(2) &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;large&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$router.push(&#x27;/cartlist&#x27;)&quot;</span>&gt;</span>去购物车结算<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.cart</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">600</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.curr</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.icon-cart</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">22px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">em</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-style</span>: normal;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">            <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">1px</span> <span class="hljs-number">6px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: $helpColor;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-family</span>: Arial;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">        <span class="hljs-selector-class">.layer</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">            <span class="hljs-attribute">transform</span>: none;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.layer</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.4s</span> <span class="hljs-number">0.2s</span>;</span><br><span class="language-css">        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">200px</span>) <span class="hljs-built_in">scale</span>(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">        <span class="hljs-attribute">top</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>);</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;<span class="hljs-selector-pseudo">::before</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">content</span>: <span class="hljs-string">&quot;&quot;</span>;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">            <span class="hljs-attribute">right</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">top</span>: -<span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">scale</span>(<span class="hljs-number">0.6</span>, <span class="hljs-number">1</span>) <span class="hljs-built_in">rotate</span>(<span class="hljs-number">45deg</span>);</span><br><span class="language-css">            <span class="hljs-attribute">box-shadow</span>: -<span class="hljs-number">3px</span> -<span class="hljs-number">3px</span> <span class="hljs-number">5px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.foot</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">            <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">bottom</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">            <span class="hljs-attribute">justify-content</span>: space-between;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-number">#f8f8f8</span>;</span><br><span class="language-css">            <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.total</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">                    &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.list</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">310px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">overflow</span>: auto;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;::-webkit-scrollbar &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;::-webkit-scrollbar-track &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-number">#f8f8f8</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;::-webkit-scrollbar-thumb &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-number">#eee</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;::-webkit-scrollbar-thumb:hover &#123;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-number">#ccc</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.item</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">                <span class="hljs-attribute">bottom</span>: <span class="hljs-number">38px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">                <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.5s</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                <span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">                <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">width</span>: <span class="hljs-number">80px</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-class">.center</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                    <span class="hljs-selector-class">.name</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css"></span><br><span class="language-css">                    <span class="hljs-selector-class">.attr</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-class">.right</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">                    <span class="hljs-selector-class">.price</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css"></span><br><span class="language-css">                    <span class="hljs-selector-class">.count</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="index-vue"><a href="#index-vue" class="headerlink" title="index.vue"></a>index.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCartStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../stores/cartStore&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> cartStore = <span class="hljs-title function_">useCartStore</span>()</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">singleCheck</span> = (<span class="hljs-params">i, selected</span>) =&gt; &#123;</span><br><span class="language-javascript">    cartStore.<span class="hljs-title function_">singleCheck</span>(i.<span class="hljs-property">skuId</span>, selected)</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">allCheck</span> = (<span class="hljs-params">selected</span>) =&gt; &#123;</span><br><span class="language-javascript">    cartStore.<span class="hljs-title function_">allCheck</span>(selected)</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">delCart</span> = (<span class="hljs-params">skuId</span>) =&gt; &#123;</span><br><span class="language-javascript">    cartStore.<span class="hljs-title function_">delCart</span>(skuId)</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;xtx-cart-page&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container m-top-20&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cart&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">table</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">thead</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;120&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">el-checkbox</span> <span class="hljs-attr">:model-value</span>=<span class="hljs-string">&quot;cartStore.isAll&quot;</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;allCheck&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;440&quot;</span>&gt;</span>商品信息<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;220&quot;</span>&gt;</span>单价<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;180&quot;</span>&gt;</span>数量<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;180&quot;</span>&gt;</span>小计<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">th</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;140&quot;</span>&gt;</span>操作<span class="hljs-tag">&lt;/<span class="hljs-name">th</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">thead</span>&gt;</span><br><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">tbody</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;i in cartStore.cartList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;i.id&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">el-checkbox</span> <span class="hljs-attr">:model-value</span>=<span class="hljs-string">&quot;i.selected&quot;</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;(selected) =&gt; singleCheck(i, selected)&quot;</span> /&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods&quot;</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;i.picture&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;name ellipsis&quot;</span>&gt;</span>&#123;&#123; i.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tc&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span> &#123;&#123; i.price &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tc&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">el-input-number</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;i.count&quot;</span> <span class="hljs-attr">:min</span>=<span class="hljs-string">&quot;0&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tc&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;f16 red&quot;</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span> &#123;&#123; (i.price * i.count).toFixed(2) &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;tc&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">el-popconfirm</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;确认删除吗&quot;</span> <span class="hljs-attr">confirm-button-text</span>=<span class="hljs-string">&quot;确认&quot;</span> <span class="hljs-attr">cancel-button-text</span>=<span class="hljs-string">&quot;取消&quot;</span> @<span class="hljs-attr">confirm</span>=<span class="hljs-string">&quot;delCart(i.skuId)&quot;</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">reference</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>删除<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;/<span class="hljs-name">el-popconfirm</span>&gt;</span><br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">tr</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;cartStore.cartList.length === 0&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">td</span> <span class="hljs-attr">colspan</span>=<span class="hljs-string">&quot;6&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cart-none&quot;</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">el-empty</span> <span class="hljs-attr">description</span>=<span class="hljs-string">&quot;购物车列表为空&quot;</span>&gt;</span><br>                                        <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$router.push(&#x27;/&#x27;)&quot;</span>&gt;</span>随便逛逛<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;/<span class="hljs-name">el-empty</span>&gt;</span><br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">td</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">tr</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">tbody</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">table</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;action&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;batch&quot;</span>&gt;</span><br>                    共 &#123;&#123; cartStore.allCount &#125;&#125; 件商品，已选择 &#123;&#123; cartStore.selectedCount &#125;&#125; 件，商品合计 <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;red&quot;</span>&gt;</span> <span class="hljs-symbol">&amp;yen;</span> &#123;&#123; cartStore.selectedPrice.toFixed(2) &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;total&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;large&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;primary&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$router.push(&#x27;/checkout&#x27;)&quot;</span>&gt;</span>下单结算<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.xtx-cart-page</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.cart</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">table</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">border-spacing</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-collapse</span>: collapse;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">24px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">th</span>,</span><br><span class="language-css">            <span class="hljs-selector-tag">td</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css"></span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:first</span>-child &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">text-align</span>: left;</span><br><span class="language-css">                    <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">th</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-weight</span>: normal;</span><br><span class="language-css">                <span class="hljs-attribute">line-height</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.cart-none</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">120px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.tc</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.xtx-numbox</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.red</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.green</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.f16</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.goods</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        &gt;<span class="hljs-selector-tag">div</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">280px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.attr</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.action</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: space-between;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">30px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.xtx-checkbox</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.batch</span> &#123;</span><br><span class="language-css">            <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.red</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-weight</span>: bold;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.tit</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">font-weight</span>: normal;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="CartStore"><a href="#CartStore" class="headerlink" title="CartStore"></a>CartStore</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;pinia&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; computed, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useUserStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./user&#x27;</span><br><span class="hljs-keyword">import</span> &#123; insertCartAPI, findNewCartListAPI, delCartAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/cart&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCartStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;cart&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()<br>    <span class="hljs-keyword">const</span> isLogin = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> userStore.<span class="hljs-property">userInfo</span>.<span class="hljs-property">token</span>)<br>    <span class="hljs-keyword">const</span> cartList = <span class="hljs-title function_">ref</span>([])<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">updateNewList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">findNewCartListAPI</span>()<br>        cartList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span><br>    &#125;<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">addCart</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">goods</span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> &#123; skuId, count &#125; = goods<br>        <span class="hljs-keyword">if</span> (isLogin.<span class="hljs-property">value</span>) &#123;<br>            <span class="hljs-keyword">await</span> <span class="hljs-title function_">insertCartAPI</span>(&#123; skuId, count &#125;)<br>            <span class="hljs-title function_">updateNewList</span>()<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">const</span> item = cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> goods.<span class="hljs-property">skuId</span> === item.<span class="hljs-property">skuId</span>)<br>            <span class="hljs-keyword">if</span> (item) &#123;<br>                item.<span class="hljs-property">count</span>++<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">push</span>(goods)<br>            &#125;<br>        &#125;<br><br>    &#125;<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">delCart</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">skuId</span>) =&gt; &#123;<br>        <span class="hljs-keyword">if</span> (isLogin.<span class="hljs-property">value</span>) &#123;<br>            <span class="hljs-keyword">await</span> <span class="hljs-title function_">delCartAPI</span>([skuId])<br>            <span class="hljs-title function_">updateNewList</span>()<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">const</span> idx = cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">findIndex</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> skuId === item.<span class="hljs-property">skuId</span>)<br>            cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">splice</span>(idx, <span class="hljs-number">1</span>)<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearCart</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>        cartList.<span class="hljs-property">value</span> = []<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">singleCheck</span> = (<span class="hljs-params">skuId, selected</span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> item = cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">skuId</span> === skuId)<br>        item.<span class="hljs-property">selected</span> = selected<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">allCheck</span> = (<span class="hljs-params">selected</span>) =&gt; &#123;<br>        cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">selected</span> = selected)<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> allCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, c</span>) =&gt;</span> a + c.<span class="hljs-property">count</span>, <span class="hljs-number">0</span>))<br>    <span class="hljs-keyword">const</span> allPrice = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, c</span>) =&gt;</span> a + c.<span class="hljs-property">count</span> * c.<span class="hljs-property">price</span>, <span class="hljs-number">0</span>))<br>    <span class="hljs-keyword">const</span> isAll = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">every</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> item.<span class="hljs-property">selected</span>))<br>    <span class="hljs-keyword">const</span> selectedCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">selected</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, c</span>) =&gt;</span> a + c.<span class="hljs-property">count</span>, <span class="hljs-number">0</span>))<br>    <span class="hljs-keyword">const</span> selectedPrice = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> cartList.<span class="hljs-property">value</span>.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">selected</span>).<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, c</span>) =&gt;</span> a + c.<span class="hljs-property">count</span> * c.<span class="hljs-property">price</span>, <span class="hljs-number">0</span>))<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        cartList,<br>        updateNewList,<br>        delCart,<br>        addCart,<br>        clearCart,<br>        singleCheck,<br>        allCheck,<br><br>        allCount,<br>        allPrice,<br>        isAll,<br>        selectedCount,<br>        selectedPrice,<br>    &#125;<br>&#125;, &#123;<br>    <span class="hljs-attr">persist</span>: <span class="hljs-literal">true</span><br>&#125;)<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;该部分与购物支付功能直接相关，涉及接口比较多。&lt;/p&gt;
&lt;h2 id=&quot;定义接口&quot;&gt;&lt;a href=&quot;#定义接口&quot; class=&quot;headerlink&quot; title=&quot;定义接口&quot;&gt;&lt;/a&gt;定义接口&lt;/h2&gt;&lt;p&gt;在apis文件夹下新建&lt;code&gt;cart.js&lt;/code&gt;</summary>
      
    
    
    
    <category term="前端" scheme="http://example.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>vue实践之商场app - 登录</title>
    <link href="http://example.com/2025/05/06/mall-front-6/"/>
    <id>http://example.com/2025/05/06/mall-front-6/</id>
    <published>2025-05-06T08:21:56.000Z</published>
    <updated>2025-05-07T16:16:21.501Z</updated>
    
    <content type="html"><![CDATA[<p>客户只有登录了才能继续购物操作，才能进行某些业务。在view&#x2F;Login文件夹下新建<code>index.vue</code>文件，<a href="#indexvue">代码如下</a></p><p><img src="/2025/05/06/mall-front-6/login.png" alt="效果图"></p><h2 id="用到的接口"><a href="#用到的接口" class="headerlink" title="用到的接口"></a>用到的接口</h2><p>在apis文件夹下新建文件<code>user.js</code>，需要用到的接口如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/utils/http&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">loginAPI</span> = (<span class="hljs-params">&#123; account, password &#125;</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>        <span class="hljs-attr">data</span>: &#123;<br>            account,<br>            password<br>        &#125;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="表单校验实现"><a href="#表单校验实现" class="headerlink" title="表单校验实现"></a>表单校验实现</h2><h3 id="自定义校验"><a href="#自定义校验" class="headerlink" title="自定义校验"></a>自定义校验</h3><p>校验的核心部件为</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-form</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;formRef&quot;</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">&quot;form&quot;</span> <span class="hljs-attr">:rules</span>=<span class="hljs-string">&quot;rules&quot;</span> <span class="hljs-attr">label-position</span>=<span class="hljs-string">&quot;right&quot;</span> <span class="hljs-attr">label-width</span>=<span class="hljs-string">&quot;60px&quot;</span> <span class="hljs-attr">status-icon</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;account&quot;</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;账户&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;form.account&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;密码&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;form.password&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;agree&quot;</span> <span class="hljs-attr">label-width</span>=<span class="hljs-string">&quot;22px&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-checkbox</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;large&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;form.agree&quot;</span>&gt;</span>我已同意隐私条款和服务条款<span class="hljs-tag">&lt;/<span class="hljs-name">el-checkbox</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;large&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;subBtn&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;doLogin&quot;</span>&gt;</span>点击登录<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span><br></code></pre></td></tr></table></figure><p>其中，<code>&lt;el-form /&gt;</code>用于绑定表单对象和规则对象，<code>&lt;el-form-item /&gt;</code>用于绑定使用的规则字段，<code>&lt;el-input /&gt;</code>用于绑定表单数据。<br><code>&lt;el-form /&gt;</code>绑定了表单”formRef”，其在js上定义的表现形式为</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> form = <span class="hljs-title function_">ref</span>(&#123;<br>    <span class="hljs-attr">account</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>    <span class="hljs-attr">agree</span>: <span class="hljs-literal">true</span><br>&#125;)<br></code></pre></td></tr></table></figure><p>定义的规则对象为</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> rules = &#123;<br>    <span class="hljs-attr">account</span>: [<br>        &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;账户名不能为空&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;blur&#x27;</span> &#125;<br>    ],<br>    <span class="hljs-attr">password</span>: [<br>        &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;密码不能为空&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;blur&#x27;</span> &#125;,<br>        &#123; <span class="hljs-attr">min</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">14</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;密码在6至14字符之间&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;blur&#x27;</span> &#125;<br>    ],<br>    <span class="hljs-attr">agree</span>: [<br>        &#123;<br>            <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">rule, value, callback</span>) =&gt;</span> &#123;<br>                <span class="hljs-keyword">if</span> (value) &#123;<br>                    <span class="hljs-title function_">callback</span>();<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;请勾选协议&#x27;</span>))<br>                &#125;<br>            &#125;<br>        &#125;<br>    ]<br>&#125;<br></code></pre></td></tr></table></figure><p><code>blur</code>表示在输入框失焦时触发。</p><h3 id="统一校验"><a href="#统一校验" class="headerlink" title="统一校验"></a>统一校验</h3><p>此时假如什么都不填，直接点击登录，还是能进去的。因此需要统一校验规则，在收到成功消息后才允许登录</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">doLogin</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>    <span class="hljs-keyword">const</span> &#123; account, password &#125; = form.<span class="hljs-property">value</span><br>    formRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">validate</span>(<span class="hljs-keyword">async</span> (valid) =&gt; &#123;<br>        <span class="hljs-keyword">if</span> (valid) &#123;<br>            userStore.<span class="hljs-title function_">getUserInfo</span>(&#123; account, password &#125;)<br>            <span class="hljs-comment">// 成功</span><br>            <span class="hljs-title class_">ElMessage</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;success&#x27;</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;登录成功&#x27;</span> &#125;)<br>            router.<span class="hljs-title function_">replace</span>(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span> &#125;)<br>        &#125;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>userStore在下面的章节</p><h2 id="Pinia管理用户数据"><a href="#Pinia管理用户数据" class="headerlink" title="Pinia管理用户数据"></a>Pinia管理用户数据</h2><p>用户数据在后面都需要用到，因此一般是用Pinia将其存储起来。</p><p>在store文件夹下面新建文件<code>user.js</code>，源码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;pinia&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; loginAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../apis/user&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; useCartStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;./cartStore&quot;</span>;<br><span class="hljs-keyword">import</span> &#123; mergeCartAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../apis/cart&quot;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useUserStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;user&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> userInfo = <span class="hljs-title function_">ref</span>(&#123;&#125;)<br>    <span class="hljs-keyword">const</span> cartStore = <span class="hljs-title function_">useCartStore</span>()<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getUserInfo</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">&#123; account, password &#125;</span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">loginAPI</span>(&#123; account, password &#125;)<br>        userInfo.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span><br>        <span class="hljs-keyword">await</span> <span class="hljs-title function_">mergeCartAPI</span>(cartStore.<span class="hljs-property">cartList</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function">(<span class="hljs-params">item</span>) =&gt;</span> &#123;<br>            <span class="hljs-keyword">return</span> &#123;<br>                <span class="hljs-attr">skuId</span>: item.<span class="hljs-property">skuId</span>,<br>                <span class="hljs-attr">selected</span>: item.<span class="hljs-property">selected</span>,<br>                <span class="hljs-attr">count</span>: item.<span class="hljs-property">count</span><br>            &#125;<br>        &#125;))<br>        cartStore.<span class="hljs-title function_">updateNewList</span>()<br>    &#125;<br><br>    <span class="hljs-comment">//退出操作</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">clearUserInfo</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>        userInfo.<span class="hljs-property">value</span> = &#123;&#125;<br>        cartStore.<span class="hljs-title function_">clearCart</span>()<br><br>    &#125;<br>    <span class="hljs-keyword">return</span> &#123;<br>        userInfo,<br>        getUserInfo,<br>        clearUserInfo,<br>    &#125;<br>&#125;, &#123;<br>    <span class="hljs-attr">persist</span>: <span class="hljs-literal">true</span>,<br>&#125;)<br></code></pre></td></tr></table></figure><p>用户登录后同步本地的购物车数据到自己的账户中，然后通过调取<code>loginAPI</code>获取用户信息，信息都存到<code>userInfo</code>中。退出操作则让用户数据清空。</p><p>而后面的<code>persist</code>属性需要配合pinia的持久化。用户数据中有一个关键的数据Token（标识用户是否已经登录），而Token持续一段时间才会过期。因此需要让保存在内存中的数据在LocalStorage里也存一份。该功能需要在<code>main.js</code>中全局注册实现。</p><div class="note note-info">            <p>购物车和用户这两个store互有联系，需要相互看。</p>          </div><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> pinia = <span class="hljs-title function_">createPinia</span>()<br>pinia.<span class="hljs-title function_">use</span>(piniaPluginPersistedstate)<br></code></pre></td></tr></table></figure><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><h3 id="index-vue"><a href="#index-vue" class="headerlink" title="index.vue"></a>index.vue</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ElMessage</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;element-plus&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;element-plus/theme-chalk/el-message.css&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useUserStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/user&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 表单校验</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> form = <span class="hljs-title function_">ref</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">account</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">password</span>: <span class="hljs-string">&#x27;&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">agree</span>: <span class="hljs-literal">true</span></span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 规则对象</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> rules = &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">account</span>: [</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;账户名不能为空&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;blur&#x27;</span> &#125;</span><br><span class="language-javascript">    ],</span><br><span class="language-javascript">    <span class="hljs-attr">password</span>: [</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">required</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;密码不能为空&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;blur&#x27;</span> &#125;,</span><br><span class="language-javascript">        &#123; <span class="hljs-attr">min</span>: <span class="hljs-number">6</span>, <span class="hljs-attr">max</span>: <span class="hljs-number">14</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;密码在6至14字符之间&#x27;</span>, <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;blur&#x27;</span> &#125;</span><br><span class="language-javascript">    ],</span><br><span class="language-javascript">    <span class="hljs-attr">agree</span>: [</span><br><span class="language-javascript">        &#123;</span><br><span class="language-javascript">            <span class="hljs-attr">validator</span>: <span class="hljs-function">(<span class="hljs-params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">                <span class="hljs-keyword">if</span> (value) &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">callback</span>();</span><br><span class="language-javascript">                &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">                    <span class="hljs-title function_">callback</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;请勾选协议&#x27;</span>))</span><br><span class="language-javascript">                &#125;</span><br><span class="language-javascript">            &#125;</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    ]</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> formRef = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">doLogin</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> &#123; account, password &#125; = form.<span class="hljs-property">value</span></span><br><span class="language-javascript">    formRef.<span class="hljs-property">value</span>.<span class="hljs-title function_">validate</span>(<span class="hljs-keyword">async</span> (valid) =&gt; &#123;</span><br><span class="language-javascript">        <span class="hljs-keyword">if</span> (valid) &#123;</span><br><span class="language-javascript">            userStore.<span class="hljs-title function_">getUserInfo</span>(&#123; account, password &#125;)</span><br><span class="language-javascript">            <span class="hljs-comment">// 成功</span></span><br><span class="language-javascript">            <span class="hljs-title class_">ElMessage</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;success&#x27;</span>, <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;登录成功&#x27;</span> &#125;)</span><br><span class="language-javascript">            router.<span class="hljs-title function_">replace</span>(&#123; <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span> &#125;)</span><br><span class="language-javascript"></span><br><span class="language-javascript">            <span class="hljs-comment">// 失败</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;login-header&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container m-top-20&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;logo&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>小兔鲜<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;entry&quot;</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span><br>                    进入网站首页<br>                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-angle-right&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-angle-right&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">section</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;login-section&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;wrapper&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>用户登录<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;account-box&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;form&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">el-form</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;formRef&quot;</span> <span class="hljs-attr">:model</span>=<span class="hljs-string">&quot;form&quot;</span> <span class="hljs-attr">:rules</span>=<span class="hljs-string">&quot;rules&quot;</span> <span class="hljs-attr">label-position</span>=<span class="hljs-string">&quot;right&quot;</span> <span class="hljs-attr">label-width</span>=<span class="hljs-string">&quot;60px&quot;</span></span><br><span class="hljs-tag">                            <span class="hljs-attr">status-icon</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;account&quot;</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;账户&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;form.account&quot;</span> /&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;密码&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">el-input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;form.password&quot;</span> /&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">el-form-item</span> <span class="hljs-attr">prop</span>=<span class="hljs-string">&quot;agree&quot;</span> <span class="hljs-attr">label-width</span>=<span class="hljs-string">&quot;22px&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">el-checkbox</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;large&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;form.agree&quot;</span>&gt;</span>我已同意隐私条款和服务条款<span class="hljs-tag">&lt;/<span class="hljs-name">el-checkbox</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">el-form-item</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;large&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;subBtn&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;doLogin&quot;</span>&gt;</span>点击登录<span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">el-form</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">section</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;login-footer&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>关于我们<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>帮助中心<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>售后服务<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>配送与验收<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>商务合作<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>搜索推荐<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>友情链接<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>CopyRight <span class="hljs-symbol">&amp;copy;</span> 小兔鲜儿<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&#x27;scss&#x27;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.login-header</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e4e4e4</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: flex-end;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: space-between;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.logo</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">132px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-indent</span>: -<span class="hljs-number">9999px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&quot;@/assets/images/logo.png&quot;</span>) no-repeat center <span class="hljs-number">18px</span> / contain;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.sub</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">24px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">font-weight</span>: normal;</span><br><span class="language-css">        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">38px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.entry</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">120px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">38px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">            <span class="hljs-attribute">letter-spacing</span>: -<span class="hljs-number">5px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.login-section</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;@/assets/images/login-bg.png&#x27;</span>) no-repeat center / cover;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">488px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.wrapper</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">380px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">        <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">        <span class="hljs-attribute">top</span>: <span class="hljs-number">54px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate3d</span>(<span class="hljs-number">100px</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>);</span><br><span class="language-css">        <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.15</span>);</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">nav</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">55px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">40px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: right;</span><br><span class="language-css">            <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">                <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">                <span class="hljs-attribute">display</span>: inline-block;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">                <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.login-footer</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">30px</span> <span class="hljs-number">0</span> <span class="hljs-number">50px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: inline-block;</span><br><span class="language-css"></span><br><span class="language-css">            ~<span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">border-left</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ccc</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.account-box</span> &#123;</span><br><span class="language-css">    <span class="hljs-selector-class">.toggle</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">15px</span> <span class="hljs-number">40px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: right;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.form</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span> <span class="hljs-number">20px</span> <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;-item &#123;</span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">28px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.input</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">                <span class="hljs-attribute">height</span>: <span class="hljs-number">36px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                &gt;<span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">width</span>: <span class="hljs-number">34px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">height</span>: <span class="hljs-number">34px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">background</span>: <span class="hljs-number">#cfcdcd</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">                    <span class="hljs-attribute">left</span>: <span class="hljs-number">1px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">top</span>: <span class="hljs-number">1px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">                    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">34px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">input</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">44px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#cfcdcd</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">height</span>: <span class="hljs-number">36px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">36px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css"></span><br><span class="language-css">                    &amp;<span class="hljs-selector-class">.error</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">border-color</span>: $priceColor;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css"></span><br><span class="language-css">                    &amp;<span class="hljs-selector-class">.active</span>,</span><br><span class="language-css">                    &amp;<span class="hljs-selector-pseudo">:focus</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">border-color</span>: $xtxColor;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-class">.code</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">                    <span class="hljs-attribute">right</span>: <span class="hljs-number">1px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">top</span>: <span class="hljs-number">1px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">                    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">34px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">width</span>: <span class="hljs-number">90px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">height</span>: <span class="hljs-number">34px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &gt;<span class="hljs-selector-class">.error</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">line-height</span>: <span class="hljs-number">28px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">2px</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.agree</span> &#123;</span><br><span class="language-css">            <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#069</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.btn</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: $xtxColor;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-class">.disabled</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">background</span>: <span class="hljs-number">#cfcdcd</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.action</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">40px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: space-between;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.url</span> &#123;</span><br><span class="language-css">            <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.subBtn</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: $xtxColor;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;客户只有登录了才能继续购物操作，才能进行某些业务。在view&amp;#x2F;Login文件夹下新建&lt;code&gt;index.vue&lt;/code&gt;文件，&lt;a href=&quot;#indexvue&quot;&gt;代码如下&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2025/05/06/mall-fr</summary>
      
    
    
    
    <category term="前端" scheme="http://example.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>vue实践之商场app - 详情页</title>
    <link href="http://example.com/2025/05/04/mall-front-5/"/>
    <id>http://example.com/2025/05/04/mall-front-5/</id>
    <published>2025-05-04T08:56:00.000Z</published>
    <updated>2025-05-06T09:31:50.999Z</updated>
    
    <content type="html"><![CDATA[<p>详情页需要进行商品展示、规格选择、加入购物车等多种功能的展示。在View&#x2F;Detail文件夹下新建<code>index.vue</code>和components文件夹。<a href="#%E9%A1%B5%E9%9D%A2%E6%BA%90%E7%A0%81">index.vue的代码如下</a></p><p><img src="/2025/05/04/mall-front-5/detail.png" alt="效果图"></p><h2 id="用到的接口"><a href="#用到的接口" class="headerlink" title="用到的接口"></a>用到的接口</h2><p>在apis文件夹下新建<code>details.js</code>，需要用到的接口为</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/utils/http&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getDetail</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/goods&#x27;</span>,<br>        <span class="hljs-attr">params</span>: &#123;<br>            id<br>        &#125;<br>    &#125;)<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getHotGoodsAPI</span> = (<span class="hljs-params">&#123; id, type, limit = <span class="hljs-number">3</span> &#125;</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/goods/hot&#x27;</span>,<br>        <span class="hljs-attr">params</span>: &#123;<br>            id,<br>            type,<br>            limit<br>        &#125;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="组件概览"><a href="#组件概览" class="headerlink" title="组件概览"></a>组件概览</h2><h3 id="面包屑组件"><a href="#面包屑组件" class="headerlink" title="面包屑组件"></a>面包屑组件</h3><p>面包屑组件以前已经写过，这里不再说明其具体写法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bread-container&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;&gt;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; path: &#x27;/&#x27; &#125;&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; path: `/category/$&#123;goods.categories[1].id&#125;` &#125;&quot;</span>&gt;</span>&#123;&#123; goods.categories[1].name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; path: `/category/sub/$&#123;goods.categories[0].id&#125;` &#125;&quot;</span>&gt;</span>&#123;&#123; goods.categories[0].name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span>&gt;</span>&#123;&#123; goods.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>但在实际运行中会发现其报错。原因是<code>goods</code>一开始的初始值是一个空对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> goods = <span class="hljs-title function_">ref</span>(&#123;&#125;)<br></code></pre></td></tr></table></figure><p>在goods获取数据前就开始渲染了，因此后面的数据都变成了<code>undefined</code>类型。要想解决该问题，有两种方法</p><ul><li><p>添加可选链（添加一个<code>?</code>）语法，在获取到值后才开始计算，如</p>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; path: `/category/$&#123;goods.categories[1]?.id&#125;` &#125;&quot;</span>&gt;</span>&#123;&#123; goods.categories[1]?.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br></code></pre></td></tr></table></figure></li><li><p>此处使用的是<code>v-if</code>手动控制渲染时机，保证获取到数据后才开始渲染（注意<code>container</code>后的<code>v-if</code>）。</p></li></ul><h3 id="商品概览"><a href="#商品概览" class="headerlink" title="商品概览"></a>商品概览</h3><h4 id="预览图片"><a href="#预览图片" class="headerlink" title="预览图片"></a>预览图片</h4><p>该部分中的图片预览区组件需要实现放大和获取图片列表的功能。在src&#x2F;components文件夹下新建<code>index.js</code>文件（用于全局注册）和ImageView文件夹，这个文件夹下新建<code>index.vue</code>，<a href="#%E5%9B%BE%E7%89%87%E7%BB%84%E4%BB%B6">代码如下</a></p><p><img src="/2025/05/04/mall-front-5/middle.png" alt="还没有预览时的效果图"></p><p><code>defineProps</code>是做过的传参，这里不再赘述。<br><code>middle</code>部分为左侧的预览图。从图片数组内挑选符合条件的图片。同时准备好蒙版组件，蒙版的位置由js部分决定，当鼠标在预览图内时才渲染。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;middle&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;target&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;imageList[activeIndex]&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;layer&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;!isOutside&quot;</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123; left: `$&#123;left&#125;px`, top: `$&#123;top&#125;px` &#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>条件控制在右侧的小图中。当鼠标进入某张图片的范围时将<code>activeIndex</code>转换为自己所在的索引，同时改变类名，显示高亮。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;small&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(img, i) in imageList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;i&quot;</span> @<span class="hljs-attr">mouseenter</span>=<span class="hljs-string">&quot;enterHandler(i)&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123; active: i === activeIndex &#125;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;img&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> <span class="hljs-title function_">enterHandler</span> = (<span class="hljs-params">i</span>) =&gt; &#123; activeIndex.<span class="hljs-property">value</span> = i &#125;<br></code></pre></td></tr></table></figure><p>当鼠标在预览图中时，大图开始显示,大图显示的位置由js部分决定。</p><p><img src="/2025/05/04/mall-front-5/large.png" alt="效果图"></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;large&quot;</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;[&#123;</span></span><br><span class="hljs-string"><span class="hljs-tag">    backgroundImage: `url($&#123;imageList[activeIndex]&#125;)`,</span></span><br><span class="hljs-string"><span class="hljs-tag">    backgroundPositionX: `$&#123;positionX&#125;px`,</span></span><br><span class="hljs-string"><span class="hljs-tag">    backgroundPositionY: `$&#123;positionY&#125;px`,</span></span><br><span class="hljs-string"><span class="hljs-tag">&#125;,]&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;!isOutside&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>js部分如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> target = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)<br><span class="hljs-keyword">const</span> &#123; elementX, elementY, isOutside &#125; = <span class="hljs-title function_">useMouseInElement</span>(target)<br><br><span class="hljs-comment">// 滑块随鼠标移动</span><br><span class="hljs-keyword">const</span> left = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>), top = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>), positionX = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>), positionY = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br><span class="hljs-title function_">watch</span>([elementX, elementY, isOutside], <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (isOutside.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span><br>    <span class="hljs-comment">// 有效范围内</span><br>    <span class="hljs-keyword">if</span> (elementX.<span class="hljs-property">value</span> &gt; <span class="hljs-number">100</span> &amp;&amp; elementX.<span class="hljs-property">value</span> &lt; <span class="hljs-number">300</span>) &#123; left.<span class="hljs-property">value</span> = elementX.<span class="hljs-property">value</span> - <span class="hljs-number">100</span> &#125;<br>    <span class="hljs-keyword">if</span> (elementY.<span class="hljs-property">value</span> &gt; <span class="hljs-number">100</span> &amp;&amp; elementY.<span class="hljs-property">value</span> &lt; <span class="hljs-number">300</span>) &#123; top.<span class="hljs-property">value</span> = elementY.<span class="hljs-property">value</span> - <span class="hljs-number">100</span> &#125;<br>    <span class="hljs-comment">// 边界</span><br>    <span class="hljs-keyword">if</span> (elementX.<span class="hljs-property">value</span> &gt; <span class="hljs-number">300</span>) &#123; left.<span class="hljs-property">value</span> = <span class="hljs-number">200</span> &#125;<br>    <span class="hljs-keyword">if</span> (elementX.<span class="hljs-property">value</span> &lt; <span class="hljs-number">100</span>) &#123; left.<span class="hljs-property">value</span> = <span class="hljs-number">0</span> &#125;<br>    <span class="hljs-keyword">if</span> (elementY.<span class="hljs-property">value</span> &gt; <span class="hljs-number">300</span>) &#123; top.<span class="hljs-property">value</span> = <span class="hljs-number">200</span> &#125;<br>    <span class="hljs-keyword">if</span> (elementY.<span class="hljs-property">value</span> &lt; <span class="hljs-number">100</span>) &#123; top.<span class="hljs-property">value</span> = <span class="hljs-number">0</span> &#125;<br>    <span class="hljs-comment">// 控制大图的显示</span><br>    positionX.<span class="hljs-property">value</span> = -left.<span class="hljs-property">value</span> * <span class="hljs-number">2</span><br>    positionY.<span class="hljs-property">value</span> = -top.<span class="hljs-property">value</span> * <span class="hljs-number">2</span><br>&#125;)<br></code></pre></td></tr></table></figure><p><code>target</code>传入一个组件（这里是<code>middle</code>），<code>watch</code>方法用于监听传入3个值的变化。变化时回调函数会被触发（但前两个一直在变，就相当于一直在触发了）。当鼠标在预览图中时，蒙版和大图的位置开始变化。</p><ul><li><p>蒙版的点位在鼠标往左、往上各100px</p><ul><li><p>鼠标在100-300范围内，蒙版左上角点的值为鼠标坐标-100</p></li><li><p>鼠标在0-100范围内，为防止蒙版跑出，值固定为0</p></li><li><p>鼠标在200-300范围内，为防止蒙版抛出，值固定为200</p></li></ul></li><li><p>大图的位置以蒙版的位置为准。由于大图相较于不变的大图框是反向运动，因此需要加符号</p></li></ul><h4 id="组件统一注册"><a href="#组件统一注册" class="headerlink" title="组件统一注册"></a>组件统一注册</h4><p><code>index.js</code>下的代码为</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ImageView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./ImageView/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Sku</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./XtxSku/index.vue&#x27;</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> componentPlugin = &#123;<br>    <span class="hljs-title function_">install</span>(<span class="hljs-params">app</span>) &#123;<br>        <span class="hljs-comment">// app.component(&#x27;组件名字&#x27;, 组件配置对象)</span><br>        app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;ImaView&#x27;</span>, <span class="hljs-title class_">ImageView</span>)<br>        app.<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;XtxSku&#x27;</span>, <span class="hljs-title class_">Sku</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>该部分注册了文件夹下的所有组件，只需要在<code>main,js</code>文件下注册</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">use</span>(componentPlugin)<br></code></pre></td></tr></table></figure><p>即可，减少了<code>main.js</code>部分的代码量。</p><h4 id="统计信息"><a href="#统计信息" class="headerlink" title="统计信息"></a>统计信息</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-sales&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>销量人气<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> &#123;&#123; goods.salesCount &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-task-filling&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>销量人气<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>商品评价<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> &#123;&#123; goods.commentCount &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-comment-filling&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>查看评价<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>收藏人气<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> &#123;&#123; goods.collectCount &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-favorite-filling&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>收藏商品<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>品牌信息<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> &#123;&#123; goods.brand.name &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-dynamic-filling&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>品牌主页<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="商品信息"><a href="#商品信息" class="headerlink" title="商品信息"></a>商品信息</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;g-name&quot;</span>&gt;</span> &#123;&#123; goods.name &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;g-desc&quot;</span>&gt;</span> &#123;&#123; goods.desc &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;g-price&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> &#123;&#123; goods.oldPrice &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> &#123;&#123; goods.price &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;g-service&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>促销<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>12月好物放送，App领券购买直降120元<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>服务<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>无忧退货<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>快速退款<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>免费包邮<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>了解详情<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><div class="note note-info">            <p><code>oldPrice</code>部分应该加个<code>v-if</code>以更符合现实情况。</p>          </div><h3 id="sku组件"><a href="#sku组件" class="headerlink" title="sku组件"></a>sku组件</h3><p>这部分在课程中作为选修部分，没有多讲。<a href="#sku%E7%BB%84%E4%BB%B6-1">点击查看源码</a></p><h3 id="热榜组件"><a href="#热榜组件" class="headerlink" title="热榜组件"></a>热榜组件</h3><p>侧栏显示热榜之类的牛皮藓是很多网站惯用的功能。此处能显示24小时热榜和周热榜</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- 24热榜+专题推荐 --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-aside&quot;</span>&gt;</span><br>    <span class="hljs-comment">&lt;!-- 24小时 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">DetailHot</span> <span class="hljs-attr">:hotType</span>=<span class="hljs-string">&quot;1&quot;</span> /&gt;</span><br>    <span class="hljs-comment">&lt;!-- 周 --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">DetailHot</span> <span class="hljs-attr">:hotType</span>=<span class="hljs-string">&quot;2&quot;</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br></code></pre></td></tr></table></figure><p>其中的<code>&lt;Detail /&gt;</code>为components文件夹下的<code>DetailHot.vue</code>组件，<a href="#%E7%83%AD%E6%A6%9C">源码如下</a></p><h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><h3 id="页面源码"><a href="#页面源码" class="headerlink" title="页面源码"></a>页面源码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; getDetail &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/detail&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">DetailHot</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/DetailHot.vue&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ElMessage</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;element-plus&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCartStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/stores/cartStore&quot;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> cartStore = <span class="hljs-title function_">useCartStore</span>()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> goods = <span class="hljs-title function_">ref</span>(&#123;&#125;)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getGoods</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getDetail</span>(route.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)</span><br><span class="language-javascript">    goods.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getGoods</span>())</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">let</span> skuObj = &#123;&#125;</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">skuChange</span> = (<span class="hljs-params">sku</span>) =&gt; &#123;</span><br><span class="language-javascript">    skuObj = sku</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">countChange</span> = (<span class="hljs-params">count</span>) =&gt; &#123;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">addCart</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (skuObj.<span class="hljs-property">skuId</span>) &#123;</span><br><span class="language-javascript">        cartStore.<span class="hljs-title function_">addCart</span>(&#123;</span><br><span class="language-javascript">            <span class="hljs-attr">id</span>: goods.<span class="hljs-property">value</span>.<span class="hljs-property">id</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">name</span>: goods.<span class="hljs-property">value</span>.<span class="hljs-property">name</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">picture</span>: goods.<span class="hljs-property">value</span>.<span class="hljs-property">mainPictures</span>[<span class="hljs-number">0</span>],</span><br><span class="language-javascript">            <span class="hljs-attr">price</span>: goods.<span class="hljs-property">value</span>.<span class="hljs-property">price</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">count</span>: count.<span class="hljs-property">value</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">skuId</span>: skuObj.<span class="hljs-property">skuId</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">attrsText</span>: skuObj.<span class="hljs-property">specsText</span>,</span><br><span class="language-javascript">            <span class="hljs-attr">selected</span>: <span class="hljs-literal">true</span></span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">    &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-title class_">ElMessage</span>.<span class="hljs-title function_">warning</span>(<span class="hljs-string">&#x27;请选择规格&#x27;</span>)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;xtx-goods-page&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;goods.details&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bread-container&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;&gt;&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; path: &#x27;/&#x27; &#125;&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; path: `/category/$&#123;goods.categories[1].id&#125;` &#125;&quot;</span>&gt;</span>&#123;&#123;<br>                        goods.categories[1].name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; path: `/category/sub/$&#123;goods.categories[0].id&#125;` &#125;&quot;</span>&gt;</span>&#123;&#123;<br>                        goods.categories[0].name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span>&gt;</span>&#123;&#123; goods.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;info-container&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-info&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;media&quot;</span>&gt;</span><br>                        <span class="hljs-comment">&lt;!-- 图片预览区 --&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">ImageView</span> <span class="hljs-attr">:image-list</span>=<span class="hljs-string">&quot;goods.mainPictures&quot;</span> /&gt;</span><br>                        <span class="hljs-comment">&lt;!-- 统计数量 --&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-sales&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>销量人气<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> &#123;&#123; goods.salesCount &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-task-filling&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>销量人气<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>商品评价<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> &#123;&#123; goods.commentCount &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-comment-filling&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>查看评价<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>收藏人气<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> &#123;&#123; goods.collectCount &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-favorite-filling&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>收藏商品<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>品牌信息<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span> &#123;&#123; goods.brand.name &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-dynamic-filling&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>品牌主页<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;spec&quot;</span>&gt;</span><br>                        <span class="hljs-comment">&lt;!-- 商品信息区 --&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;g-name&quot;</span>&gt;</span> &#123;&#123; goods.name &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;g-desc&quot;</span>&gt;</span> &#123;&#123; goods.desc &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;g-price&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> &#123;&#123; goods.oldPrice &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span> &#123;&#123; goods.price &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;g-service&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>促销<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span>12月好物放送，App领券购买直降120元<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>服务<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>无忧退货<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>快速退款<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>免费包邮<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>了解详情<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                        <span class="hljs-comment">&lt;!-- sku组件 --&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">XtxSku</span> <span class="hljs-attr">:goods</span>=<span class="hljs-string">&quot;goods&quot;</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;skuChange&quot;</span> /&gt;</span><br>                        <span class="hljs-comment">&lt;!-- 数据组件 --&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">el-input-number</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;count&quot;</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;countChange&quot;</span> /&gt;</span><br>                        <span class="hljs-comment">&lt;!-- 按钮组件 --&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">el-button</span> <span class="hljs-attr">size</span>=<span class="hljs-string">&quot;large&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;btn&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;addCart&quot;</span>&gt;</span><br>                                加入购物车<br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">el-button</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-footer&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-article&quot;</span>&gt;</span><br>                    <span class="hljs-comment">&lt;!-- 商品详情 --&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-tabs&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">a</span>&gt;</span>商品详情<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-detail&quot;</span>&gt;</span><br>                            <span class="hljs-comment">&lt;!-- 属性 --&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;attrs&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in goods.details.properties&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.value&quot;</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;dt&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                    <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;dd&quot;</span>&gt;</span>&#123;&#123; item.value &#125;&#125; <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>                            <span class="hljs-comment">&lt;!-- 图片 --&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;img in goods.details.pictures&quot;</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;img&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;img&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- 24热榜+专题推荐 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-aside&quot;</span>&gt;</span><br>                    <span class="hljs-comment">&lt;!-- 24小时 --&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">DetailHot</span> <span class="hljs-attr">:hotType</span>=<span class="hljs-string">&quot;1&quot;</span> /&gt;</span><br>                    <span class="hljs-comment">&lt;!-- 周 --&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">DetailHot</span> <span class="hljs-attr">:hotType</span>=<span class="hljs-string">&quot;2&quot;</span> /&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&#x27;scss&#x27;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.xtx-goods-page</span> &#123;</span><br><span class="language-css">    <span class="hljs-selector-class">.goods-info</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">min-height</span>: <span class="hljs-number">600px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.media</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">580px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">600px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">30px</span> <span class="hljs-number">50px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.spec</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">30px</span> <span class="hljs-number">30px</span> <span class="hljs-number">30px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.goods-footer</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.goods-article</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">940px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.goods-aside</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">280px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">min-height</span>: <span class="hljs-number">1000px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.goods-tabs</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">min-height</span>: <span class="hljs-number">600px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.goods-warn</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">min-height</span>: <span class="hljs-number">600px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.number-box</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.label</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">60px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.g-name</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">22px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.g-desc</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.g-price</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">::before</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">content</span>: <span class="hljs-string">&quot;¥&quot;</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:first</span>-child &#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">                <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">22px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                <span class="hljs-attribute">text-decoration</span>: line-through;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.g-service</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">10px</span> <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">dl</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">            <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">dt</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">dd</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css"></span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                    <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                        &amp;<span class="hljs-selector-pseudo">::before</span> &#123;</span><br><span class="language-css">                            <span class="hljs-attribute">content</span>: <span class="hljs-string">&quot;•&quot;</span>;</span><br><span class="language-css">                            <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                            <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">2px</span>;</span><br><span class="language-css">                        &#125;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css"></span><br><span class="language-css">                    <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.goods-sales</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">140px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css"></span><br><span class="language-css">            ~<span class="hljs-selector-tag">li</span><span class="hljs-selector-pseudo">::after</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">                <span class="hljs-attribute">top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                <span class="hljs-attribute">height</span>: <span class="hljs-number">60px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">border-left</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e4e4e4</span>;</span><br><span class="language-css">                <span class="hljs-attribute">content</span>: <span class="hljs-string">&quot;&quot;</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:first</span>-child &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">2</span>) &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">                    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                    <span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">2px</span>;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css"></span><br><span class="language-css">                    &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                        <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.goods-tabs</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">min-height</span>: <span class="hljs-number">600px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">nav</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">40px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css"></span><br><span class="language-css">            &gt;<span class="hljs-selector-tag">span</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.goods-detail</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.attrs</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">flex-wrap</span>: wrap;</span><br><span class="language-css">        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.dt</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.dd</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    &gt;<span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.btn</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.bread-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">25px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="图片组件"><a href="#图片组件" class="headerlink" title="图片组件"></a>图片组件</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useMouseInElement &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vueuse/core&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; ref, watch &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 适配图片列表</span></span><br><span class="language-javascript"><span class="hljs-title function_">defineProps</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">imageList</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Array</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> []</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 小图切换大图显示</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> activeIndex = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">enterHandler</span> = (<span class="hljs-params">i</span>) =&gt; &#123;</span><br><span class="language-javascript">    activeIndex.<span class="hljs-property">value</span> = i</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 获取鼠标相对位置</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> target = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">null</span>)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; elementX, elementY, isOutside &#125; = <span class="hljs-title function_">useMouseInElement</span>(target)</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 滑块随鼠标移动</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> left = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>), top = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>), positionX = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>), positionY = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)</span><br><span class="language-javascript"><span class="hljs-title function_">watch</span>([elementX, elementY, isOutside], <span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (isOutside.<span class="hljs-property">value</span>) <span class="hljs-keyword">return</span></span><br><span class="language-javascript">    <span class="hljs-comment">// 有效范围内</span></span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (elementX.<span class="hljs-property">value</span> &gt; <span class="hljs-number">100</span> &amp;&amp; elementX.<span class="hljs-property">value</span> &lt; <span class="hljs-number">300</span>) &#123; left.<span class="hljs-property">value</span> = elementX.<span class="hljs-property">value</span> - <span class="hljs-number">100</span> &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (elementY.<span class="hljs-property">value</span> &gt; <span class="hljs-number">100</span> &amp;&amp; elementY.<span class="hljs-property">value</span> &lt; <span class="hljs-number">300</span>) &#123; top.<span class="hljs-property">value</span> = elementY.<span class="hljs-property">value</span> - <span class="hljs-number">100</span> &#125;</span><br><span class="language-javascript">    <span class="hljs-comment">// 边界</span></span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (elementX.<span class="hljs-property">value</span> &gt; <span class="hljs-number">300</span>) &#123; left.<span class="hljs-property">value</span> = <span class="hljs-number">200</span> &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (elementX.<span class="hljs-property">value</span> &lt; <span class="hljs-number">100</span>) &#123; left.<span class="hljs-property">value</span> = <span class="hljs-number">0</span> &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (elementY.<span class="hljs-property">value</span> &gt; <span class="hljs-number">300</span>) &#123; top.<span class="hljs-property">value</span> = <span class="hljs-number">200</span> &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (elementY.<span class="hljs-property">value</span> &lt; <span class="hljs-number">100</span>) &#123; top.<span class="hljs-property">value</span> = <span class="hljs-number">0</span> &#125;</span><br><span class="language-javascript">    <span class="hljs-comment">// 控制大图的显示</span></span><br><span class="language-javascript">    positionX.<span class="hljs-property">value</span> = -left.<span class="hljs-property">value</span> * <span class="hljs-number">2</span></span><br><span class="language-javascript">    positionY.<span class="hljs-property">value</span> = -top.<span class="hljs-property">value</span> * <span class="hljs-number">2</span></span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-image&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;middle&quot;</span> <span class="hljs-attr">ref</span>=<span class="hljs-string">&quot;target&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;imageList[activeIndex]&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;layer&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;!isOutside&quot;</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;&#123; left: `$&#123;left&#125;px`, top: `$&#123;top&#125;px` &#125;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;small&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;(img, i) in imageList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;i&quot;</span> @<span class="hljs-attr">mouseenter</span>=<span class="hljs-string">&quot;enterHandler(i)&quot;</span></span><br><span class="hljs-tag">                <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123; active: i === activeIndex &#125;&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;img&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;large&quot;</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;[&#123;</span></span><br><span class="hljs-string"><span class="hljs-tag">            backgroundImage: `url($&#123;imageList[activeIndex]&#125;)`,</span></span><br><span class="hljs-string"><span class="hljs-tag">            backgroundPositionX: `$&#123;positionX&#125;px`,</span></span><br><span class="hljs-string"><span class="hljs-tag">            backgroundPositionY: `$&#123;positionY&#125;px`,</span></span><br><span class="hljs-string"><span class="hljs-tag">        &#125;,]&quot;</span> <span class="hljs-attr">v-show</span>=<span class="hljs-string">&quot;!isOutside&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.goods-image</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">480px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.middle</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.large</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">left</span>: <span class="hljs-number">412px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">400px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">400px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">500</span>;</span><br><span class="language-css">        <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">10px</span> <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.1</span>);</span><br><span class="language-css">        <span class="hljs-attribute">background-repeat</span>: no-repeat;</span><br><span class="language-css">        // 背景图:盒子的大小 = <span class="hljs-number">2</span>:<span class="hljs-number">1</span>  将来控制背景图的移动来实现放大的效果查看 background-position</span><br><span class="language-css">        background-size: <span class="hljs-number">800px</span> <span class="hljs-number">800px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f8f8f8</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.layer</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.2</span>);</span><br><span class="language-css">        // 绝对定位 然后跟随咱们鼠标控制<span class="hljs-attribute">left</span>和<span class="hljs-attribute">top</span>属性就可以让滑块移动起来</span><br><span class="language-css">        <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.small</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">80px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">68px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">68px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">12px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:hover</span>,</span><br><span class="language-css">            &amp;<span class="hljs-selector-class">.active</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">border</span>: <span class="hljs-number">2px</span> solid $xtxColor;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="Sku组件"><a href="#Sku组件" class="headerlink" title="Sku组件"></a>Sku组件</h3><p>vue部分</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-sku&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dl</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in goods.specs&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;val in item.values&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;val.name&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123; selected: val.selected, disabled: val.disabled &#125;&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clickSpecs(item, val)&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;val.picture&quot;</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;val.picture&quot;</span> /&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123; selected: val.selected, disabled: val.disabled &#125;&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;clickSpecs(item, val)&quot;</span> <span class="hljs-attr">v-else</span>&gt;</span>&#123;&#123;<br>              val.name<br>          &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; watchEffect &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> getPowerSet <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./power-set&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> spliter = <span class="hljs-string">&#x27;★&#x27;</span></span><br><span class="language-javascript"><span class="hljs-comment">// 根据skus数据得到路径字典对象</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getPathMap</span> = (<span class="hljs-params">skus</span>) =&gt; &#123;</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> pathMap = &#123;&#125;</span><br><span class="language-javascript">  <span class="hljs-keyword">if</span> (skus &amp;&amp; skus.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) &#123;</span><br><span class="language-javascript">    skus.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">sku</span> =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-comment">// 1. 过滤出有库存有效的sku</span></span><br><span class="language-javascript">      <span class="hljs-keyword">if</span> (sku.<span class="hljs-property">inventory</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// 2. 得到sku属性值数组</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> specs = sku.<span class="hljs-property">specs</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">spec</span> =&gt;</span> spec.<span class="hljs-property">valueName</span>)</span><br><span class="language-javascript">        <span class="hljs-comment">// 3. 得到sku属性值数组的子集</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> powerSet = <span class="hljs-title function_">getPowerSet</span>(specs)</span><br><span class="language-javascript">        <span class="hljs-comment">// 4. 设置给路径字典对象</span></span><br><span class="language-javascript">        powerSet.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">set</span> =&gt;</span> &#123;</span><br><span class="language-javascript">          <span class="hljs-keyword">const</span> key = set.<span class="hljs-title function_">join</span>(spliter)</span><br><span class="language-javascript">          <span class="hljs-comment">// 如果没有就先初始化一个空数组</span></span><br><span class="language-javascript">          <span class="hljs-keyword">if</span> (!pathMap[key]) &#123;</span><br><span class="language-javascript">            pathMap[key] = []</span><br><span class="language-javascript">          &#125;</span><br><span class="language-javascript">          pathMap[key].<span class="hljs-title function_">push</span>(sku.<span class="hljs-property">id</span>)</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">  <span class="hljs-keyword">return</span> pathMap</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 初始化禁用状态</span></span><br><span class="language-javascript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">initDisabledStatus</span> (specs, pathMap) &#123;</span><br><span class="language-javascript">  <span class="hljs-keyword">if</span> (specs &amp;&amp; specs.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span>) &#123;</span><br><span class="language-javascript">    specs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">spec</span> =&gt;</span> &#123;</span><br><span class="language-javascript">      spec.<span class="hljs-property">values</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// 设置禁用状态</span></span><br><span class="language-javascript">        val.<span class="hljs-property">disabled</span> = !pathMap[val.<span class="hljs-property">name</span>]</span><br><span class="language-javascript">      &#125;)</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 得到当前选中规格集合</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getSelectedArr</span> = (<span class="hljs-params">specs</span>) =&gt; &#123;</span><br><span class="language-javascript">  <span class="hljs-keyword">const</span> selectedArr = []</span><br><span class="language-javascript">  specs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">spec, index</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> selectedVal = spec.<span class="hljs-property">values</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> val.<span class="hljs-property">selected</span>)</span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (selectedVal) &#123;</span><br><span class="language-javascript">      selectedArr[index] = selectedVal.<span class="hljs-property">name</span></span><br><span class="language-javascript">    &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">      selectedArr[index] = <span class="hljs-literal">undefined</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript">  <span class="hljs-keyword">return</span> selectedArr</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 更新按钮的禁用状态</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">updateDisabledStatus</span> = (<span class="hljs-params">specs, pathMap</span>) =&gt; &#123;</span><br><span class="language-javascript">  <span class="hljs-comment">// 遍历每一种规格</span></span><br><span class="language-javascript">  specs.<span class="hljs-title function_">forEach</span>(<span class="hljs-function">(<span class="hljs-params">item, i</span>) =&gt;</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// 拿到当前选择的项目</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> selectedArr = <span class="hljs-title function_">getSelectedArr</span>(specs)</span><br><span class="language-javascript">    <span class="hljs-comment">// 遍历每一个按钮</span></span><br><span class="language-javascript">    item.<span class="hljs-property">values</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">val</span> =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">if</span> (!val.<span class="hljs-property">selected</span>) &#123;</span><br><span class="language-javascript">        selectedArr[i] = val.<span class="hljs-property">name</span></span><br><span class="language-javascript">        <span class="hljs-comment">// 去掉undefined之后组合成key</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> key = selectedArr.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value).<span class="hljs-title function_">join</span>(spliter)</span><br><span class="language-javascript">        val.<span class="hljs-property">disabled</span> = !pathMap[key]</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">  &#125;)</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;XtxGoodSku&#x27;</span>,</span><br><span class="language-javascript">  <span class="hljs-attr">props</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// specs:所有的规格信息  skus:所有的sku组合</span></span><br><span class="language-javascript">    <span class="hljs-attr">goods</span>: &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> (&#123; <span class="hljs-attr">specs</span>: [], <span class="hljs-attr">skus</span>: [] &#125;)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  <span class="hljs-attr">emits</span>: [<span class="hljs-string">&#x27;change&#x27;</span>],</span><br><span class="language-javascript">  setup (props, &#123; emit &#125;) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">let</span> pathMap = &#123;&#125;</span><br><span class="language-javascript">    <span class="hljs-title function_">watchEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-comment">// 得到所有字典集合</span></span><br><span class="language-javascript">      pathMap = <span class="hljs-title function_">getPathMap</span>(props.<span class="hljs-property">goods</span>.<span class="hljs-property">skus</span>)</span><br><span class="language-javascript">      <span class="hljs-comment">// 组件初始化的时候更新禁用状态</span></span><br><span class="language-javascript">      <span class="hljs-title function_">initDisabledStatus</span>(props.<span class="hljs-property">goods</span>.<span class="hljs-property">specs</span>, pathMap)</span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> <span class="hljs-title function_">clickSpecs</span> = (<span class="hljs-params">item, val</span>) =&gt; &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">if</span> (val.<span class="hljs-property">disabled</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span></span><br><span class="language-javascript">      <span class="hljs-comment">// 选中与取消选中逻辑</span></span><br><span class="language-javascript">      <span class="hljs-keyword">if</span> (val.<span class="hljs-property">selected</span>) &#123;</span><br><span class="language-javascript">        val.<span class="hljs-property">selected</span> = <span class="hljs-literal">false</span></span><br><span class="language-javascript">      &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">        item.<span class="hljs-property">values</span>.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">bv</span> =&gt;</span> &#123; bv.<span class="hljs-property">selected</span> = <span class="hljs-literal">false</span> &#125;)</span><br><span class="language-javascript">        val.<span class="hljs-property">selected</span> = <span class="hljs-literal">true</span></span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">      <span class="hljs-comment">// 点击之后再次更新选中状态</span></span><br><span class="language-javascript">      <span class="hljs-title function_">updateDisabledStatus</span>(props.<span class="hljs-property">goods</span>.<span class="hljs-property">specs</span>, pathMap)</span><br><span class="language-javascript">      <span class="hljs-comment">// 把选择的sku信息传出去给父组件</span></span><br><span class="language-javascript">      <span class="hljs-comment">// 触发change事件将sku数据传递出去</span></span><br><span class="language-javascript">      <span class="hljs-keyword">const</span> selectedArr = <span class="hljs-title function_">getSelectedArr</span>(props.<span class="hljs-property">goods</span>.<span class="hljs-property">specs</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> value)</span><br><span class="language-javascript">      <span class="hljs-comment">// 如果选中得规格数量和传入得规格总数相等则传出完整信息(都选择了)</span></span><br><span class="language-javascript">      <span class="hljs-comment">// 否则传出空对象</span></span><br><span class="language-javascript">      <span class="hljs-keyword">if</span> (selectedArr.<span class="hljs-property">length</span> === props.<span class="hljs-property">goods</span>.<span class="hljs-property">specs</span>.<span class="hljs-property">length</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-comment">// 从路径字典中得到skuId</span></span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> skuId = pathMap[selectedArr.<span class="hljs-title function_">join</span>(spliter)][<span class="hljs-number">0</span>]</span><br><span class="language-javascript">        <span class="hljs-keyword">const</span> sku = props.<span class="hljs-property">goods</span>.<span class="hljs-property">skus</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">sku</span> =&gt;</span> sku.<span class="hljs-property">id</span> === skuId)</span><br><span class="language-javascript">        <span class="hljs-comment">// 传递数据给父组件</span></span><br><span class="language-javascript">        <span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;change&#x27;</span>, &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">skuId</span>: sku.<span class="hljs-property">id</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">price</span>: sku.<span class="hljs-property">price</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">oldPrice</span>: sku.<span class="hljs-property">oldPrice</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">inventory</span>: sku.<span class="hljs-property">inventory</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">specsText</span>: sku.<span class="hljs-property">specs</span>.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">p, n</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;p&#125;</span> <span class="hljs-subst">$&#123;n.name&#125;</span>：<span class="hljs-subst">$&#123;n.valueName&#125;</span>`</span>, <span class="hljs-string">&#x27;&#x27;</span>).<span class="hljs-title function_">trim</span>()</span><br><span class="language-javascript">        &#125;)</span><br><span class="language-javascript">      &#125; <span class="hljs-keyword">else</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-title function_">emit</span>(<span class="hljs-string">&#x27;change&#x27;</span>, &#123;&#125;)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> &#123; clickSpecs &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-keyword">@mixin</span> sku-state-mixin &#123;</span><br><span class="language-css">  <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e4e4e4</span>;</span><br><span class="language-css">  <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">  <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="language-css"></span><br><span class="language-css">  &amp;<span class="hljs-selector-class">.selected</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">border-color</span>: $xtxColor;</span><br><span class="language-css">  &#125;</span><br><span class="language-css"></span><br><span class="language-css">  &amp;<span class="hljs-selector-class">.disabled</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0.6</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border-style</span>: dashed;</span><br><span class="language-css">    <span class="hljs-attribute">cursor</span>: not-allowed;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.goods-sku</span> &#123;</span><br><span class="language-css">  <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">  <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">  <span class="hljs-selector-tag">dl</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">    <span class="hljs-attribute">padding-bottom</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">dt</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">      <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">dd</span> &#123;</span><br><span class="language-css">      <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">      <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css"></span><br><span class="language-css">      &gt;<span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">4px</span>;</span><br><span class="language-css">        <span class="hljs-keyword">@include</span> sku-state-mixin;</span><br><span class="language-css">      &#125;</span><br><span class="language-css"></span><br><span class="language-css">      &gt;<span class="hljs-selector-tag">span</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: inline-block;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">30px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">28px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">20px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">4px</span>;</span><br><span class="language-css">        <span class="hljs-keyword">@include</span> sku-state-mixin;</span><br><span class="language-css">      &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">  &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>js部分</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">bwPowerSet</span> (originalSet) &#123;<br>  <span class="hljs-keyword">const</span> subSets = []<br>  <span class="hljs-keyword">const</span> numberOfCombinations = <span class="hljs-number">2</span> ** originalSet.<span class="hljs-property">length</span><br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> combinationIndex = <span class="hljs-number">0</span>; combinationIndex &lt; numberOfCombinations; combinationIndex += <span class="hljs-number">1</span>) &#123;<br>    <span class="hljs-keyword">const</span> subSet = []<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> setElementIndex = <span class="hljs-number">0</span>; setElementIndex &lt; originalSet.<span class="hljs-property">length</span>; setElementIndex += <span class="hljs-number">1</span>) &#123;<br>      <span class="hljs-keyword">if</span> (combinationIndex &amp; (<span class="hljs-number">1</span> &lt;&lt; setElementIndex)) &#123;<br>        subSet.<span class="hljs-title function_">push</span>(originalSet[setElementIndex])<br>      &#125;<br>    &#125;<br>    subSets.<span class="hljs-title function_">push</span>(subSet)<br>  &#125;<br>  <span class="hljs-keyword">return</span> subSets<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="热榜"><a href="#热榜" class="headerlink" title="热榜"></a>热榜</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; getHotGoodsAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/detail&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; computed, onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> props = <span class="hljs-title function_">defineProps</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">hotType</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Number</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-variable constant_">TYPEMAP</span> = &#123;</span><br><span class="language-javascript">    <span class="hljs-number">1</span>: <span class="hljs-string">&#x27;24小时热榜&#x27;</span>,</span><br><span class="language-javascript">    <span class="hljs-number">2</span>: <span class="hljs-string">&#x27;周热榜&#x27;</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> title = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-variable constant_">TYPEMAP</span>[props.<span class="hljs-property">hotType</span>])</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> hotList = <span class="hljs-title function_">ref</span>([])</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getHotList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getHotGoodsAPI</span>(&#123;</span><br><span class="language-javascript">        <span class="hljs-attr">id</span>: route.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>: props.<span class="hljs-property">hotType</span></span><br><span class="language-javascript">    &#125;)</span><br><span class="language-javascript">    hotList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getHotList</span>())</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-hot&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>&#123;&#123; title &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-item&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in hotList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;item.picture&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;name ellipsis&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;desc ellipsis&quot;</span>&gt;</span>&#123;&#123; item.desc &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;price&quot;</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span>&#123;&#123; item.price &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.goods-hot</span> &#123;</span><br><span class="language-css">    <span class="hljs-selector-tag">h3</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: $helpColor;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">70px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">25px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">font-weight</span>: normal;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.goods-item</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">30px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">160px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">160px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.name</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.desc</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">29px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.price</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;详情页需要进行商品展示、规格选择、加入购物车等多种功能的展示。在View&amp;#x2F;Detail文件夹下新建&lt;code&gt;index.vue&lt;/code&gt;和components文件夹。&lt;a href=&quot;#%E9%A1%B5%E9%9D%A2%E6%BA%90%E7%A0%81</summary>
      
    
    
    
    <category term="前端" scheme="http://example.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>vue实践之商场app - 一级分类页面</title>
    <link href="http://example.com/2025/05/03/mall-front-4/"/>
    <id>http://example.com/2025/05/03/mall-front-4/</id>
    <published>2025-05-03T12:22:48.000Z</published>
    <updated>2025-05-06T08:35:45.220Z</updated>
    
    <content type="html"><![CDATA[<p>接下来是对一级分类页面中各种种类的菜单进行配置。其实网页在前面的Layout部分已经配置好</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-comment">&lt;!-- ... --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">active-class</span>=<span class="hljs-string">&quot;active&quot;</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;`/category/$&#123;item.id&#125;`&quot;</span>&gt;</span><br>    &#123;&#123; item.name &#125;&#125;<br><span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br><span class="hljs-comment">&lt;!-- ... --&gt;</span><br></code></pre></td></tr></table></figure><p>里面的<code>/category/$&#123;item.id&#125;</code>就是要跳转的网页，接下来就是相关的配置。</p><p>在Category文件夹下新建文件夹composables和文件<code>index.vue</code>，<a href="#category">文件代码如下</a></p><p>代码现在还不能跑通，还需要一些说明，添加一些脚本文件。</p><h2 id="面包屑导航"><a href="#面包屑导航" class="headerlink" title="面包屑导航"></a>面包屑导航</h2><p>面包屑导航即在页面上部的导航栏，el-element中已经提供了面包屑组件，直接拿来用即可</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;&gt;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; path: &#x27;/&#x27; &#125;&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span>&gt;</span>&#123;&#123; categoryData.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="/2025/05/03/mall-front-4/bread.png" alt="效果图"></p><h2 id="轮播图"><a href="#轮播图" class="headerlink" title="轮播图"></a>轮播图</h2><p>分页也需要实现和主页一样的banner轮播图（不过播的内容有些许不一样），因为需求相似，因此调用的内容也相似</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">el-carousel</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;500px&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">el-carousel-item</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in bannerList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;item.imgUrl&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">el-carousel-item</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">el-carousel</span>&gt;</span><br></code></pre></td></tr></table></figure><p>在composable文件夹下新建文件<code>useBanner.js</code>，代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref, onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span><br><span class="hljs-keyword">import</span> &#123; getBannerAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/home&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useBanner</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> bannerList = <span class="hljs-title function_">ref</span>([])<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getBanner</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getBannerAPI</span>(&#123;<br>            <span class="hljs-attr">distributeSite</span>: <span class="hljs-string">&#x27;2&#x27;</span><br>        &#125;)<br>        bannerList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span><br>    &#125;<br><br>    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getBanner</span>())<br>    <span class="hljs-keyword">return</span> &#123;<br>        bannerList<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>此处传递的参数是2.</p><p><img src="/2025/05/03/mall-front-4/banner.png" alt="效果图"></p><h2 id="解决路由缓存问题"><a href="#解决路由缓存问题" class="headerlink" title="解决路由缓存问题"></a>解决路由缓存问题</h2><p>在点击一级分类时，默认还不能直接跳转，而是等待刷新。因此需要一个监听到路由变化并立即更新网站的脚本。在composables文件夹下新建文件<code>useCategory.js</code>，代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; getCategoryAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/category&#x27;</span><br><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> &#123; onBeforeRouteUpdate &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">useCategory</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> categoryData = <span class="hljs-title function_">ref</span>(&#123;&#125;)<br>    <span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()<br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getCategory</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">id = route.params.id</span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getCategoryAPI</span>(id)<br>        categoryData.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span><br>    &#125;<br><br>    <span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getCategory</span>())<br><br>    <span class="hljs-title function_">onBeforeRouteUpdate</span>(<span class="hljs-function">(<span class="hljs-params">to</span>) =&gt;</span> &#123;<br>        <span class="hljs-title function_">getCategory</span>(to.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)<br>    &#125;)<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        categoryData<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这里定义了一个函数<code>useCategory</code>，当页面没有变化时获取的是对当前网页内容的信息，当网页路由发生变化时，vue-router的<code>onBeforeRouteUpdate</code>函数检测到这个变化，并改变接口函数传递的参数值，从而实现重新渲染。</p><h2 id="二级分类页面"><a href="#二级分类页面" class="headerlink" title="二级分类页面"></a>二级分类页面</h2><p>现在只完成了一级分类页面和大屏，下面的细致分类还没有做。在SubCategory文件夹下新建<code>index.vue</code>文件，<a href="#subcategory">代码如下</a></p><p>其中的面包屑导航上面已经做过，这里不做赘述。<code>sub-container</code>部分的商品需要调取相关接口。在apis文件夹下的<code>category.js</code>文件中新增接口</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getCategoryFilterAPI</span> = (<span class="hljs-params">id</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        url :<span class="hljs-string">&#x27;/category/sub/filter&#x27;</span>,<br>        <span class="hljs-attr">params</span>: &#123;<br>            id<br>        &#125;<br>    &#125;)<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-title function_">getSubCategoryAPI</span> = (<span class="hljs-params">data</span>) =&gt; &#123;<br>    <span class="hljs-keyword">return</span> request (&#123;<br>        <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/category/goods/temporary&#x27;</span>,<br>        <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>        data<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="列表筛选功能实现"><a href="#列表筛选功能实现" class="headerlink" title="列表筛选功能实现"></a>列表筛选功能实现</h3><p>element-plus中的el-tabs已经提供了切换列表时的发生的事件<code>v-model=&quot;reqData.sortField&quot; @tab-change=&quot;tabChange&quot;</code>，即在切换时，<code>reqData.sortField</code>发生改变，并触发<code>tabChange</code>方法。该方法将Page置为1（与后面的无限加载配合）。对象的值发生改变，再次请求数据。</p><div class="note note-info">            <p>这种点击一次就向后端请求一次的做法在数据量较大时比较适用。在数据量较小时，直接在前端排序应该也足够了。</p>          </div><h3 id="无限加载功能实现"><a href="#无限加载功能实现" class="headerlink" title="无限加载功能实现"></a>无限加载功能实现</h3><p>看似无限加载，其实只是把不同的页面拼接在一起了。使用element-plus的<code>v-infinite-scroll</code>指令监听是否满足触底条件。不满足条件时页数加1加载下一页数据。最后，当res获取的值为空值时停止监听，无限加载结束。</p><p>其中<code>goodsList.value = [...goodsList.value,...res.result.items]</code>是把goodsList拆开进行组合，将新加入的数据也并入这个数组中。</p><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><h3 id="category"><a href="#category" class="headerlink" title="category"></a>category</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">GoodsItem</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../Home/components/GoodsItem.vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCategory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./composables/useCategory&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useBanner &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./composables/useBanner&#x27;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; categoryData &#125; = <span class="hljs-title function_">useCategory</span>()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; bannerList &#125; = <span class="hljs-title function_">useBanner</span>()</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;top-category&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container m-top-20&quot;</span>&gt;</span><br>            <span class="hljs-comment">&lt;!-- 面包屑 --&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bread-container&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;&gt;&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; path: &#x27;/&#x27; &#125;&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span>&gt;</span>&#123;&#123; categoryData.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- 轮播图 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home-banner&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">el-carousel</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;500px&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">el-carousel-item</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in bannerList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;item.imgUrl&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">el-carousel-item</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">el-carousel</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;sub-list&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>全部分类<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;i in categoryData.children&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;i.id&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;`/category/sub/$&#123;i.id&#125;`&quot;</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;i.picture&quot;</span> /&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; i.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ref-goods&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in categoryData.children&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;head&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>- &#123;&#123; item.name &#125;&#125;-<span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;body&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">GoodsItem</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;good in item.goods&quot;</span> <span class="hljs-attr">:goods</span>=<span class="hljs-string">&quot;good&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;good.id&quot;</span> /&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.top-category</span> &#123;</span><br><span class="language-css">    <span class="hljs-selector-tag">h3</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">28px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">        <span class="hljs-attribute">font-weight</span>: normal;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">100px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.sub-list</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">ul</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">32px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">flex-wrap</span>: wrap;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">168px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">height</span>: <span class="hljs-number">160px</span>;</span><br><span class="language-css"></span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">                    <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">                    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                    <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css"></span><br><span class="language-css">                    <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css"></span><br><span class="language-css">                    &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.ref-goods</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.head</span> &#123;</span><br><span class="language-css">            <span class="hljs-selector-class">.xtx-more</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">                <span class="hljs-attribute">top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">right</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.tag</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">                <span class="hljs-attribute">top</span>: -<span class="hljs-number">20px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.body</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">            <span class="hljs-attribute">justify-content</span>: space-around;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">40px</span> <span class="hljs-number">30px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.bread-container</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">25px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.home-banner</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">1240px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="subCategory"><a href="#subCategory" class="headerlink" title="subCategory"></a>subCategory</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; getCategoryFilterAPI, getSubCategoryAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../apis/category&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useRoute &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">GoodsItem</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../Home/components/GoodsItem.vue&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 面包屑导航数据</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> categoryData = <span class="hljs-title function_">ref</span>(&#123;&#125;)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> route = <span class="hljs-title function_">useRoute</span>()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getCategoryData</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getCategoryFilterAPI</span>(route.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>)</span><br><span class="language-javascript">    categoryData.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getCategoryData</span>())</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 基础列表数据</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> goodsList = <span class="hljs-title function_">ref</span>([])</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> reqData = <span class="hljs-title function_">ref</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">categoryId</span>: route.<span class="hljs-property">params</span>.<span class="hljs-property">id</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">page</span>: <span class="hljs-number">1</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">pageSize</span>: <span class="hljs-number">20</span>,</span><br><span class="language-javascript">    <span class="hljs-attr">sortField</span>: <span class="hljs-string">&#x27;publishTime&#x27;</span></span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getGoodsList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getSubCategoryAPI</span>(reqData.<span class="hljs-property">value</span>)</span><br><span class="language-javascript">    goodsList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span>.<span class="hljs-property">items</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getGoodsList</span>())</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// tab切换</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">tabChange</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    reqData.<span class="hljs-property">value</span>.<span class="hljs-property">page</span> = <span class="hljs-number">1</span></span><br><span class="language-javascript">    <span class="hljs-title function_">getGoodsList</span>()</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 无限加载</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> disabled = <span class="hljs-title function_">ref</span>(<span class="hljs-literal">false</span>)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">load</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    reqData.<span class="hljs-property">value</span>.<span class="hljs-property">page</span>++</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getSubCategoryAPI</span>(reqData.<span class="hljs-property">value</span>)</span><br><span class="language-javascript">    goodsList.<span class="hljs-property">value</span> = [...goodsList.<span class="hljs-property">value</span>,...res.<span class="hljs-property">result</span>.<span class="hljs-property">items</span>]</span><br><span class="language-javascript">    <span class="hljs-comment">// 停止监听</span></span><br><span class="language-javascript">    <span class="hljs-keyword">if</span> (res.<span class="hljs-property">result</span>.<span class="hljs-property">items</span>.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) &#123;</span><br><span class="language-javascript">        disabled.<span class="hljs-property">value</span> = <span class="hljs-literal">true</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container &quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 面包屑 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bread-container&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">&quot;&gt;&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; path: &#x27;/&#x27; &#125;&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;&#123; path: `/category/$&#123;categoryData.parentId&#125;` &#125;&quot;</span>&gt;</span>&#123;&#123; categoryData.parentName<br>                    &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-breadcrumb-item</span>&gt;</span>&#123;&#123; categoryData.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb-item</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-breadcrumb</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;sub-container&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-tabs</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;reqData.sortField&quot;</span> @<span class="hljs-attr">tab-change</span>=<span class="hljs-string">&quot;tabChange&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-tab-pane</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;最新商品&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;publishTime&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-tab-pane</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-tab-pane</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;最高人气&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;orderNum&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-tab-pane</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">el-tab-pane</span> <span class="hljs-attr">label</span>=<span class="hljs-string">&quot;评论最多&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;evaluateNum&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">el-tab-pane</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-tabs</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;body&quot;</span> <span class="hljs-attr">v-infinite-scroll</span>=<span class="hljs-string">&quot;load&quot;</span> <span class="hljs-attr">:infinite-scroll-disabled</span>=<span class="hljs-string">&quot;disabled&quot;</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- 商品列表 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">GoodsItem</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;goods in goodsList&quot;</span> <span class="hljs-attr">:goods</span>=<span class="hljs-string">&quot;goods&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;goods.id&quot;</span> /&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.bread-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">25px</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.sub-container</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">10px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.body</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">flex-wrap</span>: wrap;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.goods-item</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">220px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">30px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">160px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">160px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.name</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.desc</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">29px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.price</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.pagination-container</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css"></span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;接下来是对一级分类页面中各种种类的菜单进行配置。其实网页在前面的Layout部分已经配置好&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;</summary>
      
    
    
    
    <category term="前端" scheme="http://example.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>vue实践之商场app - 首页部分</title>
    <link href="http://example.com/2025/05/03/mall-front-3/"/>
    <id>http://example.com/2025/05/03/mall-front-3/</id>
    <published>2025-05-03T07:17:04.000Z</published>
    <updated>2025-05-06T08:33:23.645Z</updated>
    
    <content type="html"><![CDATA[<p>Home组件即网站的首页部分，一般作数据大屏，显示推送信息和分类浏览的作用。与Layout部分同理，在Home文件夹下新建<code>index.vue</code>文件和components文件夹，其中index.vue文件依然作为程序的入口</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeCategory</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/HomeCategory.vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeBanner</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/HomeBanner.vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeNew</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/HomeNew.vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeHot</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/HomeHot.vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeProduct</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/HomeProduct.vue&#x27;</span>;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">HomeCategory</span> /&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">HomeBanner</span> /&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">HomeNew</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">HomeHot</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">HomeProduct</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="HomeCategory大屏显示类别"><a href="#HomeCategory大屏显示类别" class="headerlink" title="HomeCategory大屏显示类别"></a>HomeCategory大屏显示类别</h2><p>该部分在左侧显示类别信息，当鼠标悬停到对应类别上时，在右侧显示对应的商品信息。在components文件夹下新建<code>HomeCategory.vue</code>文件，<a href="#homecategory">代码如下</a></p><p>此处的关键样式尾layer部分。当鼠标没有悬浮在上时其display属性为none（不显示），悬浮在上时为block（显示），由此实现相关功能。</p><p><img src="/2025/05/03/mall-front-3/home%20Category.png" alt="效果图"></p><h2 id="banner轮播图"><a href="#banner轮播图" class="headerlink" title="banner轮播图"></a>banner轮播图</h2><div class="note note-info">            <p>一般的网站首页大屏要么类别，要么轮播，为什么这里两个都有呢？于教学来说无可厚非，但对美观性而言是个灾难。</p>          </div><p>一般的网站也会在大屏上显示轮播图，显示热点信息。该部分图片不在类别接口中，需要自己重新定义接口。在apis文件夹下新建<code>home.js</code>，<a href="#homebanner">vue部分代码点击显示</a>，js部分代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span>  httpInstance <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/utils/http&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getBannerAPI</span>(<span class="hljs-params">params = []</span>) &#123;<br>    <span class="hljs-comment">// 默认为1，商品为2</span><br>    <span class="hljs-keyword">const</span> &#123; distributeSite = <span class="hljs-number">1</span> &#125; = params<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>:<span class="hljs-string">&quot;home/banner&quot;</span>,<br>        <span class="hljs-attr">params</span>: &#123;<br>            distributeSite<br>        &#125;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>此处接受参数<code>params</code>，这个参数是一个对象（若没有传入，则为一个空数组）。并从中解构赋值，提取了一个名为distributeSite属性。若params中没有这个属性或没有定义值，则赋值为1。2的功能在后面会提及，目前只需要用到1。</p><p>在components文件夹下新建<code>HomeBanner.vue</code>文件，代码如下</p><p>由于element-plus提供了相关组件<code>&lt;el-carousel /&gt;</code>和单个项<code>&lt;el-carousel-item /&gt;</code>，大大简化了操作，直接调用，并往里面插入从接口中获取的图片就好。</p><h2 id="面板封装"><a href="#面板封装" class="headerlink" title="面板封装"></a>面板封装</h2><h3 id="GoodsItem组件"><a href="#GoodsItem组件" class="headerlink" title="GoodsItem组件"></a>GoodsItem组件</h3><p>在HomeCategory中可以看到以下组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;i.picture&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;info&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;name ellipsis-2&quot;</span>&gt;</span>&#123;&#123; i.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;desc ellipsis&quot;</span>&gt;</span>&#123;&#123; i.desc &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;price&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>￥<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>&#123;&#123; i.price &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br></code></pre></td></tr></table></figure><p>该部分组件在后面的组件中也需要使用，为提高代码复用性可以先行封装好。在components文件夹下新建文件<code>GoodsItem.vue</code>文件。<a href="#%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85">代码如下</a></p><p>可以看到，除了script部分，其他和前面的HomeCategory中的内容基本一样。script部分的内容定义了vue3组件中的props，用于接收父组件中的数据goods。下面的内容定义了goods的类型（对象）和默认值（没有传则为一个空对象）<br>这样在使用的时候只需要</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">goods-item</span> <span class="hljs-attr">:goods</span>=<span class="hljs-string">&quot;item&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>即可。</p><div class="note note-info">            <p>但实际上该部件在Home组件下很多地方该用的没用，用了也会有大大小小的问题。其他地方倒是用的挺多。所以为什么不放到src下的components文件夹下呢？</p>          </div><h3 id="HomePanel组件"><a href="#HomePanel组件" class="headerlink" title="HomePanel组件"></a>HomePanel组件</h3><p>“人气商品”和“新鲜好物”模块和后面的分类别组件存在差别，但二者的展示逻辑是一样的。因此该部分的样式用HomePanel封装。在components文件夹下新建文件<code>HomePanel.vue</code>，<a href="#%E7%BB%84%E4%BB%B6%E5%B0%81%E8%A3%85">代码如下</a></p><p>此处的<code>&lt;slot /&gt;</code>部分为“插槽”，用于在组件中定义占位符，允许父组件向子组件中传递自定义内容。我们将在后面两个模块的具体设计中看到这点。</p><h2 id="“人气商品”和“新鲜好物”模块"><a href="#“人气商品”和“新鲜好物”模块" class="headerlink" title="“人气商品”和“新鲜好物”模块"></a>“人气商品”和“新鲜好物”模块</h2><p>有了前面的铺垫，这两个模块能够较为容易地写出来。首先需要定义接口。在原先的文件<code>home.js</code>下新增两个接口</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">findNewAPI</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>:<span class="hljs-string">&quot;home/new&quot;</span><br>    &#125;)<br>&#125;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">findHotAPI</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>:<span class="hljs-string">&quot;home/hot&quot;</span><br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>在components文件夹下新建文件<code>HomeHot.vue</code>和<code>HomeNew.vue</code>，<a href="#%E4%B8%A4%E4%B8%AA%E6%A8%A1%E5%9D%97">代码如下</a></p><p><img src="/2025/05/03/mall-front-3/Home%20Panel.png" alt="效果图，人气商品部分后端给的属性不全，导致信息显示不全"></p><h2 id="懒加载指令的实现"><a href="#懒加载指令的实现" class="headerlink" title="懒加载指令的实现"></a>懒加载指令的实现</h2><p>大多数时候用户并不会翻完网页，因此窗口外的内容不需要全部加载，需要实现图片懒加载组件，以节约请求的资源数。</p><p>在directives文件夹下新建文件<code>index.vue</code>，代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; useIntersectionObserver &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vueuse/core&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> lazyPlugin = &#123;<br>    <span class="hljs-title function_">install</span>(<span class="hljs-params">app</span>) &#123;<br>        app.<span class="hljs-title function_">directive</span>(<span class="hljs-string">&#x27;img-lazy&#x27;</span>, &#123;<br>            <span class="hljs-title function_">mounted</span>(<span class="hljs-params">el, binding</span>) &#123;<br>                <span class="hljs-comment">// el即指令绑定的元素，binding.value即指令的值</span><br>                <span class="hljs-keyword">const</span> &#123; stop &#125; = <span class="hljs-title function_">useIntersectionObserver</span>(<br>                    el,<br>                    <span class="hljs-function">(<span class="hljs-params">[&#123; isIntersecting &#125;]</span>) =&gt;</span> &#123;<br>                        <span class="hljs-keyword">if</span>(isIntersecting) &#123;<br>                            el.<span class="hljs-property">src</span> = binding.<span class="hljs-property">value</span><br>                            <span class="hljs-comment">// 加载一次后停止观察</span><br>                            <span class="hljs-title function_">stop</span>()<br>                        &#125;<br>                    &#125;,<br>                )<br>            &#125;<br>        &#125;)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>通过install(app)，注册一个名为<code>img-lazy</code>的vue插件，用于实现懒加载指令。其中的mounted狗子用于在绑定的元素被插入到DOM时触发，获取参数el（绑定的DOM元素，即需要懒加载的图片）和binding（指令的值，通常是图片的URL），后面的<code>useIntersectionObserver</code>是vueuse中的方法，用于检测是否进入视口，当进入视口（<code>isIntersecting</code>为true时），将图片的url赋值给el.src，触发图片加载。加载完成后，调用从上面的解构出来的stop方法，停止检测，防止重复触发。<br>最后需要在<code>main.js</code>中注册组件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">use</span>(lazyPlugin)<br></code></pre></td></tr></table></figure><h2 id="产品列表实现"><a href="#产品列表实现" class="headerlink" title="产品列表实现"></a>产品列表实现</h2><div class="note note-info">            <p>现在的推送流网站都不会单纯地放产品列表上来了，而是推送定制化内容。但其中的复用思想还是一致的</p>          </div><p>接在“人气商品”和“新鲜好物”模块后的是产品列表的实现，这是前面封装组件的集大成。在原先的文件<code>home.js</code>下新增接口</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getGoodsAPI</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">httpInstance</span>(&#123;<br>        <span class="hljs-attr">url</span>:<span class="hljs-string">&quot;home/goods&quot;</span><br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>在components文件夹下新建文件<code>HomeProduct.vue</code>，<a href="#%E4%BA%A7%E5%93%81%E5%88%97%E8%A1%A8">代码如下</a></p><p><img src="/2025/05/03/mall-front-3/home%20product.png" alt="效果图"></p><h2 id="源码"><a href="#源码" class="headerlink" title="源码"></a>源码</h2><h3 id="HomeCategory"><a href="#HomeCategory" class="headerlink" title="HomeCategory"></a>HomeCategory</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCategoryStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/category&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> categoryStore = <span class="hljs-title function_">useCategoryStore</span>()</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home-category&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;menu&quot;</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in categoryStore.categoryList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;i in item.children.slice(0, 2)&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;i&quot;</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>&#123;&#123; i.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;layer&quot;</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">h4</span>&gt;</span>分类推荐 <span class="hljs-tag">&lt;<span class="hljs-name">small</span>&gt;</span>根据您的购买或浏览记录推荐<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h4</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;i in item.goods&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;i.id&quot;</span>&gt;</span><br>              <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;i.picture&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;info&quot;</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;name ellipsis-2&quot;</span>&gt;</span>&#123;&#123; i.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;desc ellipsis&quot;</span>&gt;</span>&#123;&#123; i.desc &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                  <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;price&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span>&gt;</span>￥<span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>&#123;&#123; i.price &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>              <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>          <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&#x27;scss&#x27;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.home-category</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">250px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.8</span>);</span><br><span class="language-css">    <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">99</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.menu</span> &#123;</span><br><span class="language-css">        <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">55px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">55px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">background</span>: $xtxColor;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">4px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:first</span>-child &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.layer</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">990px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0.8</span>);</span><br><span class="language-css">                <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">                <span class="hljs-attribute">left</span>: <span class="hljs-number">250px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                <span class="hljs-attribute">display</span>: none;</span><br><span class="language-css">                <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">15px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">h4</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">font-weight</span>: normal;</span><br><span class="language-css">                    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">80px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                    small &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">ul</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">                    <span class="hljs-attribute">flex-wrap</span>: wrap;</span><br><span class="language-css"></span><br><span class="language-css">                    <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">width</span>: <span class="hljs-number">310px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">height</span>: <span class="hljs-number">120px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#eee</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">                        &amp;<span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">3</span>n) &#123;</span><br><span class="language-css">                            <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                        &#125;</span><br><span class="language-css"></span><br><span class="language-css">                        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">                            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">                            <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">                            <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">                            <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css"></span><br><span class="language-css">                            &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                                <span class="hljs-attribute">background</span>: <span class="hljs-number">#e3f9f4</span>;</span><br><span class="language-css">                            &#125;</span><br><span class="language-css"></span><br><span class="language-css">                            <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">                                <span class="hljs-attribute">width</span>: <span class="hljs-number">95px</span>;</span><br><span class="language-css">                                <span class="hljs-attribute">height</span>: <span class="hljs-number">95px</span>;</span><br><span class="language-css">                            &#125;</span><br><span class="language-css"></span><br><span class="language-css">                            <span class="hljs-selector-class">.info</span> &#123;</span><br><span class="language-css">                                <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">                                <span class="hljs-attribute">line-height</span>: <span class="hljs-number">24px</span>;</span><br><span class="language-css">                                <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css"></span><br><span class="language-css">                                <span class="hljs-selector-class">.name</span> &#123;</span><br><span class="language-css">                                    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">                                    <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">                                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                                <span class="hljs-selector-class">.desc</span> &#123;</span><br><span class="language-css">                                    <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                                    <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css">                                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                                <span class="hljs-selector-class">.price</span> &#123;</span><br><span class="language-css">                                    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">22px</span>;</span><br><span class="language-css">                                    <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css"></span><br><span class="language-css">                                    <span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">                                        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">                                    &#125;</span><br><span class="language-css">                                &#125;</span><br><span class="language-css">                            &#125;</span><br><span class="language-css">                        &#125;</span><br><span class="language-css">                    &#125;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                <span class="hljs-selector-class">.layer</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="HomeBanner"><a href="#HomeBanner" class="headerlink" title="HomeBanner"></a>HomeBanner</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; getBannerAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/home&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> bannerList = <span class="hljs-title function_">ref</span>([])</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getBanner</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getBannerAPI</span>()</span><br><span class="language-javascript">    bannerList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getBanner</span>())</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home-banner&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">el-carousel</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;500px&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">el-carousel-item</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in bannerList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;item.imgUrl&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">el-carousel-item</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">el-carousel</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span> <span class="hljs-attr">scoped</span>&gt;</span><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.home-banner</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">1240px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">        <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">98</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">500px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="组件封装"><a href="#组件封装" class="headerlink" title="组件封装"></a>组件封装</h3><p>GoodsItem</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">defineProps</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">goods</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>: <span class="hljs-title class_">Object</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">default</span>: <span class="hljs-function">() =&gt;</span> &#123; &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-item&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">v-img-lazy</span>=<span class="hljs-string">&quot;goods.picture&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;name ellipsis&quot;</span>&gt;</span>&#123;&#123; goods.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;desc ellipsis&quot;</span>&gt;</span>&#123;&#123; goods.desc &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;price&quot;</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span>&#123;&#123; goods.price &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.goods-item</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">220px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">padding</span>: <span class="hljs-number">20px</span> <span class="hljs-number">30px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">    <span class="hljs-attribute">transition</span>: all .<span class="hljs-number">5s</span>;</span><br><span class="language-css"></span><br><span class="language-css">    &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate3d</span>(<span class="hljs-number">0</span>, -<span class="hljs-number">3px</span>, <span class="hljs-number">0</span>);</span><br><span class="language-css">        <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">3px</span> <span class="hljs-number">8px</span> <span class="hljs-built_in">rgb</span>(<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> / <span class="hljs-number">20%</span>);</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">160px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">160px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.name</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.desc</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">29px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.price</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><p>HomePanel</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-comment">// 定义props</span></span><br><span class="language-javascript"><span class="hljs-title function_">defineProps</span>(&#123;</span><br><span class="language-javascript">    <span class="hljs-attr">title</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">    &#125;,</span><br><span class="language-javascript">    <span class="hljs-attr">subTitle</span>: &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">type</span>: <span class="hljs-title class_">String</span>,</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">&#125;)</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home-panel&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;head&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">h3</span>&gt;</span>&#123;&#123; title &#125;&#125; <span class="hljs-tag">&lt;<span class="hljs-name">small</span>&gt;</span>&#123;&#123; subTitle &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">h3</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">slot</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">slot</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.home-panel</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.head</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">40px</span>, <span class="hljs-number">0</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: flex-end;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">h3</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-weight</span>: normal;</span><br><span class="language-css">            <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">6px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">35px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">35px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            small &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">                <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="两个模块"><a href="#两个模块" class="headerlink" title="两个模块"></a>两个模块</h3><p>HomeHot.vue</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomePanel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./HomePanel.vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; findHotAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/home&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> hotList = <span class="hljs-title function_">ref</span>([]);</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getHotList</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">findHotAPI</span>();</span><br><span class="language-javascript">    hotList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getHotList</span>())</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">HomePanel</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;人气商品&quot;</span> <span class="hljs-attr">sub-title</span>=<span class="hljs-string">&quot;热门商品，值得购买&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-list&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in hotList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">v-img-lazy</span>=<span class="hljs-string">&quot;item.picture&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;&quot;</span> /&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;name&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;price&quot;</span>&gt;</span><span class="hljs-symbol">&amp;yen;</span> &#123;&#123; item.price &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">HomePanel</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&#x27;scss&#x27;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.goods-list</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">    <span class="hljs-attribute">justify-content</span>: space-between;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">406px</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">306px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">406px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#f0f9f4</span>;</span><br><span class="language-css">        <span class="hljs-attribute">transition</span>: all .<span class="hljs-number">5s</span>;</span><br><span class="language-css"></span><br><span class="language-css">        &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate3d</span>(<span class="hljs-number">0</span>, -<span class="hljs-number">3px</span>, <span class="hljs-number">0</span>);</span><br><span class="language-css">            <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">3px</span> <span class="hljs-number">8px</span> <span class="hljs-built_in">rgb</span>(<span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span> / <span class="hljs-number">20%</span>);</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">306px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">306px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">22px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">12px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">text-overflow</span>: ellipsis;</span><br><span class="language-css">            <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css">            <span class="hljs-attribute">white-space</span>: nowrap;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.price</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><div class="note note-info">            <p>HomeNew.vue组件和上面的代码基本一致，这里不再上源码</p>          </div><h3 id="产品列表"><a href="#产品列表" class="headerlink" title="产品列表"></a>产品列表</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomePanel</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./HomePanel.vue&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; getGoodsAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/apis/home&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">GoodsItem</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./GoodsItem.vue&#x27;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> goodsProduct = <span class="hljs-title function_">ref</span>([])</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getGoods</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getGoodsAPI</span>()</span><br><span class="language-javascript">    goodsProduct.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getGoods</span>())</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home-product&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">HomePanel</span> <span class="hljs-attr">:title</span>=<span class="hljs-string">&quot;cate.name&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;cate in goodsProduct&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;cate.id&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;box&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;cover&quot;</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">v-img-lazy</span>=<span class="hljs-string">&quot;cate.picture&quot;</span> /&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">strong</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;label&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123; cate.name &#125;&#125;馆<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123; cate.saleInfo &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;goods-list&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;goods in cate.goods&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;goods.id&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">GoodsItem</span> <span class="hljs-attr">:goods</span>=<span class="hljs-string">&quot;goods&quot;</span> /&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">HomePanel</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&#x27;scss&#x27;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.home-product</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.sub</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">2px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">2px</span> <span class="hljs-number">12px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">4px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">background</span>: $xtxColor;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">80px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.box</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.cover</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">240px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">610px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">                <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.label</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">188px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">height</span>: <span class="hljs-number">66px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">                <span class="hljs-attribute">line-height</span>: <span class="hljs-number">66px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-weight</span>: normal;</span><br><span class="language-css">                <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">                <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;</span><br><span class="language-css">                <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translate3d</span>(<span class="hljs-number">0</span>, -<span class="hljs-number">50%</span>, <span class="hljs-number">0</span>);</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">                    &amp;<span class="hljs-selector-pseudo">:first</span>-child &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">width</span>: <span class="hljs-number">76px</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.9</span>);</span><br><span class="language-css">                    &#125;</span><br><span class="language-css"></span><br><span class="language-css">                    &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                        <span class="hljs-attribute">flex</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">                        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">rgba</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0.7</span>);</span><br><span class="language-css">                    &#125;</span><br><span class="language-css"></span><br><span class="language-css"></span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.goods-list</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">990px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">            <span class="hljs-attribute">flex-wrap</span>: wrap;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: <span class="hljs-number">240px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">height</span>: <span class="hljs-number">300px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:nth-last-child</span>(-n + <span class="hljs-number">4</span>) &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:nth-child</span>(<span class="hljs-number">4</span>n) &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-class">.price</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: $priceColor;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Home组件即网站的首页部分，一般作数据大屏，显示推送信息和分类浏览的作用。与Layout部分同理，在Home文件夹下新建&lt;code&gt;index.vue&lt;/code&gt;文件和components文件夹，其中index.vue文件依然作为程序的入口&lt;/p&gt;
&lt;figure cl</summary>
      
    
    
    
    <category term="前端" scheme="http://example.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>vue实践之商场app - Layout组件</title>
    <link href="http://example.com/2025/05/02/mall-front-2/"/>
    <id>http://example.com/2025/05/02/mall-front-2/</id>
    <published>2025-05-02T15:32:25.000Z</published>
    <updated>2025-05-06T08:26:51.450Z</updated>
    
    <content type="html"><![CDATA[<p>App.vue作为程序的入口，一般只充当程序的入口</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 一级路由出口组件 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><p>在路由中，该部分的组件为Layout，即这层存放网页各处都需要的布局组件</p><p>在Layout文件夹下新建<code>index.vue</code>和components文件夹，index.vue文件使用各种组件，指明路由关系</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">layout-nav</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">layout-header</span> /&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">layout-fixed</span> /&gt;</span><br>    <span class="hljs-comment">&lt;!-- &lt;router-view :key=&quot;$route.fullPath&quot;/&gt; --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">layout-footer</span> /&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">LayoutFooter</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/LayoutFooter.vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">LayoutHeader</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/LayoutHeader.vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">LayoutNav</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/LayoutNav.vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">LayoutFixed</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/LayoutFixed.vue&#x27;</span>;</span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCategoryStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/category&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; onMounted &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> categoryStore = <span class="hljs-title function_">useCategoryStore</span>()</span><br><span class="language-javascript"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> categoryStore.<span class="hljs-title function_">getCategory</span>())</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><div class="note note-info">            <ul><li><p><code>onMounted()</code>函数是vue3提供的生命周期钩子，当该组件挂载在DOM上时开始执行某些逻辑</p></li><li><p>注释的组件是为了让组件实例不服用，在点击不同的种类后立即更新网址</p></li></ul>          </div><h2 id="导航栏"><a href="#导航栏" class="headerlink" title="导航栏"></a>导航栏</h2><p>导航栏在页面的最上方，用于快速跳转到某些页面。此处只给某些地方配置了路由，实际开发中视情况而定。<br>在components文件夹下新建<code>LayoutNav.vue</code>文件，<a href="#%E5%AF%BC%E8%88%AA%E6%A0%8F%E6%BA%90%E7%A0%81">具体代码如下</a></p><p>在该组件中，导航栏以表格的形式存在，当用户信息存在时显示客户相关操作，否则显示登录操作</p><div class="note note-info">            <p>为什么此处的空连接是<code>href=&quot;javascript:;&quot;</code>而非<code>href=&quot;&quot;</code>或者省略？<code>href=&quot;&quot;</code>可能会在点击时跳转到当前页面的根路径。省略该属性时链接可能会失去默认的样式或行为。</p>          </div><h2 id="一级导航"><a href="#一级导航" class="headerlink" title="一级导航"></a>一级导航</h2><p>该部分用于跳转到各部分功能中。在该电商平台上，则是对应不同的购物模块。<br>在components文件夹下新建<code>LayoutHeader.vue</code>文件，<a href="#%E4%B8%80%E7%BA%A7%E5%AF%BC%E8%88%AA%E6%BA%90%E7%A0%81">具体代码如下</a></p><p>在该部分中，logo部分显示应用图标，并提供跳转至首页的功能。其他的各类别信息则从服务器抓取。由于类别信息其他文件也需要，所以这里使用了Store来储存，该部分需参阅<a href="#store%E7%9A%84%E5%AE%9A%E4%B9%89%E4%B8%8E%E6%8E%A5%E5%8F%A3%E7%9A%84%E8%B0%83%E7%94%A8">Store相关文件的定义</a>。购物车组件显示用户的购物车信息，该部分在购物车组件部分会有说明。</p><p><img src="/2025/05/02/mall-front-2/header.png" alt="头部效果"></p><h2 id="吸顶的一级导航"><a href="#吸顶的一级导航" class="headerlink" title="吸顶的一级导航"></a>吸顶的一级导航</h2><p>为了方便用户快速跳转所需类别，一般会有两种选择：固定一级导航栏在页面顶端，或者提供回到顶部按钮。此处使用的是前者。<br>在components文件夹下新建<code>LayoutFixed.vue</code>文件，<a href="#%E5%90%B8%E9%A1%B6%E4%B8%80%E7%BA%A7%E5%AF%BC%E8%88%AA">具体代码如下</a></p><p>相比一级导航，这里的吸顶版本又有什么区别？此处使用了vueuse中的useScroll方法，获得页面的滚动位置和状态。当状态符合时（此处为y &gt; 78），为相应的类名做出改变，从而改变后面的scss样式。后面的scss样式分两种，当在页面顶端时，组件移出到页面外（y轴偏移为-1）并完全透明。满足条件后，组件线性移动到页面顶端（通过特定属性清除y轴偏移）并解除透明。</p><p><img src="/2025/05/02/mall-front-2/stick.png" alt="吸顶一级导航的效果，可以看到，当不在页面顶端时，该部件飘在页面顶端"></p><h2 id="页尾"><a href="#页尾" class="headerlink" title="页尾"></a>页尾</h2><p>网页的页尾一般用于放置版权信息、备案声明和相关链接。在components下新建<code>LayoutFooter.vue</code>文件，<a href="#%E9%A1%B5%E5%B0%BE%E6%BA%90%E7%A0%81">代码如下</a></p><p><img src="/2025/05/02/mall-front-2/footer.png" alt="页尾效果"></p><div class="note note-info">            <p>HeaderCart购物车部分在购物车一章中讲</p>          </div><h2 id="Store的定义与接口的调用"><a href="#Store的定义与接口的调用" class="headerlink" title="Store的定义与接口的调用"></a>Store的定义与接口的调用</h2><p>在apis文件夹下新建文件<code>category.js</code>，用于存放相关接口。代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> request <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/utils/http&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getCategoryAPI</span>(<span class="hljs-params">id</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">request</span>(&#123;<br>        <span class="hljs-attr">url</span>:<span class="hljs-string">&#x27;/category&#x27;</span>,<br>        <span class="hljs-attr">params</span>: &#123;<br>            id<br>        &#125;<br>    &#125;)<br>&#125;<br></code></pre></td></tr></table></figure><p>这是在axios较为标准的创建请求方法。此处的request为axios相关文件在导出时使用的别名。使用的get方法作为默认方法，因此此处没有指定method。url指定向后端发起请求的地址。params即传递的参数。此处axios请求以函数的方式export到其他地方，方便复用。</p><p>在stores文件夹下新建文件<code>category.js</code>，代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span><br><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><span class="hljs-keyword">import</span> &#123; getCategoryAPI &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/apis/layout&quot;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCategoryStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&quot;category&quot;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-comment">// state</span><br>    <span class="hljs-keyword">const</span> categoryList = <span class="hljs-title function_">ref</span>([])<br>    <span class="hljs-comment">// action</span><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">getCategory</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>        <span class="hljs-keyword">const</span> res = <span class="hljs-keyword">await</span> <span class="hljs-title function_">getCategoryAPI</span>()<br>        categoryList.<span class="hljs-property">value</span> = res.<span class="hljs-property">result</span><br>    &#125;<br><br>    <span class="hljs-keyword">return</span> &#123;<br>        categoryList,<br>        getCategory<br>    &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><p>action部分是一个比较标准的调用接口方法。该函数声明为异步函数，配合await在Promise被解决或拒绝后才执行相关操作，即在接收到数据后进行赋值，并在最后返回相关数据。该接口定义在Store中，Store的名字为category。</p><h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><h3 id="导航栏源码"><a href="#导航栏源码" class="headerlink" title="导航栏源码"></a>导航栏源码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useUserStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/user&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>()</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> <span class="hljs-title function_">confirm</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span><br><span class="language-javascript">    userStore.<span class="hljs-title function_">clearUserInfo</span>()</span><br><span class="language-javascript">    router.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;/login&#x27;</span>)</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app-topnav&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;userStore.userInfo.token&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot; iconfont icon-user&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span>&#123;&#123; userStore.userInfo.account &#125;&#125;<br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">el-popconfirm</span> @<span class="hljs-attr">confirm</span>=<span class="hljs-string">&quot;confirm&quot;</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;确认退出吗?&quot;</span> <span class="hljs-attr">confirm-button-text</span>=<span class="hljs-string">&quot;确认&quot;</span></span><br><span class="hljs-tag">                            <span class="hljs-attr">cancel-button-text</span>=<span class="hljs-string">&quot;取消&quot;</span>&gt;</span><br>                            <span class="hljs-tag">&lt;<span class="hljs-name">template</span> #<span class="hljs-attr">reference</span>&gt;</span><br>                                <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>退出登录<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                            <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>                        <span class="hljs-tag">&lt;/<span class="hljs-name">el-popconfirm</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$router.push(&#x27;/member/order&#x27;)&quot;</span>&gt;</span>我的订单<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$router.push(&#x27;/member&#x27;)&quot;</span>&gt;</span>会员中心<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">template</span> <span class="hljs-attr">v-else</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;$router.push(&#x27;/login&#x27;)&quot;</span>&gt;</span>请先登录<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>帮助中心<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>关于我们<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.app-topnav</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-number">#333</span>;</span><br><span class="language-css">    <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">ul</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">53px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: flex-end;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">            <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">15px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#cdcdcd</span>;</span><br><span class="language-css">                <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">                <span class="hljs-attribute">display</span>: inline-block;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">2px</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            ~<span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">                <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">border-left</span>: <span class="hljs-number">2px</span> solid <span class="hljs-number">#666</span>;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="一级导航源码"><a href="#一级导航源码" class="headerlink" title="一级导航源码"></a>一级导航源码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCategoryStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/category&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">HeaderCart</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./HeaderCart.vue&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> categoryStore = <span class="hljs-title function_">useCategoryStore</span>()</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&#x27;app-header&#x27;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;logo&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>小兔鲜<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app-header-nav&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in categoryStore.categoryList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">active-class</span>=<span class="hljs-string">&quot;active&quot;</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;`/category/$&#123;item.id&#125;`&quot;</span>&gt;</span><br>                        &#123;&#123; item.name &#125;&#125;<br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;search&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-search&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;搜一搜&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br>            <span class="hljs-tag">&lt;<span class="hljs-name">HeaderCart</span> /&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&#x27;scss&#x27;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.app-header</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: white;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.logo</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">132px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-indent</span>: -<span class="hljs-number">9999px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;@/assets/images/logo.png&#x27;</span>) no-repeat center <span class="hljs-number">18px</span> / contain;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.app-header-nav</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">820px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">        <span class="hljs-attribute">z-index</span>: <span class="hljs-number">998</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">38px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">line-height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">display</span>: inline-block;</span><br><span class="language-css"></span><br><span class="language-css">                &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid $xtxColor;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.active</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid $xtxColor;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.search</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">170px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">        <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e7e7e7</span>;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.icon-search</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">input</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">140px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.cart</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.curr</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.icon-cart</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">22px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">em</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-style</span>: normal;</span><br><span class="language-css">                <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">                <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                <span class="hljs-attribute">padding</span>: <span class="hljs-number">1px</span> <span class="hljs-number">6px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">                <span class="hljs-attribute">background</span>: $helpColor;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-family</span>: Arial;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="吸顶一级导航"><a href="#吸顶一级导航" class="headerlink" title="吸顶一级导航"></a>吸顶一级导航</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useScroll &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@vueuse/core&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; useCategoryStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/stores/category&#x27;</span></span><br><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">const</span> &#123; y &#125; = <span class="hljs-title function_">useScroll</span>(<span class="hljs-variable language_">window</span>)</span><br><span class="language-javascript"><span class="hljs-keyword">const</span> categoryStore = <span class="hljs-title function_">useCategoryStore</span>()</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app-header-sticky&quot;</span> <span class="hljs-attr">:class</span>=<span class="hljs-string">&quot;&#123; show: y &gt; 78 &#125;&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;logo&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app-header-nav&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">RouterLink</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-name">RouterLink</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;home&quot;</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;item in categoryStore.categoryList&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;item.id&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">:to</span>=<span class="hljs-string">&quot;`/category/$&#123;item.id&#125;`&quot;</span> <span class="hljs-attr">active-class</span>=<span class="hljs-string">&quot;active&quot;</span>&gt;</span>&#123;&#123; item.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;search&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-search&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;搜一搜&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&#x27;scss&#x27;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.app-header-sticky</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">    <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">position</span>: fixed;</span><br><span class="language-css">    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">999</span>;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">    <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e4e4e4</span>;</span><br><span class="language-css">    <span class="hljs-attribute">transform</span>: <span class="hljs-built_in">translateY</span>(-<span class="hljs-number">100%</span>);</span><br><span class="language-css">    <span class="hljs-attribute">opacity</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css"></span><br><span class="language-css">    &amp;<span class="hljs-selector-class">.show</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">transition</span>: all <span class="hljs-number">0.3s</span> linear;</span><br><span class="language-css">        <span class="hljs-attribute">transform</span>: none;</span><br><span class="language-css">        <span class="hljs-attribute">opacity</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.logo</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">80px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&quot;@/assets/images/logo.png&quot;</span>) no-repeat right <span class="hljs-number">2px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">background-size</span>: <span class="hljs-number">160px</span> auto;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.right</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">220px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">border-left</span>: <span class="hljs-number">2px</span> solid $xtxColor;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">38px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.app-header</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">align-items</span>: center;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.logo</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">200px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">132px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-indent</span>: -<span class="hljs-number">9999px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">background</span>: <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;@/assets/images/logo.png&#x27;</span>) no-repeat center <span class="hljs-number">18px</span> / contain;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.search</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">170px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">        <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#e7e7e7</span>;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.icon-search</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-left</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">input</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">140px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.cart</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.curr</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.icon-cart</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">22px</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">em</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-style</span>: normal;</span><br><span class="language-css">                <span class="hljs-attribute">position</span>: absolute;</span><br><span class="language-css">                <span class="hljs-attribute">right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">                <span class="hljs-attribute">padding</span>: <span class="hljs-number">1px</span> <span class="hljs-number">6px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">                <span class="hljs-attribute">background</span>: $helpColor;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">12px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-family</span>: Arial;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.app-header-nav</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">width</span>: <span class="hljs-number">820px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">    <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">    <span class="hljs-attribute">position</span>: relative;</span><br><span class="language-css">    <span class="hljs-attribute">z-index</span>: <span class="hljs-number">998</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-tag">li</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">width</span>: <span class="hljs-number">38px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">16px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">32px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: inline-block;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid $xtxColor;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.active</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">            <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid $xtxColor;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="页尾源码"><a href="#页尾源码" class="headerlink" title="页尾源码"></a>页尾源码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">footer</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;app_footer&quot;</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 联系我们 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;contact&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>客户服务<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-kefu&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> 在线客服<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-question&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> 问题反馈<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>关注我们<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-iconfontweixin&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> 公众号<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-weibo&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span> 微博<span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>下载APP<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;qrcode&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;@/assets/images/qrcode.jpg&quot;</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;download&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>扫描二维码<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>立马下载APP<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>下载页面<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">dl</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">dt</span>&gt;</span>服务热线<span class="hljs-tag">&lt;/<span class="hljs-name">dt</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">dd</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;hotline&quot;</span>&gt;</span>400-0000-000 <span class="hljs-tag">&lt;<span class="hljs-name">small</span>&gt;</span>周一至周日 8:00-18:00<span class="hljs-tag">&lt;/<span class="hljs-name">small</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">dd</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">dl</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- 其它 --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;extra&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;container&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;slogan&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-footer01&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>价格亲民<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-footer02&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>物流快捷<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-footer03&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">i</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>品质新鲜<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>                <span class="hljs-comment">&lt;!-- 版权信息 --&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;copyright&quot;</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>关于我们<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>帮助中心<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>售后服务<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>配送与验收<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>商务合作<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>搜索推荐<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;javascript:;&quot;</span>&gt;</span>友情链接<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span><br>                    <span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>CopyRight © 小兔鲜儿<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>                <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">footer</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">style</span> <span class="hljs-attr">scoped</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&#x27;scss&#x27;</span>&gt;</span><span class="language-css"></span><br><span class="language-css"><span class="hljs-selector-class">.app_footer</span> &#123;</span><br><span class="language-css">    <span class="hljs-attribute">overflow</span>: hidden;</span><br><span class="language-css">    <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#f5f5f5</span>;</span><br><span class="language-css">    <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.contact</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">background</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.container</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">60px</span> <span class="hljs-number">0</span> <span class="hljs-number">40px</span> <span class="hljs-number">25px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">dl</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">190px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">72px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-right</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#f2f2f2</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:first</span>-child &#123;</span><br><span class="language-css">                <span class="hljs-attribute">padding-left</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">border-right</span>: none;</span><br><span class="language-css">                <span class="hljs-attribute">padding-right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">dt</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">18px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">dd</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">margin</span>: <span class="hljs-number">36px</span> <span class="hljs-number">12px</span> <span class="hljs-number">0</span> <span class="hljs-number">0</span>;</span><br><span class="language-css">            <span class="hljs-attribute">float</span>: left;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">92px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">92px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ededed</span>;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.iconfont</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">36px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">                <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:hover</span> &#123;</span><br><span class="language-css">                <span class="hljs-selector-class">.iconfont</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: $xtxColor;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">0</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css"></span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-class">.download</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">width</span>: auto;</span><br><span class="language-css">                <span class="hljs-attribute">height</span>: auto;</span><br><span class="language-css">                <span class="hljs-attribute">border</span>: none;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">                &#125;</span><br><span class="language-css"></span><br><span class="language-css">                <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">                    <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">                    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">padding</span>: <span class="hljs-number">10px</span> <span class="hljs-number">25px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">margin-top</span>: <span class="hljs-number">5px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">2px</span>;</span><br><span class="language-css">                    <span class="hljs-attribute">background-color</span>: $xtxColor;</span><br><span class="language-css">                &#125;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.qrcode</span> <span class="hljs-selector-tag">img</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: <span class="hljs-number">92px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">92px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#ededed</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-class">.hotline</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">22px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>;</span><br><span class="language-css">            <span class="hljs-attribute">width</span>: auto;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: auto;</span><br><span class="language-css">            <span class="hljs-attribute">border</span>: none;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">        small &#123;</span><br><span class="language-css">            <span class="hljs-attribute">display</span>: block;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.extra</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">background-color</span>: <span class="hljs-number">#333</span>;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.slogan</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">line-height</span>: <span class="hljs-number">58px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding</span>: <span class="hljs-number">60px</span> <span class="hljs-number">100px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">border-bottom</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#434343</span>;</span><br><span class="language-css">        <span class="hljs-attribute">display</span>: flex;</span><br><span class="language-css">        <span class="hljs-attribute">justify-content</span>: space-between;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">height</span>: <span class="hljs-number">58px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">58px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;</span><br><span class="language-css">            <span class="hljs-attribute">font-size</span>: <span class="hljs-number">28px</span>;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">i</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">font-size</span>: <span class="hljs-number">50px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">vertical-align</span>: middle;</span><br><span class="language-css">                <span class="hljs-attribute">margin-right</span>: <span class="hljs-number">10px</span>;</span><br><span class="language-css">                <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">100</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css"></span><br><span class="language-css">            <span class="hljs-selector-tag">span</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">vertical-align</span>: middle;</span><br><span class="language-css">                <span class="hljs-attribute">text-shadow</span>: <span class="hljs-number">0</span> <span class="hljs-number">0</span> <span class="hljs-number">1px</span> <span class="hljs-number">#333</span>;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css"></span><br><span class="language-css">    <span class="hljs-selector-class">.copyright</span> &#123;</span><br><span class="language-css">        <span class="hljs-attribute">height</span>: <span class="hljs-number">170px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">padding-top</span>: <span class="hljs-number">40px</span>;</span><br><span class="language-css">        <span class="hljs-attribute">text-align</span>: center;</span><br><span class="language-css">        <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">        <span class="hljs-attribute">font-size</span>: <span class="hljs-number">15px</span>;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">p</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">            <span class="hljs-attribute">margin-bottom</span>: <span class="hljs-number">20px</span>;</span><br><span class="language-css">        &#125;</span><br><span class="language-css"></span><br><span class="language-css">        <span class="hljs-selector-tag">a</span> &#123;</span><br><span class="language-css">            <span class="hljs-attribute">color</span>: <span class="hljs-number">#999</span>;</span><br><span class="language-css">            <span class="hljs-attribute">line-height</span>: <span class="hljs-number">1</span>;</span><br><span class="language-css">            <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span> <span class="hljs-number">10px</span>;</span><br><span class="language-css">            <span class="hljs-attribute">border-right</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#999</span>;</span><br><span class="language-css"></span><br><span class="language-css">            &amp;<span class="hljs-selector-pseudo">:last-child</span> &#123;</span><br><span class="language-css">                <span class="hljs-attribute">border-right</span>: none;</span><br><span class="language-css">            &#125;</span><br><span class="language-css">        &#125;</span><br><span class="language-css">    &#125;</span><br><span class="language-css">&#125;</span><br><span class="language-css"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;App.vue作为程序的入口，一般只充当程序的入口&lt;/p&gt;
&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span clas</summary>
      
    
    
    
    <category term="前端" scheme="http://example.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>vue实践之商场app - 前期配置</title>
    <link href="http://example.com/2025/05/02/mall-front/"/>
    <id>http://example.com/2025/05/02/mall-front/</id>
    <published>2025-05-02T09:02:35.000Z</published>
    <updated>2025-05-06T08:23:42.706Z</updated>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>vue中各种语法结构和语法糖看着实在是一头雾水，现在决定从头敲一个UI界面出来，这里是黑马程序员的小兔鲜</p>          </div><h2 id="需要的组件"><a href="#需要的组件" class="headerlink" title="需要的组件"></a>需要的组件</h2><h3 id="router"><a href="#router" class="headerlink" title="router"></a>router</h3><p>vue的路由组件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i vue-router<br></code></pre></td></tr></table></figure><p>该组件需要全局注册</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">use</span>(router)<br></code></pre></td></tr></table></figure><h3 id="element-plus"><a href="#element-plus" class="headerlink" title="element plus"></a>element plus</h3><p>基于vue3组件库，可以让组件更加好看，更加容易操作</p><div class="note note-info">            <p><a href="https://element-plus.org/zh-CN/">点击进入element-plus文档</a></p>          </div><p>在进行下载操作后</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install element-plus --save<br></code></pre></td></tr></table></figure><p>可以进行导入</p><ul><li>完整导入:</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementPlus</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;element-plus&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;element-plus/dist/index.css&#x27;</span><br></code></pre></td></tr></table></figure><ul><li>自动导入：</li></ul><p>按需进行自动导入。但在自动导入前需要先下载<code>unplugin-vue-components</code>和<code>unplugin-auto-import</code>这两款插件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install -D unplugin-vue-components unplugin-auto-import<br></code></pre></td></tr></table></figure><p>在vite配置文件中进行导入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">AutoImport</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-auto-import/vite&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Components</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-vue-components/vite&#x27;</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ElementPlusResolver</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-vue-components/resolvers&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-comment">// ...</span><br>  <span class="hljs-attr">plugins</span>: [<br>    <span class="hljs-comment">// ...</span><br>    <span class="hljs-title class_">AutoImport</span>(&#123;<br>      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">ElementPlusResolver</span>()],<br>    &#125;),<br>    <span class="hljs-title class_">Components</span>(&#123;<br>      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">ElementPlusResolver</span>()],<br>    &#125;),<br>  ],<br>&#125;)<br></code></pre></td></tr></table></figure><ul><li>手动导入：</li></ul><p>安装了<code>unplugin-element-plus</code>插件后，在vite配置文件中进行导入</p><figure class="highlight ts"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs ts"><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">ElementPlus</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;unplugin-element-plus/vite&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-comment">// ...</span><br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-title class_">ElementPlus</span>()],<br>&#125;)<br></code></pre></td></tr></table></figure><ul><li>可选：主题色更改：</li></ul><p>一般使用scss文件进行更换，详情<a href="https://element-plus.org/zh-CN/guide/theming">点击这里</a><br>需要下载scss相关依赖</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install scss -D<br></code></pre></td></tr></table></figure><h3 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h3><p>axios是一个基于promise的HTTP客户端，用于浏览器和node.js环境，一般可以直接安装</p><div class="note note-info">            <p><a href="https://www.axios-http.cn/docs/intro">点我进入axios中文文档</a></p>          </div><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">npm i axios<br></code></pre></td></tr></table></figure><p>然后在项目中引入axios</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> axios = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;axios&#x27;</span>);<br></code></pre></td></tr></table></figure><p>在ES6后，可以直接引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;axios&#x27;</span><br></code></pre></td></tr></table></figure><h3 id="路由组件"><a href="#路由组件" class="headerlink" title="路由组件"></a>路由组件</h3><p>vue中不同页面或者组件的跳转需要通过路由实现，该组件也需要安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i vue-router<br></code></pre></td></tr></table></figure><h3 id="iconfont"><a href="#iconfont" class="headerlink" title="iconfont"></a>iconfont</h3><p>iconfont是阿里巴巴提供的共享图标库，可以在里面创建项目以使用各种图标</p><div class="note note-info">            <p><a href="https://www.iconfont.cn/help/detail?&helptype=code">点击学习iconfont的Web端使用</a></p>          </div><p>其中，font-class引用更为普遍，以下是通过font-class引用的方法</p><ul><li><p>拷贝项目下面生成的fontclass代码。注意，每次往项目加入图标后都需要重新生成一遍代码，否则新加的图标可能会无法显示</p></li><li><p>在项目的index.html文件的head部分中引入如下内容。其中，href部分为上一步复制的代码</p></li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><br></code></pre></td></tr></table></figure><ul><li>挑选图标并获取类名，应用于页面</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">i</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;iconfont icon-xxx&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><h3 id="vue-use"><a href="#vue-use" class="headerlink" title="vue_use"></a>vue_use</h3><p>VueUse是基于组合式 API的实用函数集合。可用于响应DOM中发生的各种事件，相比DOM可读性和简易性都提高了不少。</p><div class="note note-info">            <p><a href="https://vueuse.nodejs.cn/guide/">点我进入vueuse官方文档</a></p>          </div><p>在v12.0后，vueuse不再支持vue2</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i @vueuse/core<br></code></pre></td></tr></table></figure><h3 id="pinia"><a href="#pinia" class="headerlink" title="pinia"></a>pinia</h3><p>pinia是vue3中的Store管理库</p><div class="note note-warning">            <p>什么是Store？Store有点像一个作为全局变量的组件，所有组件搜可以读取或写入它。Store对应着三个概念：<code>state</code>、<code>getter</code>和<code>action</code>，可以分别对应着组件中的<code>data</code>、<code>computed</code>和<code>methods</code></p>          </div><div class="note note-info">            <p><a href="https://pinia.vuejs.org/zh/introduction.html">点我进入pinia官方文档</a></p>          </div><p>该依赖也需要安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i pinia<br></code></pre></td></tr></table></figure><p>该组件需要全局注册</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">app.<span class="hljs-title function_">use</span>(pinia)<br></code></pre></td></tr></table></figure><h3 id="dayjs"><a href="#dayjs" class="headerlink" title="dayjs"></a>dayjs</h3><p>dayjs用于格式化日期输出的数据</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm i dayjs<br></code></pre></td></tr></table></figure><h2 id="项目起步"><a href="#项目起步" class="headerlink" title="项目起步"></a>项目起步</h2><h3 id="创建文件夹"><a href="#创建文件夹" class="headerlink" title="创建文件夹"></a>创建文件夹</h3><p>为方便接下来指代方便，在项目中创建以下文件夹</p><p><img src="/2025/05/02/mall-front/dir.png" alt="文件夹样式的变化是用了插件，可以忽略"></p><h3 id="axios基础配置"><a href="#axios基础配置" class="headerlink" title="axios基础配置"></a>axios基础配置</h3><p>在utils文件夹下新建<code>http.js</code>文件，用于存放数据拦截器，处理HTTP请求<br>首先是定义自己所要使用的axios实例默认值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> httpInstance = axios.<span class="hljs-title function_">create</span>(&#123;<br>    <span class="hljs-attr">baseURL</span>: <span class="hljs-string">&#x27;http://pcapi-xiaotuxian-front-devtest.itheima.net&#x27;</span>,<br>    <span class="hljs-attr">timeout</span>: <span class="hljs-number">5000</span>,<br>&#125;)<br></code></pre></td></tr></table></figure><p>此处的baseURL为黑马小兔鲜的后端接口。如果自己配置有后端，也可以使用<code>localhost/8080</code>。timeout为5秒，也可以设置更长一段时间。</p><p>然后是设置拦截器的样式，在请求或响应被<code>then</code>或<code>catch</code>处理前拦截它们，做出相应的操作</p><p>请求式拦截器的样式如下。请求式拦截器主要作用为在每个请求发送前，统一对请求配置进行处理。此处为检验用户是否已登录并存在Token，若为真则将token添加到请求头中，以进行身份验证，最后，返回已经修改过的config对象，确保请求能正常发送。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js">httpInstance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">request</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">config</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()<br>    <span class="hljs-keyword">const</span> token = userStore.<span class="hljs-property">userInfo</span>.<span class="hljs-property">token</span><br>    <span class="hljs-keyword">if</span> (token) &#123;<br>        config.<span class="hljs-property">headers</span>.<span class="hljs-property">Authorization</span> = <span class="hljs-string">`Bearer <span class="hljs-subst">$&#123;token&#125;</span>`</span><br>    &#125;<br>    <span class="hljs-keyword">return</span> config<br>&#125;, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(e))<br></code></pre></td></tr></table></figure><p>响应式拦截器的样式如下。响应式拦截器统一处理服务器返回的响应数据。此处主要是处理报错数据。若成功响应，则直接返回<code>res.data</code>。若返回错误，则执行第二个回调函数。<br>该函数通过<code>ElMessage</code>显示一个警告信息，并将报错内容显示出来。<br>若错误状态码为401（未授权或token失败），则清除用户信息并跳转至登陆界面，提示用户重新登录</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js">httpInstance.<span class="hljs-property">interceptors</span>.<span class="hljs-property">response</span>.<span class="hljs-title function_">use</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> res.<span class="hljs-property">data</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> userStore = <span class="hljs-title function_">useUserStore</span>()<br><br>    <span class="hljs-title class_">ElMessage</span>(&#123;<br>        <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;warning&#x27;</span>,<br>        <span class="hljs-attr">message</span>: e.<span class="hljs-property">response</span>.<span class="hljs-property">data</span>.<span class="hljs-property">message</span><br>    &#125;)<br><br>    <span class="hljs-keyword">if</span>(e.<span class="hljs-property">response</span>.<span class="hljs-property">status</span> === <span class="hljs-number">401</span>) &#123;<br>        userStore.<span class="hljs-title function_">clearUserInfo</span>()<br>        router.<span class="hljs-title function_">push</span>(<span class="hljs-string">&#x27;/login&#x27;</span>)<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(e)<br>&#125;)<br></code></pre></td></tr></table></figure><p>最后执行默认导出。默认导出可以只导出一个默认值，在其他文件导入时，可以使用任意名称来引用这个默认导出的值。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> httpInstance<br></code></pre></td></tr></table></figure><p>这样，该项目的任意地方都可以引入这个实例来发送请求</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> http <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/utils/http&#x27;</span>;<br><br>http.<span class="hljs-title function_">get</span>(<span class="hljs-string">&#x27;/api/example&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response);<br>&#125;);<br></code></pre></td></tr></table></figure><p>当然，在后面具体的API请求中，和上面的实例还是存在一定区别的。</p><h3 id="项目整体路由设计"><a href="#项目整体路由设计" class="headerlink" title="项目整体路由设计"></a>项目整体路由设计</h3><p>如前文所述，vue中不同页面或者组件的跳转需要通过路由实现。因此需要通过专门的文件来管理路由。在router文件夹下创建index.js文件，用于管理整个项目的路由跳转配置。项目中用到的全部路由如下。当然，在具体实践中应该为某个功能开始写的时候才配置路由。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createRouter, createWebHistory &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-router&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Login</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Login/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Layout</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Layout/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Home</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/views/Home/index.vue&quot;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Category</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/views/Category/index.vue&quot;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">SubCategory</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/views/SubCategory/index.vue&quot;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Detail</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/Detail/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">CartList</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@/views/CartList/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Checkout</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../views/Checkout/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">PayBack</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../views/pay/payBack.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Pay</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../views/pay/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Member</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../views/Member/index.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Userinfo</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../views/Member/components/Userinfo.vue&#x27;</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">UserOrder</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../views/Member/components/UserOrder.vue&#x27;</span><br><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br>  <span class="hljs-attr">history</span>: <span class="hljs-title function_">createWebHistory</span>(<span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">env</span>.<span class="hljs-property">BASE_URL</span>),<br>  <span class="hljs-attr">routes</span>: [<br>    &#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>      <span class="hljs-attr">component</span>: <span class="hljs-title class_">Layout</span>,<br>      <span class="hljs-attr">children</span>: [<br>        &#123;<br>          <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;category/:id&quot;</span>,<br>          <span class="hljs-attr">component</span>: <span class="hljs-title class_">Category</span><br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;category/sub/:id&quot;</span>,<br>          <span class="hljs-attr">component</span>: <span class="hljs-title class_">SubCategory</span><br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;detail/:id&#x27;</span>,<br>          <span class="hljs-attr">component</span>: <span class="hljs-title class_">Detail</span><br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">path</span>: <span class="hljs-string">&quot;&quot;</span>,<br>          <span class="hljs-attr">component</span>: <span class="hljs-title class_">Home</span><br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;cartlist&#x27;</span>,<br>          <span class="hljs-attr">component</span>: <span class="hljs-title class_">CartList</span><br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;checkout&#x27;</span>,<br>          <span class="hljs-attr">component</span>: <span class="hljs-title class_">Checkout</span><br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;pay&#x27;</span>,<br>          <span class="hljs-attr">component</span>: <span class="hljs-title class_">Pay</span><br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;paycallback&#x27;</span>,<br>          <span class="hljs-attr">component</span>: <span class="hljs-title class_">PayBack</span><br>        &#125;,<br>        &#123;<br>          <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;member&#x27;</span>,<br>          <span class="hljs-attr">component</span>: <span class="hljs-title class_">Member</span>,<br>          <span class="hljs-attr">children</span>:[<br>            &#123;<br>              <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;&#x27;</span>,<br>              <span class="hljs-attr">component</span>: <span class="hljs-title class_">Userinfo</span><br>            &#125;,<br>            &#123;<br>              <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;order&#x27;</span>,<br>              <span class="hljs-attr">component</span>: <span class="hljs-title class_">UserOrder</span><br>            &#125;<br>          ]<br>        &#125;<br>      ]<br>    &#125;,<br>    &#123;<br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/login&#x27;</span>,<br>      <span class="hljs-attr">component</span>: <span class="hljs-title class_">Login</span><br>    &#125;,<br>  ],<br>  <span class="hljs-comment">// 路由行为控制</span><br>  <span class="hljs-title function_">scrollBehavior</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">top</span>: <span class="hljs-number">0</span><br>    &#125;<br>  &#125;<br>&#125;)<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router<br></code></pre></td></tr></table></figure><p>路径下方的路由行为检测是为了在跳转页面时自动跳转到页面顶端。</p><h3 id="element-plus主题色改变"><a href="#element-plus主题色改变" class="headerlink" title="element-plus主题色改变"></a>element-plus主题色改变</h3><p>在style文件夹下新增element文件夹，并在该文件夹下新增<code>index.scss</code>文件，放置主题色相关文件</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-keyword">@forward</span> <span class="hljs-string">&#x27;element-plus/theme-chalk/src/common/var.scss&#x27;</span> with (<br>    <span class="hljs-variable">$colors</span>: (<br>        <span class="hljs-string">&#x27;primary&#x27;</span>: (<br>            <span class="hljs-string">&#x27;base&#x27;</span>:<span class="hljs-number">#27ba9b</span>,<br>        ),<br>        <span class="hljs-string">&#x27;success&#x27;</span>: (<br>            <span class="hljs-string">&#x27;base&#x27;</span>:<span class="hljs-number">#1dc779</span>,<br>        ),<br>        <span class="hljs-string">&#x27;warning&#x27;</span>: (<br>            <span class="hljs-string">&#x27;base&#x27;</span>:<span class="hljs-number">#ffb302</span>,<br>        ),<br>        <span class="hljs-string">&#x27;dander&#x27;</span>: (<br>            <span class="hljs-string">&#x27;base&#x27;</span>:<span class="hljs-number">#e26237</span>,<br>        ),<br>        <span class="hljs-string">&#x27;error&#x27;</span>: (<br>            <span class="hljs-string">&#x27;base&#x27;</span>:<span class="hljs-number">#cf4444</span>,<br>        ),<br>    )<br>);<br></code></pre></td></tr></table></figure><p>然后配置ElementPlus采用scss样式配色系统</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br><br>  <span class="hljs-comment">// ...</span><br><br>  <span class="hljs-attr">plugins</span>: [<br><br>    <span class="hljs-comment">// ...</span><br><br>    <span class="hljs-title class_">AutoImport</span>(&#123;<br>      <span class="hljs-attr">resolvers</span>: [<span class="hljs-title class_">ElementPlusResolver</span>()],<br>    &#125;),<br>    <span class="hljs-title class_">Components</span>(&#123;<br>      <span class="hljs-attr">resolvers</span>: [<br>        <span class="hljs-title class_">ElementPlusResolver</span>(&#123;<br>          <span class="hljs-attr">importStyle</span>:<span class="hljs-string">&quot;sass&quot;</span>,<br>        &#125;)<br>      ],<br>    &#125;),<br>  ],<br>&#125;)<br></code></pre></td></tr></table></figure><p>剩下的工作在下一节</p><h3 id="scss文件的自动导入"><a href="#scss文件的自动导入" class="headerlink" title="scss文件的自动导入"></a>scss文件的自动导入</h3><p>在项目里一些组件的css属性需要反复调用。为了省去调用的步骤，可以进行自动导入。在<code>vite.config.js</code>文件中插入其css属性</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br><br>  <span class="hljs-comment">// ...</span><br><br>  <span class="hljs-attr">css</span>: &#123;<br>      <span class="hljs-attr">preprocessorOptions</span>: &#123;<br>        <span class="hljs-attr">scss</span>: &#123;<br>          <span class="hljs-attr">additionalData</span>: <span class="hljs-string">`</span><br><span class="hljs-string">          @use &quot;@/styles/element/index.scss&quot; as *;</span><br><span class="hljs-string">          @use &quot;@/styles/var.scss&quot; as *;</span><br><span class="hljs-string">          `</span>,<br>        &#125;,<br>      &#125;,<br>    &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure><p>此处也包含了自动引入element-plus的导入，这部分在此处起到了样式覆盖的作用，也是必要的一部分</p><div class="note note-info">            <p>在<code>vite.config.js</code>文件中还可以定义其他属性，例如默认src下的目录均为<code>@</code>的写法</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">resolve</span>: &#123;<br>  <span class="hljs-attr">alias</span>: &#123;<br>    <span class="hljs-string">&#x27;@&#x27;</span>: <span class="hljs-title function_">fileURLToPath</span>(<span class="hljs-keyword">new</span> <span class="hljs-title function_">URL</span>(<span class="hljs-string">&#x27;./src&#x27;</span>, <span class="hljs-keyword">import</span>.<span class="hljs-property">meta</span>.<span class="hljs-property">url</span>))<br>  &#125;,<br>&#125;<br></code></pre></td></tr></table></figure><p>（但在现在可以编辑器自动补全和typescript自动导入的情况下还有必要这么做吗？）</p>          </div><h3 id="全局scss样式指定"><a href="#全局scss样式指定" class="headerlink" title="全局scss样式指定"></a>全局scss样式指定</h3><p>在style文件夹下新建<code>common.scss</code>文件，指定全局样式，<a href="#commonscss">点击查看代码</a></p><h2 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h2><h3 id="common-scss"><a href="#common-scss" class="headerlink" title="common.scss"></a>common.scss</h3><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br></pre></td><td class="code"><pre><code class="hljs scss"><span class="hljs-comment">// 重置样式</span><br>* &#123;<br>    <span class="hljs-attribute">box-sizing</span>: border-box;<br>&#125;<br><br><span class="hljs-selector-tag">html</span> &#123;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;<br>&#125;<br><br><span class="hljs-selector-tag">body</span> &#123;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;<br>    <span class="hljs-attribute">min-width</span>: <span class="hljs-number">1240px</span>;<br>    <span class="hljs-attribute">font</span>: <span class="hljs-number">1em</span>/<span class="hljs-number">1.4</span> <span class="hljs-string">&#x27;Microsoft Yahei&#x27;</span>, <span class="hljs-string">&#x27;PingFang SC&#x27;</span>, <span class="hljs-string">&#x27;Avenir&#x27;</span>, <span class="hljs-string">&#x27;Segoe UI&#x27;</span>,<br>        <span class="hljs-string">&#x27;Hiragino Sans GB&#x27;</span>, <span class="hljs-string">&#x27;STHeiti&#x27;</span>, <span class="hljs-string">&#x27;Microsoft Sans Serif&#x27;</span>, <span class="hljs-string">&#x27;WenQuanYi Micro Hei&#x27;</span>,<br>        sans-serif;<br>&#125;<br><br><span class="hljs-selector-tag">body</span>,<br><span class="hljs-selector-tag">ul</span>,<br><span class="hljs-selector-tag">h1</span>,<br><span class="hljs-selector-tag">h3</span>,<br><span class="hljs-selector-tag">h4</span>,<br><span class="hljs-selector-tag">p</span>,<br><span class="hljs-selector-tag">dl</span>,<br><span class="hljs-selector-tag">dd</span> &#123;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-selector-tag">a</span> &#123;<br>    <span class="hljs-attribute">text-decoration</span>: none;<br>    <span class="hljs-attribute">color</span>: <span class="hljs-number">#333</span>;<br>    <span class="hljs-attribute">outline</span>: none;<br>&#125;<br><br><span class="hljs-selector-tag">i</span> &#123;<br>    <span class="hljs-attribute">font-style</span>: normal;<br>&#125;<br><br><span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">&#x27;text&#x27;</span>]</span>,<br><span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">&#x27;search&#x27;</span>]</span>,<br><span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">&#x27;password&#x27;</span>]</span>,<br><span class="hljs-selector-tag">input</span><span class="hljs-selector-attr">[type=<span class="hljs-string">&#x27;checkbox&#x27;</span>]</span> &#123;<br>    <span class="hljs-attribute">padding</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">outline</span>: none;<br>    <span class="hljs-attribute">border</span>: none;<br>    -webkit-appearance: none;<br><br>    &amp;<span class="hljs-selector-pseudo">::placeholder</span> &#123;<br>        <span class="hljs-attribute">color</span>: <span class="hljs-number">#ccc</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-selector-tag">img</span> &#123;<br>    <span class="hljs-attribute">max-width</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">max-height</span>: <span class="hljs-number">100%</span>;<br>    <span class="hljs-attribute">vertical-align</span>: middle;<br>    <span class="hljs-attribute">background</span>: <span class="hljs-number">#ebebeb</span> <span class="hljs-built_in">url</span>(<span class="hljs-string">&#x27;@/assets/images/200.png&#x27;</span>) no-repeat center / contain;<br>&#125;<br><br><span class="hljs-selector-tag">ul</span> &#123;<br>    <span class="hljs-attribute">list-style</span>: none;<br>&#125;<br><br><span class="hljs-selector-id">#app</span> &#123;<br>    <span class="hljs-attribute">background</span>: <span class="hljs-number">#f5f5f5</span>;<br>    user-select: none;<br>&#125;<br><br><span class="hljs-selector-class">.container</span> &#123;<br>    <span class="hljs-attribute">width</span>: <span class="hljs-number">1240px</span>;<br>    <span class="hljs-attribute">margin</span>: <span class="hljs-number">0</span> auto;<br>    <span class="hljs-attribute">position</span>: relative;<br>&#125;<br><br><span class="hljs-selector-class">.ellipsis</span> &#123;<br>    <span class="hljs-attribute">white-space</span>: nowrap;<br>    <span class="hljs-attribute">text-overflow</span>: ellipsis;<br>    <span class="hljs-attribute">overflow</span>: hidden;<br>&#125;<br><br><span class="hljs-selector-class">.ellipsis-2</span> &#123;<br>    <span class="hljs-attribute">word-break</span>: break-all;<br>    <span class="hljs-attribute">text-overflow</span>: ellipsis;<br>    <span class="hljs-attribute">display</span>: -webkit-box;<br>    -webkit-box-orient: vertical;<br>    -webkit-line-clamp: <span class="hljs-number">2</span>;<br>    <span class="hljs-attribute">overflow</span>: hidden;<br>&#125;<br><br><span class="hljs-selector-class">.fl</span> &#123;<br>    <span class="hljs-attribute">float</span>: left;<br>&#125;<br><br><span class="hljs-selector-class">.fr</span> &#123;<br>    <span class="hljs-attribute">float</span>: right;<br>&#125;<br><br><span class="hljs-selector-class">.clearfix</span><span class="hljs-selector-pseudo">:after</span> &#123;<br>    <span class="hljs-attribute">content</span>: <span class="hljs-string">&#x27;.&#x27;</span>;<br>    <span class="hljs-attribute">display</span>: block;<br>    <span class="hljs-attribute">visibility</span>: hidden;<br>    <span class="hljs-attribute">height</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">line-height</span>: <span class="hljs-number">0</span>;<br>    <span class="hljs-attribute">clear</span>: both;<br>&#125;<br><br><span class="hljs-comment">// reset element</span><br><span class="hljs-selector-class">.el-breadcrumb__inner</span><span class="hljs-selector-class">.is-link</span> &#123;<br>    <span class="hljs-attribute">font-weight</span>: <span class="hljs-number">400</span> <span class="hljs-meta">!important</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note note-info&quot;&gt;
            &lt;p&gt;vue中各种语法结构和语法糖看着实在是一头雾水，现在决定从头敲一个UI界面出来，这里是黑马程序员的小兔鲜&lt;/p&gt;
          &lt;/div&gt;

&lt;h2 id=&quot;需要的组件&quot;&gt;&lt;a hre</summary>
      
    
    
    
    <category term="前端" scheme="http://example.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>正则表达式的用法</title>
    <link href="http://example.com/2025/04/29/regex/"/>
    <id>http://example.com/2025/04/29/regex/</id>
    <published>2025-04-29T07:17:15.000Z</published>
    <updated>2025-04-29T09:59:02.112Z</updated>
    
    <content type="html"><![CDATA[<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p><a href="https://www.runoob.com/regexp/regexp-tutorial.html">参考资料</a></p><h2 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h2><h3 id="普通字符"><a href="#普通字符" class="headerlink" title="普通字符"></a>普通字符</h3><table><thead><tr><th>字符</th><th>描述</th></tr></thead><tbody><tr><td><code>[aeiou]</code></td><td>匹配<code>[ ]</code>中的所有字符</td></tr><tr><td><code>[^aeiou]</code></td><td>匹配除<code>[ ]</code>中的所有字符</td></tr><tr><td><code>[A-Z]</code></td><td><code>[A-Z]</code>表示一个区间，匹配所有大写字母</td></tr><tr><td><code>\w</code></td><td>匹配字母、数字、下划线，等价于<code>[A-Za-z0-9_]</code></td></tr><tr><td><code>\d</code></td><td>匹配阿拉伯数字，等价于<code>[0-9]</code></td></tr></tbody></table><h3 id="非打印字符"><a href="#非打印字符" class="headerlink" title="非打印字符"></a>非打印字符</h3><table><thead><tr><th>字符</th><th>描述</th></tr></thead><tbody><tr><td><code>\cx</code></td><td>由x指明的控制字符。如<code>\cM</code>匹配一个 Control-M 或回车符</td></tr><tr><td><code>\f</code></td><td>换页符，等价于<code>\x0c</code> <code>\cL</code></td></tr><tr><td><code>\n</code></td><td>换行符，等价于<code>\x0a</code> <code>\cJ</code></td></tr><tr><td><code>\r</code></td><td>换行符，等价于<code>\x0d</code> <code>\cM</code></td></tr><tr><td><code>\s</code></td><td>空白符，等价于<code>[\f\n\r\t\v]</code></td></tr><tr><td><code>\S</code></td><td>非空白符，等价于<code>[^\f\n\r\t\v]</code></td></tr><tr><td><code>\t</code></td><td>制表符，等价于<code>\x09</code> <code>\cI</code></td></tr><tr><td><code>\v</code></td><td>垂直制表符，等价于<code>\x0b</code> <code>\cK</code></td></tr></tbody></table><h3 id="特殊字符"><a href="#特殊字符" class="headerlink" title="特殊字符"></a>特殊字符</h3><table><thead><tr><th>字符</th><th>描述</th></tr></thead><tbody><tr><td><code>( )</code></td><td>子表达式</td></tr><tr><td><code>(...)*</code></td><td>匹配前面子表达式零次或多次</td></tr><tr><td><code>(...)+</code></td><td>匹配前面子表达式一次或多次</td></tr><tr><td><code>(...)?</code></td><td>匹配前面子表达式零次或一次</td></tr><tr><td><code>(...)|(...)</code></td><td>匹配<code>|</code>两边的任意一种</td></tr><tr><td><code>.</code></td><td>匹配除换行符外的任一字符，等价于<code>[^\n\r]</code></td></tr></tbody></table><h3 id="定位符"><a href="#定位符" class="headerlink" title="定位符"></a>定位符</h3><table><thead><tr><th>字符</th><th>描述</th></tr></thead><tbody><tr><td><code>^</code></td><td>字符串开始的位置</td></tr><tr><td><code>$</code></td><td>字符串结尾的位置</td></tr><tr><td><code>\b</code></td><td>匹配一个单词的边界</td></tr><tr><td><code>\B</code></td><td>非单词边界匹配</td></tr><tr><td><code>\&lt;n&gt;</code></td><td>匹配第<code>n</code>个捕获组的内容，进行反向引用</td></tr></tbody></table><h3 id="限定符"><a href="#限定符" class="headerlink" title="限定符"></a>限定符</h3><table><thead><tr><th>字符</th><th>描述</th></tr></thead><tbody><tr><td><code>&#123;n,m&#125;</code></td><td>其中n &lt;&#x3D; m，放在子表达式后，最少匹配n次，最多匹配m次，缺少其中一个数字则表示不设限</td></tr><tr><td><code>&#123;n&#125;</code></td><td>匹配确定的n次</td></tr></tbody></table><h3 id="贪婪与非贪婪量词"><a href="#贪婪与非贪婪量词" class="headerlink" title="贪婪与非贪婪量词"></a>贪婪与非贪婪量词</h3><p>默认情况下，量词(<code>*</code> <code>+</code> <code>?</code> <code>&#123;&#125;</code>)会尽可能匹配多个字符（贪婪的），量词后加<code>?</code>会使其尽可能少匹配（非贪婪的）。具体可见<a href="#%E8%B4%AA%E5%A9%AA%E4%B8%8E%E9%9D%9E%E8%B4%AA%E5%A9%AA%E7%9A%84%E5%8C%BA%E5%88%AB">这里</a></p><h3 id="正向与负向检查"><a href="#正向与负向检查" class="headerlink" title="正向与负向检查"></a>正向与负向检查</h3><table><thead><tr><th>字符</th><th>描述</th></tr></thead><tbody><tr><td><code>(?=...)</code></td><td>正向肯定检查，匹配后面跟着特定模式的位置</td></tr><tr><td><code>(?!...)</code></td><td>正向否定预查，匹配后面不跟着特定模式的位置</td></tr><tr><td><code>(?&lt;=...)</code></td><td>反向肯定预查，匹配前面是特定模式的位置</td></tr><tr><td><code>(?&lt;!...)</code></td><td>反向否定预查，匹配前面不是特定模式的位置</td></tr></tbody></table><h3 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h3><p><code>/.../g</code>中的g就是一个修饰符</p><table><thead><tr><th>字符</th><th>描述</th></tr></thead><tbody><tr><td><code>i</code></td><td>忽略大小写</td></tr><tr><td><code>g</code></td><td>全局匹配</td></tr><tr><td><code>m</code></td><td>改变<code>^</code>和<code>$</code>的行为，使其匹配每行的开头和结尾，而不仅是整个字符串的开头和结尾</td></tr><tr><td><code>s</code></td><td>单行模式</td></tr><tr><td><code>u</code></td><td>Unicode模式</td></tr><tr><td><code>y</code></td><td>粘性匹配，从目标字符串的当前位置开始匹配（使用<code>lastIndex</code>属性）</td></tr><tr><td><code>x</code></td><td>扩展模式，忽略模式中的空白和注释，使正则表达式更易读</td></tr></tbody></table><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>匹配a某c</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/a.<span class="hljs-property">c</span>/g<br></code></pre></td></tr></table></figure><p>匹配一个正整数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/[<span class="hljs-number">1</span>-<span class="hljs-number">9</span>][<span class="hljs-number">0</span>-<span class="hljs-number">9</span>]*/g<br></code></pre></td></tr></table></figure><p>匹配一个两位数</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/[<span class="hljs-number">1</span>-<span class="hljs-number">9</span>][<span class="hljs-number">1</span>-<span class="hljs-number">9</span>]?/g<br></code></pre></td></tr></table></figure><p>匹配开头为<code>nig</code>的单词</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/\bnig/g<br></code></pre></td></tr></table></figure><p>匹配开头为<code>nig</code>的字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/^nig/<br></code></pre></td></tr></table></figure><p>匹配含有<code>ay</code>但不在结尾的单词</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/ay\B/g<br></code></pre></td></tr></table></figure><p>查找重复的单词</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/\<span class="hljs-title function_">b</span>([a-z]+) \<span class="hljs-number">1</span>\b/igm<br></code></pre></td></tr></table></figure><p>匹配后面跟着<code>95</code>或<code>98</code>的<code>Windows</code></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/<span class="hljs-title class_">Windows</span>(?!<span class="hljs-number">95</span>|<span class="hljs-number">98</span>)/g<br></code></pre></td></tr></table></figure><p>匹配一个邮箱</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/\b[\w.%+-]+@[\w.-]+\.[a-zA-Z]&#123;<span class="hljs-number">2</span>,<span class="hljs-number">6</span>&#125;\b/g<br></code></pre></td></tr></table></figure><p>其中</p><ul><li><code>[\w.%+-]+</code> 匹配一个由字母、数字、下划线、<code>.</code>、<code>%</code>、<code>+</code>、<code>-</code>或<code>*</code>组成的字符串</li><li><code>[a-zA-Z]&#123;2,6&#125;</code>至少由2-6个字符组成的字符串</li></ul><p>匹配HTML标记</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/&lt;[a-zA-Z]+.*?&gt;([\s\S]*?)&lt;<span class="hljs-regexp">/[a-zA-Z]*?&gt;/g</span><br></code></pre></td></tr></table></figure><p>匹配多于两个a的字符串</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/^a&#123;<span class="hljs-number">2</span>,&#125;/<br></code></pre></td></tr></table></figure><h3 id="贪婪与非贪婪的区别"><a href="#贪婪与非贪婪的区别" class="headerlink" title="贪婪与非贪婪的区别"></a>贪婪与非贪婪的区别</h3><p>对于同一个字符串 <code>&lt;h1&gt; 正则表达式的用法 &lt;/h1&gt;</code>，一般情况下的匹配</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/<span class="language-xml">&lt;.*&gt;/s</span><br></code></pre></td></tr></table></figure><p>会匹配整个字符串的内容（整个字符串都符合），但在非贪婪下的匹配</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/<span class="language-xml">&lt;.*?&gt;/s</span><br></code></pre></td></tr></table></figure><p>或者</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js">/<span class="language-xml">&lt;\w+?&gt;/s</span><br></code></pre></td></tr></table></figure><p>只匹配到<code>&lt;h1&gt;</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;引用&quot;&gt;&lt;a href=&quot;#引用&quot; class=&quot;headerlink&quot; title=&quot;引用&quot;&gt;&lt;/a&gt;引用&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://www.runoob.com/regexp/regexp-tutorial.html&quot;&gt;参考资料&lt;/a&gt;&lt;</summary>
      
    
    
    
    <category term="碎片知识" scheme="http://example.com/categories/%E7%A2%8E%E7%89%87%E7%9F%A5%E8%AF%86/"/>
    
    
    <category term="碎片知识" scheme="http://example.com/tags/%E7%A2%8E%E7%89%87%E7%9F%A5%E8%AF%86/"/>
    
    <category term="正则表达式" scheme="http://example.com/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    
  </entry>
  
  <entry>
    <title>vue-3 的使用</title>
    <link href="http://example.com/2025/03/04/vue3/"/>
    <id>http://example.com/2025/03/04/vue3/</id>
    <published>2025-03-04T03:02:54.000Z</published>
    <updated>2025-03-20T08:16:46.623Z</updated>
    
    <content type="html"><![CDATA[<h2 id="JavaScript提要"><a href="#JavaScript提要" class="headerlink" title="JavaScript提要"></a>JavaScript提要</h2><h3 id="变量与函数"><a href="#变量与函数" class="headerlink" title="变量与函数"></a>变量与函数</h3><p>变量声明有3种</p><table><thead><tr><th>变量声明</th><th>描述</th></tr></thead><tbody><tr><td><code>const</code></td><td>定义常量</td></tr><tr><td><code>let</code></td><td>局部变量，只在该大括号内生效</td></tr><tr><td><code>var</code></td><td>具有函数作用域</td></tr></tbody></table><p>变量类型有多种</p><table><thead><tr><th>类型</th><th>示例</th></tr></thead><tbody><tr><td><code>number</code></td><td><code>var x = 15</code></td></tr><tr><td><code>string</code></td><td><code>var s = &quot;RuiRui&quot;</code></td></tr><tr><td><code>boolean</code></td><td><code>var b = false</code></td></tr><tr><td><code>object.Array</code></td><td><code>var a = new Array(1, 2, 3)</code> <code>var a = [1, 2, 3]</code></td></tr><tr><td><code>object</code></td><td><code>var person = &#123;name: RuiRui, age: 19, id: 10&#125;</code></td></tr><tr><td><code>undefined</code></td><td><code>var i</code></td></tr><tr><td><code>null</code></td><td><code>var i = null</code></td></tr></tbody></table><p><strong>注解：</strong></p><ol><li><p>也可以使用 “<strong>` `</strong>“字符生成字符串模板，在字符串模板中使用 <code>$&#123;variable&#125;</code> 插入变量</p></li><li><p>可以使用<code>typeof</code>方法查看变量的数据类型</p></li><li><p>函数使用<code>function</code>声明</p></li><li><p>可以使用箭头<code>=&gt;</code>函数来简化操作</p></li><li><p>比较用<code>==</code>，严格比较（值和类型都相等）用<code>===</code>，严格不等于（值和类型至少有一个不相等）用<code>!==</code></p></li></ol><div class="note note-success">            <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 传统函数</span><br><span class="hljs-keyword">const</span> square = <span class="hljs-keyword">function</span>(<span class="hljs-params">x</span>) &#123;<br>    <span class="hljs-keyword">return</span> x * x;<br>&#125;;<br><br><span class="hljs-comment">// 箭头函数</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">square</span> = x =&gt; x * x;<br></code></pre></td></tr></table></figure><p>箭头函数形式简单适合作为回调函数，也没有<code>this</code></p>          </div><h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><p>术语为HTML的DOM事件。以下为常用的事件</p><table>  <tbody>    <tr><th>事件</th> <th>描述</th></tr>    <tr><td>onchange</td><td> HTML 元素改变</td></tr>    <tr><td>onclick</td><td>用户点击 HTML 元素</td></tr>    <tr><td>onmouseover</td><td>鼠标指针移动到指定的元素上时发生</td></tr>    <tr><td>onmouseout</td><td>用户从一个 HTML 元素上移开鼠标时发生</td></tr>    <tr><td>onkeydown</td><td>用户按下键盘按键</td></tr>    <tr><td>onload</td><td>浏览器已完成页面的加载</td></tr></tbody></table><p>更多事件可以点击<a href="https://www.runoob.com/jsref/dom-obj-event.html">这里</a></p><h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><p>使用<code>/    /</code>框住正则表达式</p><p>后面可以添加<strong>修饰符</strong></p><table><thead><tr><th>修饰符</th><th>描述</th></tr></thead><tbody><tr><td>i</td><td>大小写不敏感匹配</td></tr><tr><td>g</td><td>全局匹配，查找所有匹配</td></tr><tr><td>m</td><td>多行匹配</td></tr></tbody></table><p><strong>括号</strong>用于查找某个范围内的字符</p><table><thead><tr><th>表达式</th><th>描述</th></tr></thead><tbody><tr><td><code>[abc]</code></td><td>查找方括号内任何字符</td></tr><tr><td><code>[^abc]</code></td><td>查找集合内的任何字符</td></tr><tr><td><code>[0-9]</code></td><td>查找0-9内的数字</td></tr><tr><td><code>[A-Z]</code></td><td>查找任何大写字符</td></tr><tr><td><code>(r|g|b)</code></td><td>查找任意指定选项</td></tr></tbody></table><p><strong>元字符</strong>表示特殊含义</p><table><thead><tr><th>元字符</th><th>描述</th></tr></thead><tbody><tr><td><code>\d</code></td><td>查找数字</td></tr><tr><td><code>\w</code></td><td>查找数字、字母和下划线</td></tr><tr><td><code>\s</code></td><td>查找空白字符</td></tr><tr><td><code>\b</code></td><td>查找空白边界</td></tr><tr><td><code>\uxxxx</code></td><td>查找十六进制Unicode字符</td></tr></tbody></table><p><strong>量词</strong>表示字符的次数</p><table><thead><tr><th>量词</th><th>描述</th></tr></thead><tbody><tr><td><code>n+</code></td><td>包含至少一个n的字符串</td></tr><tr><td><code>n*</code></td><td>除只包含一个外全部包含</td></tr><tr><td><code>n?</code></td><td>除包含多个外全部包含</td></tr><tr><td><code>n&#123;X&#125;</code> <code>n&#123;X,&#125;</code> <code>n&#123;X,Y&#125;</code></td><td>包含X个   至少包含X个   包含个数在[X, Y]之间</td></tr><tr><td><code>n$</code></td><td>结尾为n时匹配</td></tr><tr><td><code>^n</code></td><td>开头为n时匹配</td></tr><tr><td><code>?=n</code></td><td>紧接n前的字符串</td></tr><tr><td><code>?!n</code></td><td>不紧接n前的字符串</td></tr></tbody></table><div class="note note-info">            <p>多数情况下，元字符的大写表示寻找不符合的字符</p>          </div><p>更多规则可以点击<a href="https://www.runoob.com/jsref/jsref-obj-regexp.html">这里</a></p><h3 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h3><p>闭包通常在以下场景中形成：</p><ul><li>当一个函数被定义在另一个函数内部时，内部函数可以访问外部函数的变量。</li><li>当内部函数被外部函数返回时，内部函数可以继续访问外部函数的变量，即使外部函数的执行上下文已经结束。</li></ul><p>闭包的典型结构如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">outerFunction</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">let</span> outerVariable = <span class="hljs-string">&quot;I am from outer function&quot;</span>;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">innerFunction</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(outerVariable); <span class="hljs-comment">// 访问外部函数的变量</span><br>    &#125;<br><br>    <span class="hljs-keyword">return</span> innerFunction; <span class="hljs-comment">// 返回内部函数</span><br>&#125;<br><br><span class="hljs-keyword">const</span> myClosure = <span class="hljs-title function_">outerFunction</span>(); <span class="hljs-comment">// myClosure 是闭包</span><br><span class="hljs-title function_">myClosure</span>(); <span class="hljs-comment">// 输出: I am from outer function</span><br></code></pre></td></tr></table></figure><h2 id="环境构建"><a href="#环境构建" class="headerlink" title="环境构建"></a>环境构建</h2><h3 id="cdn"><a href="#cdn" class="headerlink" title="cdn"></a>cdn</h3><p>在 <code>&lt;script&gt;</code> 标签中加入src路径</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;https://unpkg.com/vue@3/dist/vue.global.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="ES模板"><a href="#ES模板" class="headerlink" title="ES模板"></a>ES模板</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;module&quot;</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">  <span class="hljs-keyword">import</span> &#123; createApp, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;https://unpkg.com/vue@3/dist/vue.esm-browser.js&#x27;</span></span><br><span class="language-javascript">  ...</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="vite"><a href="#vite" class="headerlink" title="vite"></a>vite</h3><p>在项目所在的文件夹下打开命令行，输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm create vite@latest &lt;name&gt; --template vue<br></code></pre></td></tr></table></figure><p><img src="/2025/03/04/vue3/config1.png" alt="选择vue"></p><p><img src="/2025/03/04/vue3/config2.png" alt="选择类型（一般是JavaScript）"></p><p>这样，大体的框架就搭建好了，还需要按照终端上的指示行动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">cd</span> <span class="hljs-built_in">test</span><br>npm install<br>npm run dev<br></code></pre></td></tr></table></figure><p>最后会指示一个本地端口，用于打开一个HelloWorld网页，按CTRL+C停止</p><div class="note note-info">            <p>保存App文件时，网页也会跟着发生改变。如果没有，就试着刷新一下</p>          </div><p><img src="/2025/03/04/vue3/config3.png" alt="最后就像这样子"></p><h2 id="大体结构"><a href="#大体结构" class="headerlink" title="大体结构"></a>大体结构</h2><p>在默认生成的代码中，App.vue的格式与HTML大致相同。其中，<code>\&lt;template\&gt;</code>标签定义组件的HTML结构，<code>\&lt;script\&gt;</code>标签定义组件的逻辑部分，<code>\&lt;style\&gt;</code>标签定义组件的样式。<br>Vue3中的应用是通过使用<code>createApp</code>函数来创建的，并必须在调用了<code>.mount()</code>方法后才会渲染出来。但这些都包含在文件<code>main.js</code>中，无需操心</p><p><strong>注释</strong></p><ul><li><code>\&lt;style scoped\&gt;</code>: 给打包后自动给组件内的 CSS 加上作用域，避免不同组件之间相同的 CSS 类互相干扰</li><li><code>export</code>即导出，<code>import</code>即导入，这两个是JavaScript ES6引入的新特性，用于实现模块化。每一个 Vue 组件又必须有<code>export</code>（App.vue也不例外，它被main.js引入）。毕竟组件通过<code>export</code>导出一个配置对象，虽然不一定是<code>export default &#123; ... &#125;</code>的形式，也可以是命名导出，但总之必须<code>export</code>出去。<code>import</code>不是必须的，毕竟如果功能简单或者其他什么因素，也不需要用到别的组件</li><li>其中的<code>$mount(App)</code>用于将vue元素挂载到DOM元素上</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>)<br></code></pre></td></tr></table></figure><h2 id="模板语法"><a href="#模板语法" class="headerlink" title="模板语法"></a>模板语法</h2><h3 id="Mustache插值"><a href="#Mustache插值" class="headerlink" title="Mustache插值"></a>Mustache插值</h3><p>可以通过两个大括号<code>&#123;&#123;   &#125;&#125;</code>进行直接插值</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h2</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello, Vue 3!&#x27;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="v-text"><a href="#v-text" class="headerlink" title="v-text"></a><code>v-text</code></h3><p>该指令可以等效于Mustache插值，但Mustache插值更为灵活</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">v-text</span> = <span class="hljs-string">massage</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br><span class="hljs-comment">&lt;!-- equals to --&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">span</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a><code>v-html</code></h3><p>该指令向属性值以HTML形式注入到响应的节点。但该内容不会在Vue中编译，且在网站上动态渲染网页易受到XSS攻击</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-html</span>= <span class="hljs-string">html</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello, Vue 3!&#x27;</span>,</span><br><span class="language-javascript">      <span class="hljs-attr">html</span>: <span class="hljs-string">&#x27;&lt;p&gt;This is a paragraph&lt;/p&gt;&#x27;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>效果如图所示</p><p><img src="/2025/03/04/vue3/v-html.png" alt="\&lt;p\&gt;标签被成功注入了网页中"></p><h3 id="v-once"><a href="#v-once" class="headerlink" title="v-once"></a><code>v-once</code></h3><p>只渲染元素合组件一次，重新渲染时会被直接跳过</p><h3 id="v-memo"><a href="#v-memo" class="headerlink" title="v-memo"></a><code>v-memo</code></h3><p>该指令接收一个数组，若数组中的每个值都和上次渲染时的相同，，则整个子树的更新都会跳过。当其接收的数组为空数组时，与&#96;&#96;v-once&#96;指令等价。</p><h3 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a><code>v-bind</code></h3><p>可以缩写为<code>:</code>，当使用<code>.prop</code>修饰符时，也可以缩写为<code>.</code><br>用于将变量属性的绑定，以设置元素的样式，如<code>style</code>属性，<code>type</code>属性等</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">:style</span>=<span class="hljs-string">&quot;style.div&quot;</span>&gt;</span><br>    &#123;&#123; message &#125;&#125;<br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">message</span>: <span class="hljs-string">&#x27;Hello, Vue 3!&#x27;</span>,</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  <span class="hljs-attr">computed</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-title function_">style</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">        <span class="hljs-string">&#x27;div&#x27;</span>: &#123;</span><br><span class="language-javascript">          <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;red&#x27;</span>,</span><br><span class="language-javascript">          <span class="hljs-attr">fontSize</span>: <span class="hljs-string">&#x27;50px&#x27;</span>,</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>最后结果为</p><p><img src="/2025/03/04/vue3/v-bind.png" alt="将脚本下的元素绑定到了HTML下"></p><h3 id="v-on"><a href="#v-on" class="headerlink" title="v-on"></a><code>v-on</code></h3><p>可以缩写为<code>@</code>符号<br>用于监听DOM事件，从而执行JavaScript代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;counter++&quot;</span>&gt;</span>Increment<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>Counter: &#123;&#123; counter &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">counter</span>: <span class="hljs-number">0</span>,</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>最后会生成一个按钮，点击一次会产生相应反应</p><p><img src="/2025/03/04/vue3/v-on.png" alt="下面的计数器会加1"></p><h3 id="v-model"><a href="#v-model" class="headerlink" title="v=model"></a><code>v=model</code></h3><p>在表单标签上加上该指令，标签上的初始值会被忽略，从而实现双向绑定<br>以下的代码相互等价</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;value&quot;</span>/&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;value&quot;</span> @<span class="hljs-attr">input</span>=<span class="hljs-string">&quot;value = $event.target.value&quot;</span></span><br></code></pre></td></tr></table></figure><p>以下代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;value&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">p</span>&gt;</span>&#123;&#123; value &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> value = <span class="hljs-string">&#x27;test&#x27;</span></span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">      value,</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>的输出结果为</p><p><img src="/2025/03/04/vue3/v-model.png" alt="上面输入什么，下面就输出什么"></p><div class="note note-info">            <p><code>v-model</code> 指令一般用于表单的输入中，如<code>&lt;input/&gt;</code> <code>&lt;select/&gt;</code> <code>&lt;radio/&gt;</code> <code>&lt;checkbox/&gt;</code> 等等<br><code>v-bind</code> 范围更为广泛，链接等元素也能用</p>          </div><p><code>v-model</code> 有以下3种修饰符</p><table><thead><tr><th>修饰符</th><th>作用</th></tr></thead><tbody><tr><td><code>.lazy</code></td><td>监听的是change事件而非input事件，如当输入框失去焦点后才会响应</td></tr><tr><td><code>.number</code></td><td>输入框得到的数据一般是字符串格式，此处转换为数字格式</td></tr><tr><td><code>.trim</code></td><td>去掉输入内容前后的空格</td></tr></tbody></table><h2 id="组合式api"><a href="#组合式api" class="headerlink" title="组合式api"></a>组合式api</h2><p>组合式api是vue3中一种新的api形式，相比以前的选项式api更为灵活，以下两个实例可以看出二者的差别</p><p>选项式api</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">data</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123;<br>      <span class="hljs-attr">count</span>: <span class="hljs-number">0</span><br>    &#125;;<br>  &#125;,<br>  <span class="hljs-attr">methods</span>: &#123;<br>    <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++;<br>    &#125;<br>  &#125;,<br>  <span class="hljs-attr">computed</span>: &#123;<br>    <span class="hljs-title function_">doubleCount</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>;<br>    &#125;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><p>组合式api</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; ref, computed &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;<br>  <span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>);<br><br>    <span class="hljs-keyword">const</span> <span class="hljs-title function_">increment</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>      count.<span class="hljs-property">value</span>++;<br>    &#125;;<br><br>    <span class="hljs-keyword">const</span> doubleCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-keyword">return</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>;<br>    &#125;);<br><br>    <span class="hljs-keyword">return</span> &#123;<br>      count,<br>      increment,<br>      doubleCount<br>    &#125;;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><table><thead><tr><th>条件语句</th><th>作用</th></tr></thead><tbody><tr><td><code>v-if</code></td><td>元素在false时不会渲染到DOM中</td></tr><tr><td><code>v-else</code> <code>v-else-if</code></td><td>配合<code>v-if</code>使用</td></tr><tr><td><code>v-show</code></td><td>元素总是会渲染，但元素在false时不会显示</td></tr><tr><td><code>v-for</code></td><td>遍历数组或对象，格式为<code>v-for=&quot;(value, key, index) in object&quot;</code></td></tr></tbody></table><div class="note note-info">            <p>不支持<code>v-if</code>和<code>v-for</code>同时出现在同一元素中</p>          </div><h2 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h2><h3 id="组件的声明"><a href="#组件的声明" class="headerlink" title="组件的声明"></a>组件的声明</h3><p>根据引入位置的不同，可以将组件分为全局组件和局部组件</p><p>以下为全局组件的内容，若引用成功，则输出棕色字体</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color:brown&quot;</span>&gt;</span>This is a global component<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;GlobalComponent&#x27;</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>以下为局部组件的内容，若引用成功，则输出蓝色字体</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: blue;&quot;</span>&gt;</span>This is a part component<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;PartComponent&#x27;</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>以下为动态组件中绑定的内容</p><p><strong>Test1</strong> 打印绿色字体</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: green;&quot;</span>&gt;</span>This is a test1 component<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Test1&#x27;</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p><strong>Test2</strong> 打印橙色字体</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">h1</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;color: orange;&quot;</span>&gt;</span>This is a test2 component<span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Test2&#x27;</span></span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><p>接下来需要在<code>main.js</code>中进行全局组件的注册</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span>;<br><br><span class="hljs-comment">// 引入全局组件Header</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Header</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/global.vue&#x27;</span>;<br><br><span class="hljs-comment">// 初始化实例</span><br><span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">component</span>(<span class="hljs-string">&#x27;global&#x27;</span>, <span class="hljs-title class_">Header</span>).<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>);<br><br></code></pre></td></tr></table></figure><p>在<code>App.vue</code>中引入所有组件</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- 全局组件 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">global</span>/&gt;</span><br>  <span class="hljs-comment">&lt;!-- 局部组件 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">part-component</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>  <span class="hljs-comment">&lt;!-- 动态组件 --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;change(&#x27;Test1&#x27;)&quot;</span>&gt;</span>Test1<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">button</span> @<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;change(&#x27;Test2&#x27;)&quot;</span>&gt;</span>Test2<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">component</span> <span class="hljs-attr">:is</span>=<span class="hljs-string">&quot;currentComponent&quot;</span>/&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> <span class="hljs-title class_">PartComponent</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/part.vue&#x27;</span></span><br><span class="language-javascript"><span class="hljs-keyword">import</span> test1 <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/test1.vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">import</span> test2 <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./components/test2.vue&#x27;</span>;</span><br><span class="language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span><br><span class="language-javascript">  <span class="hljs-attr">components</span>: &#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// 局部组件和动态组件的声明</span></span><br><span class="language-javascript">    <span class="hljs-title class_">PartComponent</span>,</span><br><span class="language-javascript">    <span class="hljs-title class_">Test1</span>: test1,</span><br><span class="language-javascript">    <span class="hljs-title class_">Test2</span>: test2</span><br><span class="language-javascript">  &#125;,</span><br><span class="language-javascript">  setup () &#123;</span><br><span class="language-javascript">    <span class="hljs-comment">// 动态组件的切换方法，通过改变currentComponent的值来切换组件</span></span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> current = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&#x27;Test1&#x27;</span>);</span><br><span class="language-javascript">    <span class="hljs-keyword">const</span> <span class="hljs-title function_">change</span> = (<span class="hljs-params">component</span>) =&gt; &#123;</span><br><span class="language-javascript">      current.<span class="hljs-property">value</span> = component;</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    <span class="hljs-keyword">return</span> &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">currentComponent</span>: current,</span><br><span class="language-javascript">      change</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">  &#125;</span><br><span class="language-javascript">&#125;</span><br><span class="language-javascript"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br></code></pre></td></tr></table></figure><h2 id="路由"><a href="#路由" class="headerlink" title="路由"></a>路由</h2><p>使用路由，可以使网页在不重新加载页面的情况下改变URL，使用其功能</p><h3 id="路由插件的安装"><a href="#路由插件的安装" class="headerlink" title="路由插件的安装"></a>路由插件的安装</h3><p>创建完一个VUE项目后，在终端中输入指令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install vue-router@next --save<br></code></pre></td></tr></table></figure><p>在相应目录中安装路由相关依赖</p><h3 id="路由的使用"><a href="#路由的使用" class="headerlink" title="路由的使用"></a>路由的使用</h3><p>以下面的代码为例，说明路由的使用</p><h4 id="App-vue"><a href="#App-vue" class="headerlink" title="App.vue"></a>App.vue</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">h1</span>&gt;</span><br>  An example of a Vue 3 router.<br><span class="hljs-tag">&lt;/<span class="hljs-name">h1</span>&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">nav</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/&quot;</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">br</span>/&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-link</span> <span class="hljs-attr">to</span>=<span class="hljs-string">&quot;/about&quot;</span>&gt;</span>About<span class="hljs-tag">&lt;/<span class="hljs-name">router-link</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">main</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">router-view</span>/&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">main</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span><br></code></pre></td></tr></table></figure><p>不同于<code>&lt;a&gt;</code>标签，我们一般使用<code>&lt;router-link&gt;</code>标签创建链接，使用<code>&lt;router-view&gt;</code>组件使Vue Router知道我们想要在哪里渲染对应的路由组件</p><div class="note note-info">            <p><code>&lt;router-view&gt;</code>组件不一定要在App.vue中，但必须在某处被导入</p>          </div><h4 id="创建路由器实例"><a href="#创建路由器实例" class="headerlink" title="创建路由器实例"></a>创建路由器实例</h4><p>通过调用<code>createRouter()</code>函数创建路由器实例</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createMemoryHistory, createRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">HomeView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../components/HomeView.vue&quot;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">AboutView</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;../components/AboutView.vue&quot;</span>;<br><br><span class="hljs-keyword">const</span> routes = [<br>    &#123;<span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">HomeView</span>&#125;,<br>    &#123;<span class="hljs-attr">path</span>: <span class="hljs-string">&quot;/about&quot;</span>, <span class="hljs-attr">component</span>: <span class="hljs-title class_">AboutView</span>&#125;<br>];<br><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createRouter</span>(&#123;<br>    <span class="hljs-attr">history</span>: <span class="hljs-title function_">createMemoryHistory</span>(),<br>    routes<br>&#125;);<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> router;<br></code></pre></td></tr></table></figure><p>首先需要先引入相关库和路由指示的网页文件<br>其中的<code>routes</code>选项定义了一组路由，把URL路径映射到组件。其中，由<code>component</code>参数指定的组件就是先前在 App.vue 中被<code>&lt;RouterView&gt;</code>渲染的组件。这些路由组件通常被称为视图，但本质上它们只是普通的 Vue 组件<br><code>createMemoryHistory()</code>选项会完全忽略浏览器的URL而使用自己的URL</p><h3 id="注册路由器插件"><a href="#注册路由器插件" class="headerlink" title="注册路由器插件"></a>注册路由器插件</h3><p>在<code>main.js</code>中注册</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; createApp &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-title class_">App</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./App.vue&#x27;</span>;<br><span class="hljs-keyword">import</span> router <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./router/router.js&#x27;</span>;<br><br><span class="hljs-title function_">createApp</span>(<span class="hljs-title class_">App</span>).<span class="hljs-title function_">use</span>(router).<span class="hljs-title function_">mount</span>(<span class="hljs-string">&#x27;#app&#x27;</span>);<br></code></pre></td></tr></table></figure><p>注意需要将路由器实例引入进来，以及<code>use()</code>需要在<code>mount()</code>之前调用</p><h2 id="Axios"><a href="#Axios" class="headerlink" title="Axios"></a>Axios</h2><p>Axios用于向后端服务器发送请求</p><h3 id="post请求"><a href="#post请求" class="headerlink" title="post请求"></a>post请求</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">axios</span>(&#123;<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;post&#x27;</span>,<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/...&#x27;</span>,<br>  <span class="hljs-attr">data</span>: &#123;<br>    ...<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><h3 id="get请求"><a href="#get请求" class="headerlink" title="get请求"></a>get请求</h3><p>这是默认的axios请求方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">axios</span>(<span class="hljs-string">&#x27;/user/12345&#x27;</span>);<br></code></pre></td></tr></table></figure><p>也可以另外配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-title function_">axios</span>(&#123;<br>  <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;get&#x27;</span>,<br>  <span class="hljs-attr">url</span>: <span class="hljs-string">&#x27;/...&#x27;</span>,<br>&#125;)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span>&#123;<br>    ...<br>  &#125;)<br>  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>    ...<br>  &#125;);<br></code></pre></td></tr></table></figure><h2 id="Pinia"><a href="#Pinia" class="headerlink" title="Pinia"></a>Pinia</h2><p>在vue3后，我们一般使用Pinia做专属动态管理库<br><a href="https://pinia.vuejs.org/zh/introduction.html">点击进入Pinia的官方文档</a></p><h3 id="store是什么"><a href="#store是什么" class="headerlink" title="store是什么"></a>store是什么</h3><p>store是一个保存状态和业务逻辑的实体，它承载着全局状态，它有3个概念<code>state</code> <code>getter</code>和<code>action</code>，我们可以假设这些概念相当于组件中的 <code>data</code>、 <code>computed</code>和<code>methods</code>。<br>一个Store应该包含可以在整个应用中访问的数据。这包括在许多地方使用的数据，例如显示在导航栏中的用户信息，以及需要通过页面保存的数据，例如一个非常复杂的多步骤表单。</p><div class="note note-success">            <p>通俗地说，store就是一个适用于全局的组件</p>          </div><h3 id="定义store及其属性"><a href="#定义store及其属性" class="headerlink" title="定义store及其属性"></a>定义store及其属性</h3><h4 id="定义store"><a href="#定义store" class="headerlink" title="定义store"></a>定义store</h4><p>store用<code>defineStore()</code>定义，它的第一个参数要求是一个独一无二的名字，该名字最好是 <em>use…</em> 形式的</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">import</span> &#123; defineStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia&#x27;</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useAlertsStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;counter&#x27;</span>, &#123;<br><br>&#125;)<br></code></pre></td></tr></table></figure><p>在内部方法中传入一个带有<code>state</code>、<code>actions</code>与<code>getters</code>属性的 Option 对象</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;counter&#x27;</span>, &#123;<br>  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> (&#123; <span class="hljs-attr">count</span>: <span class="hljs-number">0</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Eduardo&#x27;</span> &#125;),<br>  <span class="hljs-attr">getters</span>: &#123;<br>    <span class="hljs-attr">doubleCount</span>: <span class="hljs-function">(<span class="hljs-params">state</span>) =&gt;</span> state.<span class="hljs-property">count</span> * <span class="hljs-number">2</span>,<br>  &#125;,<br>  <span class="hljs-attr">actions</span>: &#123;<br>    <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">count</span>++<br>    &#125;,<br>  &#125;,<br>&#125;)<br></code></pre></td></tr></table></figure><p>由于上述所说Option属性与组件属性的相似性，也可以直接代替</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useCounterStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;counter&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">const</span> count = <span class="hljs-title function_">ref</span>(<span class="hljs-number">0</span>)<br>  <span class="hljs-keyword">const</span> doubleCount = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> count.<span class="hljs-property">value</span> * <span class="hljs-number">2</span>)<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">increment</span>(<span class="hljs-params"></span>) &#123;<br>    count.<span class="hljs-property">value</span>++<br>  &#125;<br><br>  <span class="hljs-keyword">return</span> &#123; count, doubleCount, increment &#125;<br>&#125;)<br></code></pre></td></tr></table></figure><h4 id="访问state"><a href="#访问state" class="headerlink" title="访问state"></a>访问state</h4><p>默认情况下，可以直接对state进行读写</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> store = <span class="hljs-title function_">useStore</span>()<br>store.<span class="hljs-property">count</span>++<br></code></pre></td></tr></table></figure><p><strong>注解：</strong></p><ol><li><p>调用<code>store.$reset()</code>将state重置为初始值</p></li><li><p>调用<code>store.$patch()</code>在同一时间更改多个属性，但某些变更可能会很难实现</p></li></ol><h4 id="action"><a href="#action" class="headerlink" title="action"></a>action</h4><p>action可以异步操作</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-attr">actions</span>: &#123;<br>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">registerUser</span>(<span class="hljs-params">login, password</span>) &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">userData</span> = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">post</span>(&#123; login, password &#125;)<br>      <span class="hljs-title function_">showTooltip</span>(<span class="hljs-string">`Welcome back <span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.userData.name&#125;</span>!`</span>)<br>    &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>      <span class="hljs-title function_">showTooltip</span>(error)<br>      <span class="hljs-comment">// 让表单组件显示错误</span><br>      <span class="hljs-keyword">return</span> error<br>    &#125;<br>  &#125;,<br>&#125;,<br></code></pre></td></tr></table></figure><p>其中，<code>async</code>将函数标记为异步函数。<code>await</code>关键字将暂停函数执行直到该post请求被解决或拒绝</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;JavaScript提要&quot;&gt;&lt;a href=&quot;#JavaScript提要&quot; class=&quot;headerlink&quot; title=&quot;JavaScript提要&quot;&gt;&lt;/a&gt;JavaScript提要&lt;/h2&gt;&lt;h3 id=&quot;变量与函数&quot;&gt;&lt;a href=&quot;#变量与函数&quot; c</summary>
      
    
    
    
    <category term="前端" scheme="http://example.com/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
    <category term="前端" scheme="http://example.com/tags/%E5%89%8D%E7%AB%AF/"/>
    
    <category term="vue" scheme="http://example.com/tags/vue/"/>
    
    <category term="JavaScript" scheme="http://example.com/tags/JavaScript/"/>
    
  </entry>
  
  <entry>
    <title>数据结构和数值分析复习</title>
    <link href="http://example.com/2024/12/30/review-1/"/>
    <id>http://example.com/2024/12/30/review-1/</id>
    <published>2024-12-30T12:01:06.000Z</published>
    <updated>2024-12-30T13:41:13.555Z</updated>
    
    <content type="html"><![CDATA[<h2 id="频度"><a href="#频度" class="headerlink" title="频度"></a>频度</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c">k=<span class="hljs-number">0</span>;<br><span class="hljs-keyword">for</span>(i=<span class="hljs-number">1</span>;i&lt;=n;i++) &#123;<br>    <span class="hljs-keyword">for</span>(j=i; j&lt;=n; j++)<br>        @  k++;<br>&#125;<br></code></pre></td></tr></table></figure><p><code>@</code>语句的频度为</p><p>$$\displaystyle\sum^n_{i&#x3D;1}i&#x3D; \frac{n(n+1)}{2}$$</p><h2 id="循环队列"><a href="#循环队列" class="headerlink" title="循环队列"></a>循环队列</h2><p>假设将循环队列定义为：以域变量<code>rear</code>和<code>length</code>分别指示循环队列中队尾元素的位置和内含的元素个数，试给出此循环队列的队满条件，写出相应的入队列和出队列算法（出队列算法应返回队头元素）</p><p>设<code>num</code>为队列大小</p><div class="note note-info">            <p>队满条件可以设置为<code>(rear + length) % num = 0</code> 或 <code>rear-&gt;next == front</code><br>队空条件可设置为<code>rear == front</code></p>          </div><p>入队列算法，先检查队满与否，若不满，则在<code>rear</code>位置插入数据，rear和length都加一。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">enqueue</span><span class="hljs-params">(<span class="hljs-type">int</span> <span class="hljs-built_in">queue</span>[], <span class="hljs-type">int</span> rear, <span class="hljs-type">int</span> length, <span class="hljs-type">int</span> element)</span> &#123;<br>    <span class="hljs-comment">// 队满检查</span><br>    <span class="hljs-keyword">if</span> ((rear + length) % num== <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br>    <span class="hljs-built_in">queue</span>[rear] = element;<br>    rear = (rear + <span class="hljs-number">1</span>) % num;<br>    length++;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>出队列算法，先检查队空与否，若不空，则在<code>(rear - length + 1) % num</code>位置获取<code>front</code>，然后减少length的值，由于rear只指示队尾指针，因此不需要变化。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">dequeue</span><span class="hljs-params">(<span class="hljs-type">int</span> <span class="hljs-built_in">queue</span>[], <span class="hljs-type">int</span> rear, <span class="hljs-type">int</span> length)</span> &#123;<br>    <span class="hljs-comment">// 队空检查</span><br>    <span class="hljs-keyword">if</span> (*length == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br>    <span class="hljs-type">int</span> front = (rear - length + <span class="hljs-number">1</span>) % num;<br>    <span class="hljs-type">int</span> element = <span class="hljs-built_in">queue</span>[front];<br>    length --;<br>    <span class="hljs-keyword">return</span> element;<br>&#125;<br></code></pre></td></tr></table></figure><div class="note note-info">            <p>由于队首位置可以直接指定，因此不需要再赋0，当然赋0也可以。</p>          </div><h2 id="模式匹配算法"><a href="#模式匹配算法" class="headerlink" title="模式匹配算法"></a>模式匹配算法</h2><div class="note note-success">            <p><a href="https://www.cnblogs.com/Higurashi-kagome/p/18013626">个人认为kmp算法讲得比较好的一位</a></p>          </div><p>现在指定字符串的数据结构为</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">String</span> &#123;<br>    <span class="hljs-type">char</span> *str;<br>    <span class="hljs-type">int</span> length;<br>    <span class="hljs-built_in">String</span>(<span class="hljs-type">char</span> *str, <span class="hljs-type">int</span> length) : <span class="hljs-built_in">str</span>(str), <span class="hljs-built_in">length</span>(length) &#123;&#125;<br>&#125; *string;<br><br><span class="hljs-type">int</span> next[length] = &#123;<span class="hljs-number">0</span>&#125;;<br></code></pre></td></tr></table></figure><h3 id="暴力匹配算法"><a href="#暴力匹配算法" class="headerlink" title="暴力匹配算法"></a>暴力匹配算法</h3><p>赋初值后开始比较，若对应字符相等则i与j同时相加，指示串中下个位置，比较下一字符。否则指针i后退重新开始匹配，从主串的下一个字符开始比较。<br>如果是<code>j &gt; t-&gt;length</code>导致的循环结束，那么就是找到了指定位置，可以进行输出。反之则是匹配不成功，返回-1；</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">brute_force</span><span class="hljs-params">(string s, string t, <span class="hljs-type">int</span> pos)</span> <span class="hljs-comment">// s串为主串，t串为模式，pos为开始比较的位置</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> i = pos, j = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">while</span> (i &lt;= s-&gt;length &amp;&amp; j &lt;= t-&gt;length)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (s-&gt;str[i] == t-&gt;str[j])<br>            i++, j++;<br>        <span class="hljs-keyword">else</span><br>            i = i - j + <span class="hljs-number">2</span>, j = <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (j &gt; t-&gt;length)<br>        <span class="hljs-keyword">return</span> i - t-&gt;length;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="临时数组next"><a href="#临时数组next" class="headerlink" title="临时数组next"></a>临时数组next</h3><p>以下举例说明，设模式串为<code>abaabcac</code></p><ul><li>next[0]固定为0</li><li>i &#x3D; 1，a与b不等，next[1] &#x3D; j &#x3D; 0</li><li>i &#x3D; 2，a和a相等，j &#x3D; 1，next[2] &#x3D; 1</li><li>i &#x3D; 3，b与a不等，j &#x3D; next[0] &#x3D; 0，a与a相等，j &#x3D; 1，next[3] &#x3D; 1</li><li>i &#x3D; 4，b与b相等，j &#x3D; 2，next[4] &#x3D; 2</li><li>最后为[0, 0, 1, 1, 2, 0, 1, 0]</li></ul><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">get_next</span><span class="hljs-params">(string t, <span class="hljs-type">int</span> *next)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">100</span>; i++) <span class="hljs-comment">// 包括了next[0] = 0</span><br>        next[i] = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">int</span> j = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; t-&gt;length; i++)<br>    &#123;<br>        <span class="hljs-keyword">while</span> (j &amp;&amp; t-&gt;str[i] != t-&gt;str[j])<br>            j = next[j - <span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">if</span> (t-&gt;str[i] == t-&gt;str[j])<br>            ++j;<br>        next[i] = j;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="kmp"><a href="#kmp" class="headerlink" title="kmp"></a>kmp</h3><p>若匹配失败，则在next数组中寻找对应的回溯位置。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">kmp</span><span class="hljs-params">(string s, string t, <span class="hljs-type">int</span> pos)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> i = pos, j = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">get_next</span>(t, next);<br>    <span class="hljs-keyword">while</span> (i &lt;= s-&gt;length &amp;&amp; j &lt;= t-&gt;length)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (j == <span class="hljs-number">0</span> || s-&gt;str[i] == t-&gt;str[j])<br>            ++i, ++j;<br>        <span class="hljs-keyword">else</span><br>            j = next[j];<br>    &#125;<br>    <span class="hljs-keyword">if</span> (j &gt; t-&gt;length)<br>        <span class="hljs-keyword">return</span> i - t-&gt;length;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="稀疏矩阵压缩"><a href="#稀疏矩阵压缩" class="headerlink" title="稀疏矩阵压缩"></a>稀疏矩阵压缩</h2><p>设有上三角矩阵<code>A[n][n]</code>，将其上三角元素逐行存于数组B[m]中，使得<code>B[k] = A[i][j], k = f1(i)+f2(j)+c</code>，试推导出函数f1，f2和常数c。</p><p>对上三角矩阵，设<code>i&lt;=j</code>有</p><p>$$<br>k&#x3D;\underbrace{n + (n-1) + (n+2)+…+(n-i+2)}<em>{前i-1行}+\underbrace{(j-i+2)}</em>{第i行}\\  &#x3D;\frac{n-(i-1)}{2}i+j-n\\  故f_1(i) &#x3D; \frac{n-(i-1)}{2},\  f_2(j)&#x3D;j,\  c&#x3D;-n<br>$$</p><h2 id="二叉树的遍历"><a href="#二叉树的遍历" class="headerlink" title="二叉树的遍历"></a>二叉树的遍历</h2><p>假设一棵二叉树的先序遍历序列为EBADCFHGIKJ，中序遍历序列为ABCDEFGHIJK，请画出该二叉树</p><p>可通过递归寻找。</p><ul><li>先序遍历的第一个节点E一定是根节点，中序遍历从这个节点开始划分成{ABCD}{FGHIJK}两部分</li><li>以左划分为例，中序遍历对应的先序遍历序列为{BADC}，B为父节点，中序遍历划分为{A}{CD}两部分</li><li>如此递归，即可得到结果</li></ul><pre><code class=" mermaid">graph TDE--&gt;B--&gt;AB--&gt;D--&gt;CD--&gt;a[null]E--&gt;F--&gt;b[null]F--&gt;H--&gt;GH--&gt;I--&gt;c[null]I--&gt;K--&gt;JK--&gt;d[null]</code></pre><p>前序遍历代码</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">pre</span><span class="hljs-params">(tree t)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (!t)<br>        <span class="hljs-keyword">return</span>;<br>    std::cout &lt;&lt; t-&gt;value &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    <span class="hljs-built_in">pre</span>(t-&gt;left);<br>    <span class="hljs-built_in">pre</span>(t-&gt;right);<br>&#125;<br></code></pre></td></tr></table></figure><p>中序遍历代码</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">in</span><span class="hljs-params">(tree t)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (!t)<br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-built_in">in</span>(t-&gt;left);<br>    std::cout &lt;&lt; t-&gt;value &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    <span class="hljs-built_in">in</span>(t-&gt;right);<br>&#125;<br></code></pre></td></tr></table></figure><p>后序遍历代码</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">post</span><span class="hljs-params">(tree t)</span> </span>&#123;<br>    <span class="hljs-keyword">if</span> (!t)<br>        <span class="hljs-keyword">return</span>;<br>    <span class="hljs-built_in">post</span>(t-&gt;left);<br>    <span class="hljs-built_in">post</span>(t-&gt;right);<br>    std::cout &lt;&lt; t-&gt;value &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>层序遍历二叉树（BFS）代码</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">std::vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">BFS</span><span class="hljs-params">(tree t)</span></span><br><span class="hljs-function"></span>&#123;<br>    std::queue&lt;tree&gt; q;<br>    std::vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">if</span>(t)<br>        q.<span class="hljs-built_in">push</span>(t);<br>    <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        tree temp = q.<span class="hljs-built_in">front</span>();<br>        v.<span class="hljs-built_in">push_back</span>(temp-&gt;value);<br>        <span class="hljs-keyword">if</span>(temp-&gt;left)<br>            q.<span class="hljs-built_in">push</span>(temp-&gt;left);<br>        <span class="hljs-keyword">if</span>(temp-&gt;right)<br>            q.<span class="hljs-built_in">push</span>(temp-&gt;right);<br>        q.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>    <span class="hljs-keyword">return</span> v;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="线索二叉树"><a href="#线索二叉树" class="headerlink" title="线索二叉树"></a>线索二叉树</h2><p>线索二叉树的系节点形式</p><table>    <td>lchild</td><td>LTag</td><td>data</td><td>RTag</td><td>rchild</td></table><p>其中，若<code>LTag/RTag</code>为0，则表示child域指示节点的孩子，若为1，则指示节点的前驱&#x2F;后继。</p><h3 id="平均查找长度"><a href="#平均查找长度" class="headerlink" title="平均查找长度"></a>平均查找长度</h3><p>$$ASL&#x3D;\displaystyle\sum^n_{i&#x3D;1}P_iC_i$$</p><p>$P_i$为查找表中第i个记录的概率（显然有$\sum^n_{i&#x3D;1}P_i&#x3D;1$），$C_i$为找到第i个记录时进行过比较的次数，可类比于数学期望。</p><p>顺序查找的 $ASL&#x3D;\displaystyle\frac{1}{n} \sum^n_{i&#x3D;1}i&#x3D;\frac{n+1}{2}$<br>将顺序表进行排序后可以进行折半查找。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">find</span><span class="hljs-params">(<span class="hljs-type">int</span> *a, <span class="hljs-type">int</span> length, <span class="hljs-type">int</span> value)</span> </span>&#123;<br>    <span class="hljs-type">int</span> low = <span class="hljs-number">0</span>, high = length, mid;<br>    <span class="hljs-keyword">while</span>(low &lt;= high) &#123;<br>        mid = (low + high) / <span class="hljs-number">2</span>;<br>        <span class="hljs-keyword">if</span>(key == a[mid])<br>            <span class="hljs-keyword">return</span> mid;<br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key &lt; a[mid])<br>            high = mid - <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">else</span><br>            low = mid + <span class="hljs-number">1</span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>n很大时， $ASL&#x3D;\log _2(n+1)-1$</p><h3 id="BST"><a href="#BST" class="headerlink" title="BST"></a>BST</h3><p>其删除操作</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">tree <span class="hljs-title">del</span><span class="hljs-params">(<span class="hljs-type">int</span> value, tree t)</span></span><br><span class="hljs-function"></span>&#123;<br>    tree p = t, f = <span class="hljs-literal">nullptr</span>;<br>    <span class="hljs-keyword">while</span> (p) <span class="hljs-comment">// 查找指定结点</span><br>    &#123;<br>        <span class="hljs-keyword">if</span> (p-&gt;value == value)<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">if</span> (p-&gt;value &gt; value)<br>            p = p-&gt;left;<br>        <span class="hljs-keyword">else</span><br>            p = p-&gt;right;<br>    &#125;<br>    <span class="hljs-keyword">if</span> (!p)<br>        <span class="hljs-keyword">return</span>;<br><br>    tree q = p;<br>    <span class="hljs-keyword">if</span> (p-&gt;left &amp;&amp; p-&gt;right) <span class="hljs-comment">// 左右均不为空</span><br>    &#123;<br>        tree s = p-&gt;left;<br>        <span class="hljs-keyword">while</span> (s = s-&gt;right != <span class="hljs-literal">nullptr</span>)<br>            q = s;<br>        p-&gt;value = s-&gt;value;<br>        <span class="hljs-keyword">if</span> (q != p)<br>            q-&gt;right = s-&gt;right;<br>        <span class="hljs-keyword">else</span><br>            q-&gt;left = s-&gt;left;<br>        <span class="hljs-keyword">delete</span> s;<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!p-&gt;right) <span class="hljs-comment">// 被删节点无右子树，只需重接其左子树</span><br>        p = p-&gt;left;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(!p-&gt;left) <span class="hljs-comment">//被删节点无左子树，只需重接其右子树</span><br>        p = p-&gt;right;<br>    <span class="hljs-comment">// 将p所指的子树挂接到其双亲节点*f相应的位置</span><br>    <span class="hljs-keyword">if</span>(!f) <span class="hljs-comment">// 被删节点为根节点</span><br>        t = p;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(q == f-&gt;left) <span class="hljs-comment">// 挂接到*f的左子树位置</span><br>        f-&gt;left = p;<br>    <span class="hljs-keyword">else</span> <span class="hljs-comment">// 挂接到*f的右子树位置</span><br>        f-&gt;right = p;<br>    <span class="hljs-keyword">delete</span> q;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="霍夫曼编码"><a href="#霍夫曼编码" class="headerlink" title="霍夫曼编码"></a>霍夫曼编码</h2><h2 id="哈希表处理冲突（顺序表）"><a href="#哈希表处理冲突（顺序表）" class="headerlink" title="哈希表处理冲突（顺序表）"></a>哈希表处理冲突（顺序表）</h2><p>探测公式： $H_i&#x3D;(H(key)+d_i)% m \quad i\leq m-1$<br>线性探测时， $d_i&#x3D;1,2,…,m-1$<br>伪随机探测时， $d_i$为指定的伪随机数列<br>进行查找时，通过不断计算下一个下一个散列地址$H_i$查找数据。</p><h2 id="不同排序方法"><a href="#不同排序方法" class="headerlink" title="不同排序方法"></a>不同排序方法</h2><h3 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h3><p>按顺序取一个数，放到指定的位置上。时间复杂度为$O(n^2)$，是稳定排序，适合记录基本有序的情况。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt; length; ++i)<br>&#123;<br>    <span class="hljs-keyword">if</span> (array[i] &gt; array[i - <span class="hljs-number">1</span>])<br>    &#123;<br>        tmp = array[i];<br>        array[i] = array[i - <span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span> (index = i - <span class="hljs-number">1</span>; tmp &gt; array[index]; --index)<br>            array[index + <span class="hljs-number">1</span>] = array[index];<br>        array[index + <span class="hljs-number">1</span>] = tmp;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>将插入与折半结合，为折半插入排序，仍然是稳定排序，适合初始记录无序的情况。</p><h3 id="希尔排序"><a href="#希尔排序" class="headerlink" title="希尔排序"></a>希尔排序</h3><p>将整个排序记录序列分成几组，从而减少直接插入排序的数据量。需要提前指定分组数量和分组次数。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShellInsert</span><span class="hljs-params">(<span class="hljs-type">int</span> *a, <span class="hljs-type">int</span> length, <span class="hljs-type">int</span> dk)</span> <span class="hljs-comment">// 对顺序表L进行一趟增量是dk的希尔插入排序</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> tmp;<br>    <span class="hljs-keyword">for</span> (i = dk; i &lt;= length; ++i)<br>        <span class="hljs-keyword">if</span> (a[i] &lt; a[i - dk].key) <span class="hljs-comment">// 需将a[i]插入有序增量子表</span><br>        &#123;<br>            tmp = a[i]; <span class="hljs-comment">// 暂存在tmp中</span><br>            <span class="hljs-keyword">for</span> (j = i - dk; j &gt; <span class="hljs-number">0</span> &amp;&amp; tmp &lt; a[j]; j -= dk)<br>                a[j + dk] = a[j]; <span class="hljs-comment">// 记录后移，直到找到插入位置</span><br>            a[j + dk] = tmp;     <span class="hljs-comment">// 将tmp即原a[i]，插入正确位置</span><br>        &#125;<br>&#125;<br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">ShellSort</span><span class="hljs-params">(<span class="hljs-type">int</span> *a, <span class="hljs-type">int</span> *dt, <span class="hljs-type">int</span> t)</span> <span class="hljs-comment">// 按增量序列dt[0..t-1]对顺序表L进行t趟希尔排序</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span> (k = <span class="hljs-number">0</span>; k &lt; t; ++k)<br>        <span class="hljs-built_in">ShellInsert</span>(a, length, dt[k]); <span class="hljs-comment">// 一趟增量为dt[t]的希尔插入排序</span><br>&#125;<br></code></pre></td></tr></table></figure><p>希尔排序不稳定，其最后一个增量必须为1，适合初始记录无序，n较大的情况。</p><h3 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h3><p>较为稳定，但n较大时不适宜使用。</p><h3 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h3><p>算法partition完成一趟快速排序，返回枢轴的位置。若待排序序列长度大于1（low &lt; high），算法sort调用partition获取枢轴位置，然后递归执行，分别对分割所得的两个子表进行排序。</p><p>partition函数</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">partition</span><span class="hljs-params">(<span class="hljs-type">int</span> array[], <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> tmp = array[low];<br>    <span class="hljs-keyword">while</span> (low &lt; high)<br>    &#123;<br>        <span class="hljs-keyword">while</span> (low &lt; high &amp;&amp; array[high] &gt;= tmp)<br>            --high;<br>        array[low] = array[high];<br>        <span class="hljs-keyword">while</span> (low &lt; high &amp;&amp; array[low] &lt;= tmp)<br>            ++low;<br>        array[high] = array[low];<br>    &#125;<br>    array[low] = tmp;<br>    <span class="hljs-keyword">return</span> low;<br>&#125;<br></code></pre></td></tr></table></figure><p>sort函数</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(<span class="hljs-type">int</span> array[], <span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (low &lt; high)<br>    &#123;<br>        <span class="hljs-type">int</span> tmp = <span class="hljs-built_in">partition</span>(array, low, high);<br>        <span class="hljs-built_in">sort</span>(array, low, tmp - <span class="hljs-number">1</span>);<br>        <span class="hljs-built_in">sort</span>(array, tmp + <span class="hljs-number">1</span>, high);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>快速排序不稳定，当枢轴量每次都能平分数组时最快，适合初始记录无序的情况。平均状况下时间复杂度为$O(n\log n)$。</p><h3 id="简单选择排序"><a href="#简单选择排序" class="headerlink" title="简单选择排序"></a>简单选择排序</h3><p>与插入排序相反，从未排序的数组中选择一个合适的数放进去。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i&lt; length; ++i)<br>&#123;<br>    index = i;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = i; j &lt; length; ++j)<br>        <span class="hljs-keyword">if</span>(array[j] &lt; array[index])<br>            index = j;<br>    tmp = array[index];<br>    array[index] = array[i];<br>    array[i] = tmp;<br>&#125;<br></code></pre></td></tr></table></figure><p>理论上是稳定的，但稳定与否与交换的方法有关。其移动次数较少，可用于记录占用空间较多时的排序方式。</p><h3 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h3><p>序列${k_1,…,k_n}$在满足<br>$$k_i \geq k_{2i},\quad k_i \geq k_{2i+1}\\ k_i \leq k_{2i},\quad k_i \leq k_{2i+1}$$<br>其中之一时，可以称为堆。</p><p>筛选法调整成堆</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">heap_adjust</span><span class="hljs-params">(<span class="hljs-type">int</span> array[], <span class="hljs-type">int</span> s, <span class="hljs-type">int</span> m)</span></span><br><span class="hljs-function"></span>&#123;   <br>    <span class="hljs-type">int</span> temp = array[s];<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> j = <span class="hljs-number">2</span> * s; j &lt;= m; j *= <span class="hljs-number">2</span>)<br>    &#123;<br>        <span class="hljs-keyword">if</span>(j &lt; m &amp;&amp; array[j] &lt; array[j + <span class="hljs-number">1</span>])<br>            ++j;<br>        <span class="hljs-keyword">if</span>(temp &gt;= array[j])<br>            <span class="hljs-keyword">break</span>;<br>        array[s] = array[j];<br>        s = j;<br>    &#125;<br>    array[s] = temp;<br>&#125;<br></code></pre></td></tr></table></figure><p>建初堆</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">create_heap</span><span class="hljs-params">(<span class="hljs-type">int</span> array[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = length / <span class="hljs-number">2</span>; i &gt;= <span class="hljs-number">0</span>; --i)<br>        <span class="hljs-built_in">heap_adjust</span>(array, i, length);<br>&#125;<br></code></pre></td></tr></table></figure><p>在堆中进行排序</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">sort</span><span class="hljs-params">(<span class="hljs-type">int</span> array[])</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-built_in">create_heap</span>(array);<br>    <span class="hljs-type">int</span> temp;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = length; i &gt; <span class="hljs-number">0</span>; --i)<br>    &#123;<br>        temp = array[<span class="hljs-number">0</span>];<br>        array[<span class="hljs-number">0</span>] = array[i];<br>        array[i] = temp;<br>        <span class="hljs-built_in">heap_adjust</span>(array, <span class="hljs-number">0</span>, i - <span class="hljs-number">1</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>是不稳定排序，时间复杂度接近于$O(n\log n)$，记录较多时更有优势。</p><h3 id="归并排序"><a href="#归并排序" class="headerlink" title="归并排序"></a>归并排序</h3><p>通过递归进行排序，稳定排序。</p><h2 id="图的遍历"><a href="#图的遍历" class="headerlink" title="图的遍历"></a>图的遍历</h2><p>以下是对邻接矩阵和邻接表的定义<br>邻接矩阵</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Matrix_array</span><br>&#123;<br>    <span class="hljs-type">bool</span> array[maxnum][maxnum];<br>    <span class="hljs-type">bool</span> visited[maxnum];<br>    <span class="hljs-type">int</span> dot;<br>    <span class="hljs-type">int</span> line;<br>&#125; Matrix_array;<br>Matrix_array matrix_array;<br></code></pre></td></tr></table></figure><p>邻接表</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span><br>&#123;<br>    <span class="hljs-type">int</span> belong;<br>    <span class="hljs-type">int</span> weight;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Node</span> *next;<br>    <span class="hljs-built_in">Node</span>(<span class="hljs-type">int</span> belong, <span class="hljs-type">int</span> weight, <span class="hljs-keyword">struct</span> Node *next) : <span class="hljs-built_in">belong</span>(belong), <span class="hljs-built_in">weight</span>(weight), <span class="hljs-built_in">next</span>(next) &#123;&#125;<br>&#125; *node;<br><br><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Link</span><br>&#123;<br>    node matrix_link[maxnum];<br>    <span class="hljs-type">int</span> dot;<br>    <span class="hljs-type">int</span> line;<br>    <span class="hljs-type">int</span> visited[maxnum];<br>    <span class="hljs-built_in">Link</span>()<br>    &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; maxnum; i++)<br>            matrix_link[i] = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Node</span>(emp, emp, <span class="hljs-literal">nullptr</span>);<br>    &#125;<br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">insert</span><span class="hljs-params">(<span class="hljs-type">int</span> last_node, <span class="hljs-type">int</span> next_node, <span class="hljs-type">int</span> weight)</span></span><br><span class="hljs-function">    </span>&#123;<br>        node before = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Node</span>(next_node, weight, matrix_link[last_node]-&gt;next);<br>        matrix_link[last_node]-&gt;next = before;<br>        node after = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Node</span>(last_node, weight, matrix_link[next_node]-&gt;next);<br>        matrix_link[next_node]-&gt;next = after;<br>    &#125;<br>&#125; Link;<br>Link link;<br></code></pre></td></tr></table></figure><p>在邻接数列中进行DFS遍历</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DFS_in_array</span><span class="hljs-params">(<span class="hljs-type">int</span> v)</span></span><br><span class="hljs-function"></span>&#123;<br>    matrix_array.visited[v] = <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> w = <span class="hljs-number">0</span>; w &lt; matrix_array.dot; w++)<br>    &#123;<br>        <span class="hljs-keyword">if</span> (matrix_array.array[v][w] &amp;&amp; !matrix_array.visited[w])<br>        &#123;<br>            q.<span class="hljs-built_in">push</span>(w + <span class="hljs-number">1</span>);<br>            <span class="hljs-built_in">DFS_in_array</span>(w);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>在邻接表中进行DFS遍历</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">DFS_in_link</span><span class="hljs-params">(<span class="hljs-type">int</span> v)</span></span><br><span class="hljs-function"></span>&#123;<br>    link.visited[v] = <span class="hljs-literal">true</span>;<br>    <span class="hljs-type">int</span> w;<br>    node p = link.matrix_link[v]-&gt;next;<br>    <span class="hljs-keyword">while</span> (p)<br>    &#123;<br>        w = p-&gt;belong;<br>        <span class="hljs-keyword">if</span> (!link.visited[w])<br>        &#123;<br>            q.<span class="hljs-built_in">push</span>(w + <span class="hljs-number">1</span>);<br>            <span class="hljs-built_in">DFS_in_link</span>(w);<br>        &#125;<br>        p = p-&gt;next;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>在邻接数列中进行BFS遍历</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BFS_in_array</span><span class="hljs-params">(<span class="hljs-type">int</span> v)</span></span><br><span class="hljs-function"></span>&#123;<br>    std::queue&lt;<span class="hljs-type">int</span>&gt; temp;<br>    matrix_array.visited[v] = <span class="hljs-literal">true</span>;<br>    temp.<span class="hljs-built_in">push</span>(v + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">while</span> (!temp.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        q.<span class="hljs-built_in">push</span>(temp.<span class="hljs-built_in">front</span>());<br>        temp.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> w = <span class="hljs-number">0</span>; w &lt; matrix_array.dot; w++)<br>            <span class="hljs-keyword">if</span> (matrix_array.array[v][w] &amp;&amp; !matrix_array.visited[w])<br>            &#123;<br>                temp.<span class="hljs-built_in">push</span>(w + <span class="hljs-number">1</span>);<br>                <span class="hljs-built_in">BFS_in_array</span>(w);<br>            &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>在邻接表中进行BFS遍历</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BFS_in_link</span><span class="hljs-params">(<span class="hljs-type">int</span> v)</span></span><br><span class="hljs-function"></span>&#123;<br>    queue&lt;<span class="hljs-type">int</span>&gt; temp;<br>    link.visited[v] = <span class="hljs-literal">true</span>;<br>    temp.<span class="hljs-built_in">push</span>(v + <span class="hljs-number">1</span>);<br>    <span class="hljs-keyword">while</span> (!temp.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        q.<span class="hljs-built_in">push</span>(temp.<span class="hljs-built_in">front</span>());<br>        temp.<span class="hljs-built_in">pop</span>();<br>        <span class="hljs-keyword">for</span> (node p = link.matrix_link[v]-&gt;next; p != <span class="hljs-literal">nullptr</span>; p = p-&gt;next)<br>            <span class="hljs-keyword">if</span> (!link.visited[p-&gt;belong])<br>            &#123;<br>                temp.<span class="hljs-built_in">push</span>(p-&gt;belong + <span class="hljs-number">1</span>);<br>                link.visited[p-&gt;belong] = <span class="hljs-literal">true</span>;<br>            &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><div class="note note-info">            <p>若图中有不止一个连通分量，则需要另设一个大循环，在循环中不断检测未遍历到的分量继续遍历</p>          </div><div class="note note-info">            <p>克鲁斯卡尔算法更适合求稀疏网的最小生成树</p>          </div><h2 id="矩阵分解"><a href="#矩阵分解" class="headerlink" title="矩阵分解"></a>矩阵分解</h2><h3 id="Doolittle分解"><a href="#Doolittle分解" class="headerlink" title="Doolittle分解"></a>Doolittle分解</h3><p>例</p><p>$<br>\begin{array}{l}<br>A&#x3D;<br>\begin{pmatrix}1&amp;2&amp;-3\\2&amp;-1&amp;3\\3&amp;-2&amp;2\end{pmatrix} \rightarrow\begin{pmatrix}1&amp;2&amp;-3\\ \ \end{pmatrix}\\ \quad\rightarrow\begin{pmatrix}1&amp;2&amp;-3\\ \frac{2}{1} \\ \frac{3}{1} \end{pmatrix} \rightarrow\begin{pmatrix}1&amp;2&amp;-3\\ 2 \\ 3\end{pmatrix}\\ \quad \rightarrow\begin{pmatrix}1&amp;2&amp;-3\\ 2&amp;{-1-2\times 2}&amp;{3-2 \times -3} \\ 3\end{pmatrix} \rightarrow\begin{pmatrix}1&amp;2&amp;-3\\ 2&amp;-5&amp;9 \\ 3\end{pmatrix}\\ \quad  \rightarrow\begin{pmatrix}1&amp;2&amp;-3\\ 2&amp;-5&amp;9 \\ 3&amp;{\frac{-2-2\times 3}{-5}}\end{pmatrix}\rightarrow\begin{pmatrix}1&amp;2&amp;-3\\ 2&amp;-5&amp;9 \\ 3&amp;\frac{8}{5}\end{pmatrix}\\ \quad \rightarrow \begin{pmatrix}1&amp;2&amp;-3\\ 2&amp;-5&amp;9 \\ 3&amp;\frac{8}{5}&amp;2-9\times\frac{8}{5}+3\times 3\end{pmatrix} \rightarrow\begin{pmatrix}1&amp;2&amp;-3\\ 2&amp;-5&amp;9 \\ 3&amp;\frac{8}{5}&amp;-\frac{17}{5}\end{pmatrix}\\ \quad \rightarrow L&#x3D;\begin{pmatrix}1&amp;\\ 2&amp;1\\ 3&amp;\frac{8}{5}&amp;1\end{pmatrix},\quad U&#x3D;\begin{pmatrix}1&amp;2&amp;-3\\&amp;-5&amp;9 \\ &amp;&amp;-\frac{17}{5}\end{pmatrix}<br>\end{array}<br>$</p><h3 id="平方根分解"><a href="#平方根分解" class="headerlink" title="平方根分解"></a>平方根分解</h3><p>例</p><p>$<br>\begin{array}{l}<br>A&#x3D;<br>\begin{pmatrix}1&amp;2&amp;3\\2&amp;8&amp;14\\ 3&amp;14&amp;29\end{pmatrix} \\ \quad L&#x3D;\begin{pmatrix}\sqrt{1}&amp;&amp;\\ \displaystyle\frac{2}{\sqrt{1}}&amp;&amp;\\ \displaystyle\frac{2}{\sqrt{1}}\end{pmatrix} \rightarrow\begin{pmatrix}1&amp;&amp;\\ 2&amp;&amp;\\ 3&amp;&amp;\end{pmatrix}  \\ \quad \rightarrow\begin{pmatrix}1&amp;&amp;\\ 2&amp;\sqrt{8-2^2}&amp;\\ 3&amp;\displaystyle\frac{14-3\times 2}{\sqrt{8-2^2}}&amp;\end{pmatrix}\rightarrow\begin{pmatrix}1&amp;&amp;\\ 2&amp;2&amp;\\ 3&amp;4&amp;\end{pmatrix}  \\ \quad \rightarrow\begin{pmatrix}1&amp;&amp;\\ 2&amp;2&amp;\\ 3&amp;4&amp;\sqrt{29-3^2-4^2}\end{pmatrix} \rightarrow\begin{pmatrix}1&amp;&amp;\\ 2&amp;2&amp;\\ 3&amp;4&amp;2\end{pmatrix}<br>\end{array}<br>$</p><h2 id="插值"><a href="#插值" class="headerlink" title="插值"></a>插值</h2><p>下列节点的拉格朗日三次插值多项式和牛顿插值多项式</p><p>$<br>\begin{array}{}x_i&amp;1&amp;2&amp;5&amp;6\\ f(x_i)&amp;-3&amp;3&amp;9&amp;27\end{array}<br>$</p><p>拉格朗日插值多项式</p><p>$<br>\begin{array}{l}<br>-3\times\displaystyle\frac{(x-2)(x-5)(x-6)}{(1-2)(1-5)(1-6)}+3\times\displaystyle\frac{(x-1)(x-5)(x-6)}{(2-1)(2-5)(2-6)} \\ +9\times\displaystyle\frac{(x-1)(x-2)(x-6)}{(5-1)(5-2)(5-6)}+27\times\displaystyle\frac{(x-1)(x-2)(x-5)}{(6-1)(6-2)(6-5)}<br>\end{array}<br>$</p><p>差商表</p><p>$<br>\begin{array}{}x_k&amp;f(x_k)&amp;1阶&amp;2阶&amp;3阶\\1&amp;-3\\2&amp;3&amp;6\\5&amp;9&amp;2&amp;-1\\6&amp;27&amp;18&amp;4&amp;1\end{array}<br>$</p><p>牛顿插值</p><p>$<br>N(x)&#x3D;-3+6(x-1)-(x-1)(x-2)+(x-1)(x-2)(x-5)<br>$</p><h2 id="法方程逼近"><a href="#法方程逼近" class="headerlink" title="法方程逼近"></a>法方程逼近</h2><div class="note note-info">            <p>$(f,g)&#x3D;\displaystyle\int^{+\infty}_{-\infty}f(x)g(x)dx$</p>          </div><p>求$y&#x3D;e^x$在[0,1]上的一次最佳平方逼近多项式</p><p>$<br>\begin{array}{l}<br>设为y&#x3D;a_0+a_1x.\\ (\psi_0,\psi_0)&#x3D;\int^1_01dx&#x3D;1,\quad(\psi_1,\psi_0)&#x3D;\int^1_0xdx&#x3D;\frac{1}{2} \quad (\psi_1,\psi_1)&#x3D;\int^1_0x^2dx&#x3D;\frac{1}{3}\\\  (f,\psi_0)&#x3D;\int^1_0e^xdx&#x3D;e-1,\quad(f,\psi_1)&#x3D;\int^1_0xe^xdx&#x3D;1\\\ \\ 则\begin{bmatrix}1&amp;\displaystyle\frac{1}{2}\\\displaystyle\frac{1}{2}&amp;\displaystyle\frac{1}{3}\end{bmatrix}\begin{bmatrix}a_0\\ a_1\end{bmatrix}&#x3D;\begin{bmatrix}15\\ 10\end{bmatrix}\\ 解得a_0&#x3D;6(3-e), a_1&#x3D;3(3e-8)<br>\end{array}<br>$</p><p>最小二乘曲线拟合</p><p>$<br>方程组为p(x)&#x3D;a_0+a_1x+\dots+a_nx^n\\<br>$<br>$<br>\begin{bmatrix} m&amp;\displaystyle\sum^m_{i&#x3D;1}x_i&amp;\displaystyle\sum^m_{i&#x3D;1}x_i^2&amp;\dots&amp;\displaystyle\sum^m_{i&#x3D;1}x_i^n\\ \displaystyle\sum^m_{i&#x3D;1}x_i&amp;\displaystyle\sum^m_{i&#x3D;1}x_i^2&amp;\displaystyle\sum^m_{i&#x3D;1}x_i^3&amp;\dots&amp;\displaystyle\sum^m_{i&#x3D;1}x_i^{n+1}\\ \vdots&amp;\vdots&amp;\vdots&amp;&amp;\vdots\\ \displaystyle\sum^m_{i&#x3D;1}x_i^n&amp;\displaystyle\sum^m_{i&#x3D;1}x_i^{n+1}&amp;\displaystyle\sum^m_{i&#x3D;1}x_i^{n+2}&amp;\dots&amp;\displaystyle\sum^m_{i&#x3D;1}x_i^{2n}\end{bmatrix}\ \cdot \begin{bmatrix}a_0\\ a_1\\ \vdots \\ a_n\end{bmatrix}&#x3D;\begin{bmatrix}\displaystyle\sum^m_{i&#x3D;1}xy_i\\\displaystyle\sum^m_{i&#x3D;1}x_iy_i\\\vdots\\ \displaystyle\sum^m_{i&#x3D;1}x_i^ny_i\end{bmatrix}<br>$</p><h3 id="勒让德多项式"><a href="#勒让德多项式" class="headerlink" title="勒让德多项式"></a>勒让德多项式</h3><p>$<br>P_0(x)&#x3D;1\\P_1(x)&#x3D;x\\P_2(x)&#x3D;\displaystyle\frac{1}{2}(3x^2-1)\\…\\P_n(x)&#x3D;\displaystyle\frac{1}{2^nn!}\frac{d^n}{dx^n}(x^2-1)^n<br>$</p><p>$<br>S_n(t)&#x3D;\displaystyle\frac{(f,P_0)}{(P_0,p_0)}P_0(t)+ \dots + \displaystyle\frac{(f,P_n)}{(P_n,P_n)}P_n(t)<br>$</p><div class="note note-success">            <p>结果最后考试和复习题里的基本一样，我还是花太多时间在这上面了 (ﾟДﾟ*)ﾉ</p>          </div>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;频度&quot;&gt;&lt;a href=&quot;#频度&quot; class=&quot;headerlink&quot; title=&quot;频度&quot;&gt;&lt;/a&gt;频度&lt;/h2&gt;&lt;figure class=&quot;highlight c&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span clas</summary>
      
    
    
    
    <category term="日常" scheme="http://example.com/categories/%E6%97%A5%E5%B8%B8/"/>
    
    
    <category term="日常" scheme="http://example.com/tags/%E6%97%A5%E5%B8%B8/"/>
    
    <category term="复习" scheme="http://example.com/tags/%E5%A4%8D%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>指令集</title>
    <link href="http://example.com/2024/11/16/order-set/"/>
    <id>http://example.com/2024/11/16/order-set/</id>
    <published>2024-11-16T07:37:30.000Z</published>
    <updated>2025-03-26T12:41:18.305Z</updated>
    
    <content type="html"><![CDATA[<div class="note note-info">            <p>有时间了补表格。</p>          </div><h2 id="latex的碎片化使用"><a href="#latex的碎片化使用" class="headerlink" title="latex的碎片化使用"></a>latex的碎片化使用</h2><div class="note note-info">            <p>指令限于在markdown中内嵌所用，而插入矩阵或生成latex文档不在本篇范围内。</p>          </div><h3 id="希腊字母"><a href="#希腊字母" class="headerlink" title="希腊字母"></a>希腊字母</h3><p>需要大写希腊字母时，首字母大写即可。</p><table><thead><tr><th>显示</th><th>命令</th><th>显示</th><th>命令</th></tr></thead><tbody><tr><td>$\alpha$</td><td><code>\alpha</code></td><td>$\beta$</td><td><code>\beta</code></td></tr><tr><td>$\gamma$</td><td><code>\gamma</code></td><td>$\delta$</td><td><code>\delta</code></td></tr><tr><td>$\epsilon$</td><td><code>\epsilon</code></td><td>$\zeta$</td><td><code>\zeta</code></td></tr><tr><td>$\eta$</td><td><code>\eta</code></td><td>$\theta$</td><td><code>\theta</code></td></tr><tr><td>$\iota$</td><td><code>\lota</code></td><td>$\kappa$</td><td><code>\kappa</code></td></tr><tr><td>$\lambda$</td><td><code>\lambda</code></td><td>$\mu$</td><td><code>\mu</code></td></tr><tr><td>$\nu$</td><td><code>\nu</code></td><td>$\xi$</td><td><code>\xi</code></td></tr><tr><td>$\pi$</td><td><code>\pi</code></td><td>$\rho$</td><td><code>\rho</code></td></tr><tr><td>$\sigma$</td><td><code>\sigma</code></td><td>$\tau$</td><td><code>\tau</code></td></tr><tr><td>$\upsilon$</td><td><code>\upsilon</code></td><td>$\phi$</td><td><code>\phi</code></td></tr><tr><td>$\chi$</td><td><code>\chi</code></td><td>$\psi$</td><td><code>\psi</code></td></tr><tr><td>$\omega$</td><td><code>\omega</code></td><td></td><td></td></tr></tbody></table><h3 id="常见符号"><a href="#常见符号" class="headerlink" title="常见符号"></a>常见符号</h3><table><thead><tr><th>显示</th><th>命令</th><th>显示</th><th>命令</th></tr></thead><tbody><tr><td>$^{a}$</td><td><code>^&#123;a&#125;</code></td><td>$_{a}$</td><td><code>_&#123;a&#125;</code></td></tr><tr><td>${x}\cdot{y}$</td><td><code>&#123;x&#125;\cdot&#123;y&#125;</code></td><td>${x}*{y}$</td><td><code>&#123;x&#125;*&#123;y&#125;</code></td></tr><tr><td>${x}\colon{y}$</td><td><code>&#123;x&#125;\colon&#123;y&#125;</code></td><td>${x}\times{y}$</td><td><code>&#123;x&#125;\times&#123;y&#125;</code></td></tr><tr><td>${x}.{y}$</td><td><code>&#123;x&#125;.&#123;y&#125;</code></td><td>${x},{y}$</td><td><code>&#123;x&#125;,&#123;y&#125;</code></td></tr><tr><td>${x}\pm{y}$</td><td><code>&#123;x&#125;\pm&#123;y&#125;</code></td><td>${x}\over{y}$</td><td><code>&#123;x&#125;\over&#123;y&#125;</code></td></tr><tr><td>$\vdots$</td><td><code>\vdots</code></td><td>$\ddots$</td><td><code>\ddots</code></td></tr><tr><td>$\dot{x}$</td><td><code>\dot&#123;x&#125;</code></td><td>$\ddot{x}$</td><td><code>\ddot&#123;x&#125;</code></td></tr><tr><td>$\breve{x}$</td><td><code>\breve&#123;x&#125;</code></td><td>$\widehat{xxx}$</td><td><code>\widehat&#123;xxx&#125;</code></td></tr><tr><td>$\acute{x}$</td><td><code>\acute&#123;x&#125;</code></td><td>$\check{x}$</td><td><code>\check&#123;x&#125;</code></td></tr><tr><td>$\grave{x}$</td><td><code>\grave&#123;x&#125;</code></td><td>$\tilde{x}$</td><td><code>\tilde&#123;x&#125;</code></td></tr><tr><td>$\bar{x}$</td><td><code>\bar&#123;x&#125;</code></td><td>$\hat{x}$</td><td><code>\hat&#123;x&#125;</code></td></tr><tr><td>$\vec{xy}$</td><td><code>\vec&#123;xy&#125;</code></td><td>${x}\dotsm{y}$</td><td><code>&#123;x&#125;\dotsm&#123;y&#125;</code></td></tr><tr><td>${x}\dotso{y}$</td><td><code>&#123;x&#125;\dotso&#123;y&#125;</code></td><td>$\widetilde{xxx}$</td><td><code>\widetilde&#123;xxx&#125;</code></td></tr><tr><td>$\neq$</td><td><code>\neq</code></td><td>$\backslash$</td><td><code>\backslash</code></td></tr><tr><td>$\smallsetminus$</td><td><code>\smallsetminus</code></td><td></td><td>&#96;&#96;</td></tr><tr><td>$\lbrace$</td><td><code>\lbrace</code></td><td>$\rbrace$</td><td><code>\rbrace</code></td></tr><tr><td>$\lgroup$</td><td><code>\lgroup</code></td><td>$\rgroup$</td><td><code>\rgroup</code></td></tr><tr><td>$\langle$</td><td><code>\langle</code></td><td>$\rangle$</td><td><code>\rangle</code></td></tr><tr><td>$\lmoustache$</td><td><code>\lmoustache</code></td><td>$\rmoustache$</td><td><code>\rmoustache</code></td></tr><tr><td>$\lVert$</td><td><code>\lVert</code></td><td>$\rVert$</td><td><code>\rVert</code></td></tr><tr><td>$\lvert$</td><td><code>\lvert</code></td><td>$\rvert$</td><td><code>\rvert</code></td></tr><tr><td>$\lfloor$</td><td><code>\lfloor</code></td><td>$\rfloor$</td><td><code>\rfloor</code></td></tr><tr><td>$\lceil$</td><td><code>\lceil</code></td><td>$\rceil$</td><td><code>\rcei</code></td></tr><tr><td>$\cdots$</td><td><code>\cdots</code></td><td>$\infty$</td><td><code>\infty</code></td></tr><tr><td>$\approx$</td><td><code>\approx</code></td><td>$\subseteq$</td><td><code>\subseteq</code></td></tr><tr><td>$\cap$</td><td><code>\cap</code></td><td>$\cup$</td><td><code>\cup</code></td></tr><tr><td>$\leq$</td><td><code>\leq</code></td><td>$\geq$</td><td><code>\geq</code></td></tr><tr><td>$\overline{A}$</td><td><code>\overline&#123;A&#125;</code></td><td>$\bar{A}$</td><td><code>\bar&#123;A&#125;</code></td></tr></tbody></table><h3 id="公式"><a href="#公式" class="headerlink" title="公式"></a>公式</h3><table><thead><tr><th>显示</th><th>命令</th><th>显示</th><th>命令</th></tr></thead><tbody><tr><td>$\frac{n}{n-1}$</td><td><code>\frac&#123;n&#125;&#123;n-1&#125;</code></td><td>$\sqrt[n]{ab}$</td><td><code>\sqrt[n]&#123;ab&#125;</code></td></tr><tr><td>$\sqrt{ab}​$</td><td><code>\sqrt&#123;ab&#125;​</code></td><td>$\log_{a}{b}$</td><td><code>\log_&#123;a&#125;&#123;b&#125;</code></td></tr><tr><td>$\lg{ab}$</td><td><code>\lg&#123;ab&#125;</code></td><td>$\text{d}x$</td><td><code>\text&#123;d&#125;x</code></td></tr><tr><td>$\int$</td><td><code>\int</code></td><td>$\int_{a}^{b}$</td><td><code>\int_&#123;a&#125;^&#123;b&#125;</code></td></tr><tr><td>$\lim$</td><td><code>\lim</code></td><td>$\sum$</td><td><code>\sum</code></td></tr><tr><td>$\prod$</td><td><code>\prod</code></td><td></td><td></td></tr></tbody></table><h3 id="辅助符号"><a href="#辅助符号" class="headerlink" title="辅助符号"></a>辅助符号</h3><table><thead><tr><th>示例</th><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>$\displaystyle\sum$</td><td><code>\displaystyle</code></td><td>显示模式，适合于式子太小，需要换行显示或加大的情况</td></tr><tr><td>$\boxed{E&#x3D;mc^2}$</td><td><code>\boxed&#123;&#125;</code></td><td>在指定位置加方框</td></tr><tr><td>$\overbrace{E&#x3D;mc^2}^{质能守恒公式}$</td><td><code>\overbrace&#123;&#125;^&#123;\text&#125;</code></td><td>指定上括号</td></tr><tr><td>$\underbrace{E&#x3D;mc^2}_{质能守恒公式}$</td><td><code>\underbrace&#123;&#125;_&#123;\text&#125;</code></td><td>指定下括号</td></tr><tr><td>$a\ b$</td><td><code>\</code></td><td>空出一格</td></tr><tr><td>$a\quad b$</td><td><code>\quad</code></td><td>空出四格</td></tr><tr><td>$a\\b$</td><td><code>\\</code></td><td>换行（markdown中需要输入<code>\\\\</code>）</td></tr></tbody></table><h3 id="矩阵"><a href="#矩阵" class="headerlink" title="矩阵"></a>矩阵</h3><p><code>$$\begin&#123;matrix&#125; 1 &amp; 5 \\\\ 4 &amp; 6 \end&#123;matrix&#125;</code><br>$$\begin{matrix} 1 &amp; 5 \\ 4 &amp; 6 \end{matrix}$$</p><p>花括号中的<code>matrix</code>可变化，由此给矩阵套上不同的括号<br><code>matrix</code><br>$$\begin{matrix} 1 &amp; 5 \\ 4 &amp; 6 \end{matrix}$$</p><p><code>pmatrix</code><br>$$\begin{pmatrix} 1 &amp; 5 \\ 4 &amp; 6  \end{pmatrix}$$</p><p><code>bmatrix</code><br>$$\begin{bmatrix}  1 &amp; 5 \\ 4 &amp; 6 \end{bmatrix}$$</p><p><code>Bmatrix</code><br>$$\begin{Bmatrix} 1 &amp; 5 \\ 4 &amp; 6 \end{Bmatrix}$$</p><p><code>vmatrix</code><br>$$\begin{vmatrix} 1 &amp; 5 \\ 4 &amp; 6  \end{vmatrix}$$</p><h2 id="git指令"><a href="#git指令" class="headerlink" title="git指令"></a>git指令</h2><div class="note note-warning">            <p>git文档在<a href="https://git-scm.com/book/en/v2/Appendix-C%3A-Git-Commands-Setup-and-Config">这里</a>。<br>CS61B中的<a href="https://sp24.datastructur.es/labs/lab04/">教程</a>。</p>          </div><h2 id="类unix的控制台指令"><a href="#类unix的控制台指令" class="headerlink" title="类unix的控制台指令"></a>类unix的控制台指令</h2><div class="note note-warning">            <p><a href="https://sp24.datastructur.es/labs/lab04/terminal/">参考来源</a>。</p>          </div><h2 id="vim指令"><a href="#vim指令" class="headerlink" title="vim指令"></a>vim指令</h2><div class="note note-warning">            <p><a href="https://www.runoob.com/linux/linux-vim.html">参考来源</a>。</p>          </div><h3 id="底线模式"><a href="#底线模式" class="headerlink" title="底线模式"></a>底线模式</h3><p>在命令模式下输入 <strong><code>:</code></strong> 即可进入底线命令模式，用于执行文件相关操作。</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td><code>:w</code></td><td>保存文件</td></tr><tr><td><code>:q</code></td><td>退出编译器</td></tr><tr><td><code>:wq</code></td><td>保存并退出</td></tr><tr><td><code>q!</code></td><td>强制退出</td></tr></tbody></table><h3 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h3><p>刚启动Vim时，进入的就是命令模式</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td><code>i</code></td><td>进入输入模式</td></tr><tr><td><code>x</code></td><td>删除光标所在字符</td></tr><tr><td><code>dd</code></td><td>剪切当前行</td></tr><tr><td><code>yy</code></td><td>复制当前行</td></tr><tr><td><code>p</code></td><td>粘贴到光标下方</td></tr><tr><td><code>P</code></td><td>粘贴到光标上方</td></tr><tr><td><code>u</code></td><td>撤销</td></tr><tr><td><code>Ctrl+r</code></td><td>撤销上一次撤销</td></tr><tr><td><code>o</code></td><td>在当前行上方插入新行</td></tr><tr><td><code>O</code></td><td>在当前行下方插入新行</td></tr></tbody></table><p><img src="/2024/11/16/order-set/vi-vim-cheat-sheet-sch.gif" alt="更详细的指令"></p><div class="note note-info">            <p>而输入模式与平时的输入没有什么不同，在此省略。</p>          </div><h2 id="Linux上的bush指令"><a href="#Linux上的bush指令" class="headerlink" title="Linux上的bush指令"></a>Linux上的bush指令</h2><p>学习OS需要，现列出部分指令</p><h3 id="基础操作"><a href="#基础操作" class="headerlink" title="基础操作"></a>基础操作</h3><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td><code>ls</code></td><td>显示该目录下的所有文件</td></tr><tr><td><code>ls example</code></td><td>打开目录下的文件<code>example</code></td></tr><tr><td><code>ls ..</code></td><td>打开上级目录</td></tr><tr><td><code>vi example</code> <code>vim example</code></td><td>通过vim新建或打开某文本文件</td></tr><tr><td><code>rm file1 file2</code></td><td>删除<code>file1</code>和<code>file2</code></td></tr><tr><td><code>rm -r dir</code></td><td>删除<code>dir</code>文件夹下的所有文件</td></tr><tr><td><code>rm -f file</code></td><td>强制删除<code>file</code></td></tr></tbody></table><h3 id="gcc"><a href="#gcc" class="headerlink" title="gcc"></a>gcc</h3><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td><code>gcc example.c -o example</code></td><td>编译C语言文件<code>example.c</code>，生成可执行文件<code>example</code></td></tr></tbody></table><div class="note note-info">            <p>pthread相关操作需要显示连接POSIX线程库</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">gcc example.c -o example -pthread<br></code></pre></td></tr></table></figure>          </div><h3 id="gdb"><a href="#gdb" class="headerlink" title="gdb"></a>gdb</h3><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td><code>gdb ./example</code></td><td>使用gdb调试</td></tr><tr><td><code>break filename: line</code></td><td>在某文件的特定行设定断点</td></tr><tr><td><code>break f</code></td><td>在函数<code>f</code>中设置断点</td></tr><tr><td><code>run</code></td><td>运行指令</td></tr><tr><td><code>next</code> <code>n</code></td><td>逐行执行</td></tr><tr><td><code>step</code> <code>s</code></td><td>步进</td></tr><tr><td><code>print x</code></td><td>查看变量x的值</td></tr><tr><td><code>continue</code> <code>c</code></td><td>继续</td></tr><tr><td><code>quit</code></td><td>退出</td></tr></tbody></table><h3 id="makefile与内核开发"><a href="#makefile与内核开发" class="headerlink" title="makefile与内核开发"></a>makefile与内核开发</h3><div class="note note-success">            <p>该节以下内容均由copilot生成</p>          </div><p>在内核开发中，通常没有<code>main</code>函数，而是通过内核模块的入口函数（如<code>init_module</code>或<code>module_init</code>宏定义的函数）来启动。以下是如何使用<code>makefile</code>编译和加载内核模块的步骤：</p><ol><li><p><strong>确保<code>Makefile</code>正确配置</strong><br> 一个典型的<code>Makefile</code>可能如下：</p> <figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs makefile">obj-m += example.o<br><br><span class="hljs-section">all:</span><br>    make -C /lib/modules/<span class="hljs-variable">$(<span class="hljs-built_in">shell</span> uname -r)</span>/build M=<span class="hljs-variable">$(PWD)</span> modules<br><br><span class="hljs-section">clean:</span><br>    make -C /lib/modules/<span class="hljs-variable">$(<span class="hljs-built_in">shell</span> uname -r)</span>/build M=<span class="hljs-variable">$(PWD)</span> clean<br></code></pre></td></tr></table></figure></li><li><p><strong>编译模块</strong><br> 在终端中运行以下命令：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make<br></code></pre></td></tr></table></figure></li><li><p><strong>加载模块</strong><br> 使用<code>insmod</code>命令加载模块：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo insmod example.ko<br></code></pre></td></tr></table></figure></li><li><p><strong>查看日志</strong><br> 使用<code>dmesg</code>查看模块加载的日志信息：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">dmesg<br></code></pre></td></tr></table></figure></li><li><p><strong>卸载模块</strong><br> 使用<code>rmmod</code>命令卸载模块：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">sudo rmmod example<br></code></pre></td></tr></table></figure></li><li><p><strong>清理生成文件</strong><br> 使用<code>make clean</code>清理编译生成的文件：</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">make clean<br></code></pre></td></tr></table></figure></li></ol><div class="note note-warning">            <p>确保已安装内核头文件和开发工具，并具有加载内核模块的权限（通常需要<code>sudo</code>）。</p>          </div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;note note-info&quot;&gt;
            &lt;p&gt;有时间了补表格。&lt;/p&gt;
          &lt;/div&gt;

&lt;h2 id=&quot;latex的碎片化使用&quot;&gt;&lt;a href=&quot;#latex的碎片化使用&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    <category term="碎片知识" scheme="http://example.com/categories/%E7%A2%8E%E7%89%87%E7%9F%A5%E8%AF%86/"/>
    
    
    <category term="速查" scheme="http://example.com/tags/%E9%80%9F%E6%9F%A5/"/>
    
  </entry>
  
  <entry>
    <title>心中有B树，做人要虚心</title>
    <link href="http://example.com/2024/11/15/b-tree/"/>
    <id>http://example.com/2024/11/15/b-tree/</id>
    <published>2024-11-15T07:57:11.000Z</published>
    <updated>2024-11-20T11:21:52.032Z</updated>
    
    <content type="html"><![CDATA[<p>B-树用于减少树的长度和减少插入节点操作时的OI次数。以下主要讨论其具体的代码实现。抽象过程和图示则移步至<a href="https://ivanclf.github.io/2024/11/07/cs61b/#B-%E6%A0%91">CS61B相关内容</a>。</p><div class="note note-info">            <p><a href="https://zhuanlan.zhihu.com/p/146252512">点这看原文</a><br>多出的解释或有不准确之处（因为我并不是很清楚）。</p>          </div><h2 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-type">int</span> *keys; <span class="hljs-comment">// 存储关键字的数组</span><br><span class="hljs-type">int</span> t;  <span class="hljs-comment">// 最小度 (定义一个结点包含关键字的个数 t-1 &lt;= num &lt;= 2t -1) </span><br>BTreeNode **C; <span class="hljs-comment">// 存储孩子结点指针的数组</span><br><span class="hljs-type">int</span> n;  <span class="hljs-comment">// 记录当前结点包含的关键字的个数</span><br><span class="hljs-type">bool</span> leaf; <span class="hljs-comment">// 叶子结点的一个标记，如果是叶子结点则为true,否则false</span><br></code></pre></td></tr></table></figure><p>其中<code>leaf</code>可省略，可通过判断<code>**C</code>是否为空指针实现。<br>B-树中一个节点的定义</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BTreeNode</span> <br>&#123; <br>    <span class="hljs-type">int</span> *keys; <span class="hljs-comment">// 存储关键字的数组</span><br>    <span class="hljs-type">int</span> t;  <span class="hljs-comment">// 最小度 (定义一个结点包含关键字的个数 t-1 &lt;= num &lt;= 2t -1) </span><br>    BTreeNode **C; <span class="hljs-comment">// 存储孩子结点指针的数组</span><br>    <span class="hljs-type">int</span> n;  <span class="hljs-comment">// 记录当前结点包含的关键字的个数</span><br>    <span class="hljs-type">bool</span> leaf; <span class="hljs-comment">// 叶子结点的一个标记，如果是叶子结点则为true,否则false</span><br><span class="hljs-keyword">public</span>: <br>    <span class="hljs-built_in">BTreeNode</span>(<span class="hljs-type">int</span> <span class="hljs-type">_t</span>, <span class="hljs-type">bool</span> _leaf);<br><br>    <span class="hljs-comment">// 进行中序遍历</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">traverse</span><span class="hljs-params">()</span></span>; <br><br>    <span class="hljs-comment">// 查找一个关键字</span><br>    <span class="hljs-function">BTreeNode *<span class="hljs-title">search</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span></span>; <span class="hljs-comment">// 如果没有出现，则返回 NULL</span><br><br>    <span class="hljs-comment">// 设置友元，以便访问BTreeNode类中的私有成员</span><br>    <span class="hljs-keyword">friend</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BTree</span>; <br>&#125;; <br></code></pre></td></tr></table></figure><div class="note note-success">            <p>友元<code>friend</code>是C++中的一个关键字，友元函数可以访问类中的<code>private</code>成员和<code>protected</code>成员，但由于友元函数可定义在类的外侧，因此友元函数不是成员函数。<br>友元类即指定某类，可访问自己的<code>private</code>成员和<code>protected</code>成员。<br>友元能节省类中部分<code>getter()</code>和<code>setter()</code>函数的使用，但会导致类的继承关系较为混乱。</p>          </div><p>B树的完整定义</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">// B-树 </span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BTree</span> <br>&#123; <br>    BTreeNode *root; <span class="hljs-comment">//指向B-树根节点的指针</span><br>    <span class="hljs-type">int</span> t; <span class="hljs-comment">// 最小度</span><br><span class="hljs-keyword">public</span>: <br>    <span class="hljs-comment">// 构造器（初始化一棵树为空树）</span><br>    <span class="hljs-built_in">BTree</span>(<span class="hljs-type">int</span> <span class="hljs-type">_t</span>) <br>    &#123;<br>        root = <span class="hljs-literal">NULL</span>;<br>        t = <span class="hljs-type">_t</span>;<br>    &#125; <br><br>    <span class="hljs-comment">// 进行中序遍历</span><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">traverse</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">if</span> (root != <span class="hljs-literal">NULL</span>) root-&gt;<span class="hljs-built_in">traverse</span>(); &#125; <br><br>    <span class="hljs-comment">// B-树中查找一个关键字 k </span><br>    <span class="hljs-function">BTreeNode* <span class="hljs-title">search</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span>&#123; <span class="hljs-keyword">return</span> (root == <span class="hljs-literal">NULL</span>) ? <span class="hljs-literal">NULL</span> : root-&gt;<span class="hljs-built_in">search</span>(k); &#125; <br>&#125;; <br></code></pre></td></tr></table></figure><h2 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">BTreeNode *<span class="hljs-title">BTreeNode::search</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span><br><span class="hljs-function"></span>&#123; <br>    <span class="hljs-comment">// 找到第一个大于等于待查找关键字 k 的关键字</span><br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; <br>    <span class="hljs-keyword">while</span> (i &lt; n &amp;&amp; k &gt; keys[i]) i++; <br><br>    <span class="hljs-comment">// 如果找到的第一个关键字等于 k , 返回结点指针 </span><br>    <span class="hljs-keyword">if</span> (keys[i] == k) <br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>; <br><br>    <span class="hljs-comment">// 如果没有找到关键 k 且当前结点为叶子结点则返回NULL</span><br>    <span class="hljs-keyword">if</span> (leaf == <span class="hljs-literal">true</span>) <br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>; <br><br>    <span class="hljs-comment">// 递归访问恰当的子代</span><br>    <span class="hljs-keyword">return</span> C[i]-&gt;<span class="hljs-built_in">search</span>(k); <br>&#125;<br></code></pre></td></tr></table></figure><p>寻找到k所在的位置或范围（找到则是具体位置，输出结果，没找到则是两个数之间的范围）。若找到的是范围，则寻找其子树（如果有）。而子树数组和值数组间的关系如下图</p><table>    <tr>        <th>key:</th> <td>0</td> <td>1</td> <td>2</td> <td>3</td>    </tr>    <tr>        <th>child:</th> <td>0</td> <td>1</td> <td>2</td> <td>3</td> <td>4</td>    </tr></table><p>而<code>i</code>只是一个索引，key数组的索引和child数组的索引是等效的。</p><div class="note note-info">            <p>此处是先循环，找到索引再判断情况。如果是创造一个大循环体，又会是怎么样的状况？</p>          </div><h2 id="中序遍历"><a href="#中序遍历" class="headerlink" title="中序遍历"></a>中序遍历</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BTreeNode::traverse</span><span class="hljs-params">()</span> </span><br><span class="hljs-function"></span>&#123; <br>    <span class="hljs-comment">// 有 n 个关键字和 n+1 个孩子  </span><br>    <span class="hljs-comment">// 遍历 n 个关键字和前 n 个孩子</span><br>    <span class="hljs-type">int</span> i;<br>    <span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; n; i++) <br>    &#123; <br>        <span class="hljs-comment">// 如果当前结点不是叶子结点, 在打印 key[i] 之前, 先遍历以 C[i] 为根的子树</span><br>        <span class="hljs-keyword">if</span> (leaf == <span class="hljs-literal">false</span>) <br>            C[i]-&gt;<span class="hljs-built_in">traverse</span>(); <br>        cout &lt;&lt; <span class="hljs-string">&quot; &quot;</span> &lt;&lt; keys[i]; <br>    &#125; <br><br>    <span class="hljs-comment">// 打印以最后一个孩子为根的子树</span><br>    <span class="hljs-keyword">if</span> (leaf == <span class="hljs-literal">false</span>)<br>        C[i]-&gt;<span class="hljs-built_in">traverse</span>(); <br>&#125; <br></code></pre></td></tr></table></figure><p>本节点的右子树即下一节点的左子树，因此只需要循环打印左子树-根节点即可。最后再打印右子树。</p><h2 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h2><p>插入的操作较为复杂。需要涉及指针的重新分配。以下是伪代码</p><ol><li>初始化x作为根结点</li><li>当x不是叶子结点，执行如下操作：<ul><li>找到x的下一个要被访问的孩子结点 y</li><li>如果y没有满，则将结点y作为新的 x</li><li>如果y已经满了，拆分y，结点x的指针指向结点y的两部分。 如果 k 比y中间的关键字小， 则将y的第一部分作为新的x，否则将y的第二部分作为新的x，当将y拆分后，将y中的一个关键字移动到它的父结点x当中。</li></ul></li></ol><p>以下是插入主函数的操作</p><ol><li>若树为空树，则在关键字数组中添加一员。</li><li>若树的结点已满，则进行生长操作<ul><li>生成新的根节点。</li><li>旧的根节点分成两个，均作为新的根节点的孩子。</li><li>随后更新结点</li></ul></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BTree::insert</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span><br><span class="hljs-function"></span>&#123; <br>    <span class="hljs-comment">// 如果树为空树</span><br>    <span class="hljs-keyword">if</span> (root == <span class="hljs-literal">NULL</span>) <br>    &#123; <br>        <span class="hljs-comment">// 为根结点分配空间</span><br>        root = <span class="hljs-keyword">new</span> <span class="hljs-built_in">BTreeNode</span>(t, <span class="hljs-literal">true</span>); <br>        root-&gt;keys[<span class="hljs-number">0</span>] = k; <span class="hljs-comment">//插入结点 k </span><br>        root-&gt;n = <span class="hljs-number">1</span>; <span class="hljs-comment">// 更新根结点高寒的关键字的个数为 1</span><br>    &#125; <br>    <span class="hljs-keyword">else</span>  <br>    &#123; <br>        <span class="hljs-comment">// 当根结点已满，则对B-树进行生长操作 </span><br>        <span class="hljs-keyword">if</span> (root-&gt;n == <span class="hljs-number">2</span>*t<span class="hljs-number">-1</span>) <br>        &#123; <br>            <span class="hljs-comment">// 为新的根结点分配空间</span><br>            BTreeNode *s = <span class="hljs-keyword">new</span> <span class="hljs-built_in">BTreeNode</span>(t, <span class="hljs-literal">false</span>); <br><br>            <span class="hljs-comment">// 将旧的根结点作为新的根结点的孩子</span><br>            s-&gt;C[<span class="hljs-number">0</span>] = root; <br><br>            <span class="hljs-comment">// 将旧的根结点分裂为两个，并将一个关键字上移到新的根结点 </span><br>            s-&gt;<span class="hljs-built_in">splitChild</span>(<span class="hljs-number">0</span>, root); <br><br>            <span class="hljs-comment">// 新的根结点有两个孩子结点，确定哪一个孩子将拥有新插入的关键字</span><br>            <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; <br>            <span class="hljs-keyword">if</span> (s-&gt;keys[<span class="hljs-number">0</span>] &lt; k) <br>                i++; <br>            s-&gt;C[i]-&gt;<span class="hljs-built_in">insertNonFull</span>(k); <br><br>            <span class="hljs-comment">// 新的根结点更新为 s</span><br>            root = s; <br>        &#125; <br>        <span class="hljs-keyword">else</span> <span class="hljs-comment">//根结点未满，调用insertNonFull()函数进行插入</span><br>            root-&gt;<span class="hljs-built_in">insertNonFull</span>(k); <br>    &#125; <br>&#125; <br></code></pre></td></tr></table></figure><p>将关键字 k 插入到一个未满的结点中，步骤如下</p><ol><li>如果是叶子节点，则直接寻找位置插入。</li><li>如果不是叶子结点<ul><li>找到符合条件的孩子结点。</li><li>若孩子结点已满，则进行分裂操作<code>C[i]</code>中第二个关键字上移到父节点，其余分裂为两个孩子结点。</li></ul></li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BTreeNode::insertNonFull</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> </span><br><span class="hljs-function"></span>&#123; <br>    <span class="hljs-comment">// 初始化 i 为结点中的最后一个关键字的位置</span><br>    <span class="hljs-type">int</span> i = n<span class="hljs-number">-1</span>; <br><br>    <span class="hljs-comment">// 如果当前结点是叶子结点</span><br>    <span class="hljs-keyword">if</span> (leaf == <span class="hljs-literal">true</span>) <br>    &#123; <br>        <span class="hljs-comment">// 下面的循环做两件事：</span><br>        <span class="hljs-comment">// a) 找到新插入的关键字位置并插入</span><br>        <span class="hljs-comment">// b) 移动所有大于关键字 k 的向后移动一个位置</span><br>        <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">0</span> &amp;&amp; keys[i] &gt; k) <br>        &#123; <br>            keys[i+<span class="hljs-number">1</span>] = keys[i]; <br>            i--; <br>        &#125; <br><br>        <span class="hljs-comment">// 插入新的关键字，结点包含的关键字个数加 1 </span><br>        keys[i+<span class="hljs-number">1</span>] = k; <br>        n = n+<span class="hljs-number">1</span>; <br>    &#125; <br>    <span class="hljs-keyword">else</span> <br>    &#123; <br>        <span class="hljs-comment">//找到第一个大于关键字 k 的关键字 keys[i] 的孩子结点</span><br>        <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">0</span> &amp;&amp; keys[i] &gt; k) <br>            i--; <br><br>        <span class="hljs-comment">// 检查孩子结点是否已满</span><br>        <span class="hljs-keyword">if</span> (C[i+<span class="hljs-number">1</span>]-&gt;n == <span class="hljs-number">2</span>*t<span class="hljs-number">-1</span>) <br>        &#123; <br>            <span class="hljs-comment">// 如果已满，则进行分裂操作</span><br>            <span class="hljs-built_in">splitChild</span>(i+<span class="hljs-number">1</span>, C[i+<span class="hljs-number">1</span>]); <br><br>            <span class="hljs-comment">// 分裂后，C[i] 中间的关键字上移到父结点，C[i] 分裂称为两个孩子结点，找到新插入关键字应该插入的结点位置</span><br>            <span class="hljs-keyword">if</span> (keys[i+<span class="hljs-number">1</span>] &lt; k) <br>                i++; <br>        &#125; <br>        C[i+<span class="hljs-number">1</span>]-&gt;<span class="hljs-built_in">insertNonFull</span>(k); <br>    &#125; <br>&#125; <br></code></pre></td></tr></table></figure><p>结点y已满，则分裂结点 y</p><ol><li>创建一个新的结点，空间更小</li><li>y的后面结点都到新结点中。若y不是叶子结点，则将孩子结点全部拷贝到新结点中。</li><li>随后就是常规的数组移动数据，腾位置给指定结点的操作。</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">BTreeNode::splitChild</span><span class="hljs-params">(<span class="hljs-type">int</span> i, BTreeNode *y)</span> </span><br><span class="hljs-function"></span>&#123; <br>    <span class="hljs-comment">// 创建一个新的结点存储 t - 1 个关键字</span><br>    BTreeNode *z = <span class="hljs-keyword">new</span> <span class="hljs-built_in">BTreeNode</span>(y-&gt;t, y-&gt;leaf); <br>    z-&gt;n = t - <span class="hljs-number">1</span>; <br><br>    <span class="hljs-comment">//将结点y的后 t -1 个关键字拷贝到 z 中</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; t<span class="hljs-number">-1</span>; j++) <br>        z-&gt;keys[j] = y-&gt;keys[j+t]; <br><br>    <span class="hljs-comment">// 如果y不是叶子结点，拷贝y的后 t 个孩子结点到 z中</span><br>    <span class="hljs-keyword">if</span> (y-&gt;leaf == <span class="hljs-literal">false</span>) <br>    &#123; <br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; t; j++) <br>        z-&gt;C[j] = y-&gt;C[j+t];  <br>    &#125; <br><br>    <span class="hljs-comment">//将y所包含的关键字的个数设置为 t -1，因为已满则为2t -1 ，结点 z 中包含 t - 1 个，一个关键字需要上移，所以y中包含的关键字变为 2t-1 - (t-1) -1 </span><br>    y-&gt;n = t - <span class="hljs-number">1</span>; <br><br>    <span class="hljs-comment">// 给当前结点的指针分配新的空间，因为有新的关键字加入，父结点将多一个孩子。</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = n; j &gt;= i+<span class="hljs-number">1</span>; j--) <br>        C[j+<span class="hljs-number">1</span>] = C[j]; <br><br>    <span class="hljs-comment">// 当前结点的下一个孩子设置为z </span><br>    C[i+<span class="hljs-number">1</span>] = z; <br><br>    <span class="hljs-comment">//将所有父结点中比上移的关键字大的关键字后移，找到上移结点的关键字的位置</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = n<span class="hljs-number">-1</span>; j &gt;= i; j--) <br>        keys[j+<span class="hljs-number">1</span>] = keys[j]; <br><br>    <span class="hljs-comment">// 拷贝y的中间关键字到其父结点中</span><br>    keys[i] = y-&gt;keys[t<span class="hljs-number">-1</span>]; <br><br>    <span class="hljs-comment">//当前结点包含的关键字个数加 1 </span><br>    n = n + <span class="hljs-number">1</span>;<br>&#125; <br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;B-树用于减少树的长度和减少插入节点操作时的OI次数。以下主要讨论其具体的代码实现。抽象过程和图示则移步至&lt;a href=&quot;https://ivanclf.github.io/2024/11/07/cs61b/#B-%E6%A0%91&quot;&gt;CS61B相关内容&lt;/a&gt;。&lt;/p&gt;</summary>
      
    
    
    
    <category term="算法" scheme="http://example.com/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C++" scheme="http://example.com/tags/C/"/>
    
    <category term="算法" scheme="http://example.com/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>CS61B</title>
    <link href="http://example.com/2024/11/07/cs61b/"/>
    <id>http://example.com/2024/11/07/cs61b/</id>
    <published>2024-11-07T01:10:44.000Z</published>
    <updated>2024-11-21T13:12:16.869Z</updated>
    
    <content type="html"><![CDATA[<head>    <style>        span.through        {            font-weight: lighter;            text-decoration: line-through;        }        span.bold        {            color: red;            font-weight: bold;        }    </style></head><p>以下是看CS61B时做的笔记。CS61B主要教授Java语言的应用和算法与数据结构，本篇侧重算法与数据结构。</p><h2 id="List-（链表）"><a href="#List-（链表）" class="headerlink" title="List （链表）"></a>List （链表）</h2><p><a href="https://ivanclf.github.io/2024/10/13/list/">查看这里。</a></p><div class="note note-info">            <p>原本计划的是一种数据结构开一篇，但计划赶不上变化，故只能将网课内容合做一篇了。</p>          </div><h2 id="Disjoint-Sets-（不相交集）"><a href="#Disjoint-Sets-（不相交集）" class="headerlink" title="Disjoint Sets （不相交集）"></a>Disjoint Sets （不相交集）</h2><p>对于以下链式结构</p><pre><code class=" mermaid">graph TDA[0] --&gt;B[1] --&gt;C[2]--&gt;D[3]E[4]--&gt;F[5]G[6]</code></pre><p>需要设计以下函数</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs java">ds = DisjointSets(<span class="hljs-number">7</span>);<br>ds.connect(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// 链接两个数</span><br>ds.isConnect(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// 检测两个数是否链接</span><br></code></pre></td></tr></table></figure><p>需要寻求其高效的实现方式。</p><h3 id="表与集合的嵌套"><a href="#表与集合的嵌套" class="headerlink" title="表与集合的嵌套"></a>表与集合的嵌套</h3><p>这是最显而易见的办法。<br>指定<code>List&lt;Set&lt;Integer&gt;&gt;</code>，实现方法时，先逐个寻找数字所在的集合，然后进行集合的合并或判断其是不是在同一个集合内。但该方法耗时较长。其构建、链接、判断的复杂度均为$O(n)$。<br><strong>[{1，2，3，4}, {5,6}, {7}]</strong></p><div class="note note-info">            <p>但是用封装好的集合类总让人有一种复杂度其实是$O(1)$的感觉。</p>          </div><h3 id="数组索引"><a href="#数组索引" class="headerlink" title="数组索引"></a>数组索引</h3><p>通过构建与元素<strong>等长</strong>的数组，用数组的索引值指代数字，数组的数字指代集合。当进行链接时，全组改为同一个数字。检查两数是否链接，只需要判断其索引对应的数字是否相同即可。</p><table><tr><td>element </td><td>3 </td><td>3 </td><td>3 </td><td>3 </td><td>5 </td><td>5 </td><td>7</td></tr><tr><td>index </td><td>0 </td><td>1 </td><td>2 </td><td>3 </td><td>4 </td><td>5 </td><td>6</td></tr></table><p>需要进行<code>connect()</code>函数操作时，将两个集合中的数改为同一个数。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">connect(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>);<br></code></pre></td></tr></table></figure><table><tr><td>element </td><td>5 </td><td>5 </td><td>5 </td><td>5 </td><td>5 </td><td>5 </td><td>7</td></tr><tr><td>index </td><td>0 </td><td>1 </td><td>2 </td><td>3 </td><td>4 </td><td>5 </td><td>6</td></tr></table>由此，虽然构建、链接的复杂度仍为$O(n)$，但判断的复杂度变成了$O(1)$。<h3 id="用数组实现树"><a href="#用数组实现树" class="headerlink" title="用数组实现树"></a>用数组实现树</h3><p>将集合变成树的形式，在一维数组中显示，仍然用索引值表示数字，但同时指明树的关系<br>对于以下树</p><pre><code class=" mermaid">graph TDA[0]--&gt;B[1]--&gt;C[2]A--&gt;D[4]E[3]--&gt;F[5]G[6]</code></pre><p>构建等长数组</p><table><tr><td>element </td><td>-1 </td><td>0 </td><td>1 </td><td>-1 </td><td>0 </td><td>3 </td><td>-1</td></tr><tr><td>index </td><td>0 </td><td>1 </td><td>2 </td><td>3 </td><td>4 </td><td>5 </td><td>6</td></tr></table><p>分析其数组中的值。为<code>-1</code>时，表明索引中的数是根节点。为大于<code>-1</code>的数时，表明索引中的数的父节点。<br>进行<code>connect</code>操作时，爬取两个节点的根节点，再将一个根节点连接到另一个即可。如图所示</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java">connect(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure><p>等效于</p><pre><code class=" mermaid">graph TDA[0]--&gt;B[1]--&gt;C[2]A--&gt;D[4]A--&gt;E[3]--&gt;F[5]G[6]</code></pre><p>数组</p><table><tr><td>element </td><td>-1 </td><td>0 </td><td>1 </td><td><span class="bold">3 <td>0 </td><td>3 </td><td>-1</td></span></td></tr><tr><td>index </td><td>0 </td><td>1 </td><td>2 </td><td>3 </td><td>4 </td><td>5 </td><td>6</td></tr></table><p>但为了确保小树能拼接到大树上（确保树的高度较小），需要另外构建一个尺寸数组</p><table><tr><td>element </td><td>-1 </td><td>0 </td><td>1 </td><td><span class="through">-1</span><span class="bold">  3</span></td><td>0 </td><td>3 </td><td>-1</td></tr><tr><td>size </td><td><span class="through">3</span><span class="bold">  6</span> </td><td>2 </td><td>1 </td><td>2 </td><td>1 </td><td>1 </td><td>1</td></tr><tr><td>index </td><td>0 </td><td>1 </td><td>2 </td><td>3 </td><td>4 </td><td>5 </td><td>6</td></tr></table><p>或者实行更好的办法：给该数组中的根节点加上权重</p><table><tr><td>element </td><td><span class="through">-4</span><span class="bold">  -6</span> </td><td>0 </td><td>1 </td><td><span class="through">-1</span><span class="bold">  3</span></td><td>0 </td><td>3 </td><td>-1</td></tr><tr><td>index </td><td>0 </td><td>1 </td><td>2 </td><td>3 </td><td>4 </td><td>5 </td><td>6</td></tr></table><p>进行<code>connect</code>操作时需比较其尺寸大小。如此，该图结构就不会是线序的了。其构建复杂度不变，但链接和查找的难度均降为$O(\log N)$。</p><h3 id="进一步优化的方法"><a href="#进一步优化的方法" class="headerlink" title="进一步优化的方法"></a>进一步优化的方法</h3><p>在叶子节点向上回溯时，将涉及到的节点全部断连并链接至根节点，这样，日后进行查找时，可以大大节省时间。</p><h2 id="Binary-Search-Tree-（二叉搜索树）"><a href="#Binary-Search-Tree-（二叉搜索树）" class="headerlink" title="Binary Search Tree （二叉搜索树）"></a>Binary Search Tree （二叉搜索树）</h2><p>二叉搜索树是这样一种二叉树，对存放的数据有这样的要求：某节点的左侧子树数据均比其小，右侧子树的数据均比其大。显而易见，其算法复杂度为$O(\log N)$。</p><div class="note note-warning">            <p>理想状况下，一棵二叉搜索树足够浓密，搜索的算法复杂度则为$O(\log N)$，但如若操作不当，使插入的结点都在树的一侧，那么查找算法复杂度将退化为$O(N)$。</p>          </div><h3 id="查找"><a href="#查找" class="headerlink" title="查找"></a>查找</h3><p>BST通过递归查找，其过程较为简单。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> BST <span class="hljs-title function_">find</span><span class="hljs-params">(BST T, key k)</span> &#123;<br>    <span class="hljs-keyword">if</span>(T == <span class="hljs-literal">null</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    k.equals(T.key)<br>        <span class="hljs-keyword">return</span> T;<br>    <span class="hljs-keyword">if</span>(k &lt; T.key)<br>        <span class="hljs-keyword">return</span> find(T.left, k);<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> find(T.right, k);<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="插入"><a href="#插入" class="headerlink" title="插入"></a>插入</h3><p>插入的过程也很简单。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">static</span> BST <span class="hljs-title function_">insert</span><span class="hljs-params">(BST T, key k)</span> &#123;<br>    <span class="hljs-keyword">if</span>(T == <span class="hljs-literal">null</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BST</span>(k);<br>    <span class="hljs-keyword">if</span>(k &lt; T.key)<br>        T.left = insert(T.left, k);<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(k &gt; T.key)<br>        T.right = insert(T.right, k);<br>    <span class="hljs-keyword">return</span> T;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><p>删除过程较为复杂，可将其拆成3种情况</p><ol><li>叶子节点：找到后直接删除。</li><li>只有一个孩子节点的节点，可以将其父节点指向其子节点，该节点将自动删除（如果不是Java，则需要手动清理内存）</li><li>有两个孩子节点的节点，需要找到该节点左子树中最大的节点或右子树中最小的节点将其替换掉。</li></ol><h2 id="B-树"><a href="#B-树" class="headerlink" title="B-树"></a>B-树</h2><p>对于以下树</p><pre><code class=" mermaid">graph TD13--&gt;5--&gt;25--&gt;713--&gt;15--&gt;1415--&gt;16</code></pre><p>如果插入数据16、17、18、19，那么数据将会挤在右子树一侧，并不高效。一种可行的办法是几个数据挤在一个枝叶节点中。</p><pre><code class=" mermaid">graph TD13--&gt;5--&gt;25--&gt;713--&gt;15--&gt;1415--&gt;a[16 17 18 19]</code></pre><p>但单侧插入得多后，顺序表的寻找也同样有$O(N)$的复杂度。因此需要为顺序表大小设定一个限度。当一个表中数据溢出时，就将其中中间的一个节点放到父节点中。假设以下的树中一个节点最多只能存放3个数字。</p><pre><code class=" mermaid">graph TD13--&gt;5--&gt;25--&gt;713--&gt;b[15 17]--&gt;14b--&gt;16b--&gt;a[18 19]</code></pre><p>其中的[15, 17]节点上，小于15的数在其左子树，在15和17之间的数在中间子树，大于17的数在右子树。当继续插入数据时，也依次进行类似操作。</p><pre><code class=" mermaid">graph TDa[13]--&gt;5--&gt;25--&gt;7a--&gt;b[15 17 19]--&gt;14b--&gt;16b--&gt;18b--&gt;c[20 21 25 26]</code></pre><p>$$<br>\downarrow<br>$$<br>最小项生成靠左的子树，第二项向上移动</p><pre><code class=" mermaid">graph TDa[13]--&gt;5--&gt;25--&gt;7a--&gt;b[15 17 19 21]--&gt;14b--&gt;16b--&gt;18b--&gt;20b--&gt;c[25 26]</code></pre><p>$$<br>\downarrow<br>$$<br>最小项生成靠左的子树，第二项向上移动</p><pre><code class=" mermaid">graph TDa[13 17]--&gt;5--&gt;25--&gt;7a--&gt;15--&gt;1415--&gt;16a--&gt;b[19 21]b--&gt;18b--&gt;20b--&gt;c[25 26]</code></pre><p>如果根节点也满了，就向上生成新的根节点。<br>对于具有以上特点的树，称作<strong>B-树</strong>。当其被赋予特定规则时，则另称<strong>2-3树</strong>和<strong>2-3-4树</strong>。<br>对源代码感兴趣的可以看<a href="https://ivanclf.github.io/2024/11/15/b-tree/">这里</a>。</p><h2 id="树的旋转"><a href="#树的旋转" class="headerlink" title="树的旋转"></a>树的旋转</h2><p>树的旋转能够在改变结构的同时不改变节点的值，是实现avl树和红黑树的基本操作。</p><h3 id="引例"><a href="#引例" class="headerlink" title="引例"></a>引例</h3><p>对于以下结构</p><pre><code class=" mermaid">graph TD5--&gt;a&#123;child&#125;5--&gt;A[9]--&gt;7A--&gt;b&#123;child&#125;</code></pre><p>要实现5的左旋操作，即将5从根节点变成左节点。由此。需要将右节点9变成根节点。</p><pre><code class=" mermaid">graph TD5--&gt;a&#123;child&#125;5--&gt;c&#123;null&#125;A[9]--&gt;5A--&gt;7A--&gt;b&#123;child&#125;</code></pre><p>此时这棵树有一个不合理的地方，就是根节点9分出的树枝有3个，不符合二叉树的定义。恰好，5的右节点由于旋转空了出来，刚好可以容纳多余的节点。于是结果变成了</p><pre><code class=" mermaid">graph TD5--&gt;a&#123;child&#125;5--&gt;7A[9]--&gt;5A--&gt;b&#123;child&#125;</code></pre><p>以上就是将一个节点左旋的过程。右旋也遵循类似的操作。如果不太明白上述的操作，也可以借助B-树的知识进行理解。<br>同样的一棵树</p><pre><code class=" mermaid">graph TD5--&gt;a&#123;child&#125;5--&gt;A[9]--&gt;7A--&gt;b&#123;child&#125;</code></pre><p>在进行左旋时，可以将需要变换主从次序的两个节点暂时合到一起。即先和右节点合并，再将5分配下去。</p><pre><code class=" mermaid">graph TDA[5  9]A--&gt;B&#123;child&#125;A--&gt;7A--&gt;C&#123;child&#125;</code></pre><p>$$<br>\downarrow<br>$$<br>然后分开</p><pre><code class=" mermaid">graph TD5--&gt;a&#123;child&#125;5--&gt;7A[9]--&gt;5A--&gt;b&#123;child&#125;</code></pre><h3 id="多次旋转"><a href="#多次旋转" class="headerlink" title="多次旋转"></a>多次旋转</h3><p>经过多次旋转，可以将一棵不平衡树转变成平衡树</p><pre><code class=" mermaid">graph TD1--&gt;A[null]1--&gt;C[3]--&gt;2C--&gt;B[null]</code></pre><p>$$<br>\downarrow<br>$$<br>3右旋</p><pre><code class=" mermaid">graph TD1--&gt;A[null]1--&gt;C[2]--&gt;B[null]C--&gt;3</code></pre><p>$$<br>\downarrow<br>$$<br>1左旋</p><pre><code class=" mermaid">graph TD2--&gt;12--&gt;3</code></pre><p>成功变成了平衡树。</p><h2 id="AVL树简介"><a href="#AVL树简介" class="headerlink" title="AVL树简介"></a>AVL树简介</h2><p>AVL树在普通BST的基础上，给每个节点添加了平衡因子，<strong>平衡因子&#x3D;左子树高度-右子树高度</strong>，<br>插入一个元素时，从该节点回溯到其根节点的所有节点的平衡因子都会发生变化。当平衡因子的绝对值 <strong>&gt;1</strong>时，进行旋转操作。</p><h2 id="Left-Leaning-Red-Black-Tree-（左倾红黑树）"><a href="#Left-Leaning-Red-Black-Tree-（左倾红黑树）" class="headerlink" title="Left Leaning Red-Black Tree （左倾红黑树）"></a>Left Leaning Red-Black Tree （左倾红黑树）</h2><h2 id="哈希表"><a href="#哈希表" class="headerlink" title="哈希表"></a>哈希表</h2>]]></content>
    
    
      
      
    <summary type="html">&lt;head&gt;
    &lt;style&gt;
        span.through
        {
            font-weight: lighter;
            text-decoration: line-through;
        }
   </summary>
      
    
    
    
    <category term="算法" scheme="http://example.com/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="算法" scheme="http://example.com/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="Java" scheme="http://example.com/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>算法题汇总：其三</title>
    <link href="http://example.com/2024/10/16/topic-3/"/>
    <id>http://example.com/2024/10/16/topic-3/</id>
    <published>2024-10-16T03:18:33.000Z</published>
    <updated>2024-11-07T01:05:41.935Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Z字形扫描"><a href="#Z字形扫描" class="headerlink" title="Z字形扫描"></a>Z字形扫描</h2><p><img src="/2024/10/16/topic-3/3-1.png" alt="题目描述"></p><h3 id="源码与注释"><a href="#源码与注释" class="headerlink" title="源码与注释"></a>源码与注释</h3><p>初始化一维数组和二维数组的指针，使用全局变量的指针，就懒得传参了</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> *twoDimensionArray = <span class="hljs-literal">NULL</span>;<br><span class="hljs-type">int</span> *oneDimensionArray = <span class="hljs-literal">NULL</span>;<br></code></pre></td></tr></table></figure><p>确认已经遍历过的数据</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-type">int</span> <span class="hljs-title function_">add</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span><br>&#123;<br>    <span class="hljs-type">int</span> result = <span class="hljs-number">0</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++)<br>        result += i;<br>    <span class="hljs-keyword">return</span> result;<br>&#125;<br></code></pre></td></tr></table></figure><p>进行扫描的具体过程</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-type">void</span> <span class="hljs-title function_">zigzagScan</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span><br>&#123;<br>    <span class="hljs-type">int</span> temp = <span class="hljs-number">0</span>;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    * 坐标和从0扫到n - 1</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>    &#123;<br>        <span class="hljs-comment">//从i = 0开始扫描，附初值</span><br>        <span class="hljs-keyword">if</span> (!i)<br>            *oneDimensionArray = *twoDimensionArray;<br>        <span class="hljs-comment">//若坐标和为奇数</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (i % <span class="hljs-number">2</span>)<br>        &#123;<br>            temp = add(i);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= i; j++)<br>                *(oneDimensionArray + temp + j) = *(twoDimensionArray + j * n + (i - j));<br>        &#125;<br>        <span class="hljs-comment">//若坐标和为偶数</span><br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            temp = add(i);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= i; j++)<br>                *(oneDimensionArray + temp + j) = *(twoDimensionArray + (i - j) * n + j);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    * 从n扫到最后</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = n; i &lt;= (n - <span class="hljs-number">1</span>) * <span class="hljs-number">2</span>; i++)<br>    &#123;<br>        <span class="hljs-comment">//若是最后一个</span><br>        <span class="hljs-keyword">if</span> (i == (n - <span class="hljs-number">1</span>) * <span class="hljs-number">2</span>)<br>        &#123;<br>            temp = add(n) + add(n - <span class="hljs-number">1</span>) - <span class="hljs-number">1</span>;<br>            *(oneDimensionArray + temp) = *(twoDimensionArray + (n - <span class="hljs-number">1</span>) * n + n - <span class="hljs-number">1</span>);<br>        &#125;<br>        <span class="hljs-comment">//若坐标和为偶数</span><br>        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!(i % <span class="hljs-number">2</span>))<br>        &#123;<br>            temp = add(n) + add(n - <span class="hljs-number">1</span>) - add(<span class="hljs-number">2</span> * n - i - <span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= <span class="hljs-number">2</span> * n - i - <span class="hljs-number">2</span>; j++)<br>                *(oneDimensionArray + temp + j) = *(twoDimensionArray + (n - <span class="hljs-number">1</span> - j) * n + (i - (n - <span class="hljs-number">1</span> - j)));<br>        &#125;<br>        <span class="hljs-comment">//若坐标和为奇数</span><br>        <span class="hljs-keyword">else</span><br>        &#123;<br>            temp = add(n) + add(n - <span class="hljs-number">1</span>) - add(<span class="hljs-number">2</span> * n - i - <span class="hljs-number">1</span>);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt;= <span class="hljs-number">2</span> * n - i - <span class="hljs-number">2</span>; j++)<br>                *(oneDimensionArray + temp + j) = *(twoDimensionArray + (i - (n - <span class="hljs-number">1</span> - j)) * n + (n - <span class="hljs-number">1</span> - j));<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>main函数</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs C"><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">0</span>;<br>    <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    * 分配好需要的内存。如果不用(int *)的话编译器认，oj不认</span><br><span class="hljs-comment">    */</span><br>    oneDimensionArray = (<span class="hljs-type">int</span> *)<span class="hljs-built_in">malloc</span>(n * n * <span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>));<br>    twoDimensionArray = (<span class="hljs-type">int</span> *)<span class="hljs-built_in">malloc</span>(n * n * <span class="hljs-keyword">sizeof</span>(<span class="hljs-type">int</span>));<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n; i++)<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)<br>            <span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, twoDimensionArray + i * n + j);<br><br>    zigzagScan(n);<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; n * n; i++)<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d &quot;</span>, *(oneDimensionArray + i));<br><br>    <span class="hljs-built_in">free</span>(oneDimensionArray);<br>    <span class="hljs-built_in">free</span>(twoDimensionArray);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="迷宫问题"><a href="#迷宫问题" class="headerlink" title="迷宫问题"></a>迷宫问题</h2><p><img src="/2024/10/16/topic-3/3_2.png" alt="题目描述"></p><h3 id="输入样例"><a href="#输入样例" class="headerlink" title="输入样例"></a>输入样例</h3><p>8 8<br>1 1<br>8 8<br>0 0 1 0 0 0 1 0<br>0 0 1 1 0 0 1 0<br>0 0 0 0 1 1 0 0<br>0 1 1 1 0 0 0 0<br>0 0 0 1 1 0 0 0<br>0 1 0 0 0 1 0 0<br>0 1 1 1 0 1 1 0<br>1 1 0 0 0 0 0 0</p><h3 id="输出样例"><a href="#输出样例" class="headerlink" title="输出样例"></a>输出样例</h3><p>(1,1,1),(1,2,2),(2,2,2),(3,2,3),(3,1,2),(4,1,2),(5,1,1),(5,2,1),(5,3,2),(6,3,1),(6,4,1),(6,5,2),(7,5,2),(8,5,1),(8,6,1),(8,7,1),(8,8,1)</p><h3 id="个人写法"><a href="#个人写法" class="headerlink" title="个人写法"></a>个人写法</h3><p>设置方向与地图状况常量</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">enum</span> <span class="hljs-title class_">direction</span><br>&#123;<br>    failed,<br>    right,<br>    down,<br>    left,<br>    up<br>&#125;;<br><span class="hljs-keyword">enum</span> <span class="hljs-title class_">surroundings</span><br>&#123;<br>    uncover,<br>    blocked,<br>    covered<br>&#125;;<br>surroundings map[<span class="hljs-number">105</span>][<span class="hljs-number">105</span>] = &#123;uncover&#125;;<span class="hljs-comment">// 地图初始化</span><br><span class="hljs-type">int</span> m, n;                               <span class="hljs-comment">// 地图大小</span><br></code></pre></td></tr></table></figure><p>小人的初始化和方向判断</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">Axis</span><br>&#123;<br>    <span class="hljs-type">int</span> x;<br>    <span class="hljs-type">int</span> y;<br>    surroundings is_right;<br>    surroundings is_left;<br>    surroundings is_up;<br>    surroundings is_down;<br>    direction dir;<br>&#125; axis;<br><br></code></pre></td></tr></table></figure><p>主函数的输入</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp">axis begin, end, temp;<br><span class="hljs-type">int</span> num;<br>std::stack&lt;axis&gt; track; <span class="hljs-comment">// 足迹用栈保存</span><br><br>std::cin &gt;&gt; m &gt;&gt; n &gt;&gt; begin.x &gt;&gt; begin.y &gt;&gt; end.x &gt;&gt; end.y;<br>begin.x--, begin.y--, end.x--, end.y--;<br><br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; m; i++)<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">0</span>; j &lt; n; j++)<br>    &#123;<br>        std::cin &gt;&gt; num;<br>        <span class="hljs-keyword">switch</span> (num)<br>        &#123;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">0</span>:<br>            map[i][j] = uncover;<br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:<br>            map[i][j] = blocked;<br>        &#125;<br>    &#125;<br>temp = begin;<br></code></pre></td></tr></table></figure><p>进行操作的具体流程</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>)<br>&#123;<br>    temp.dir = right;<br>    <span class="hljs-keyword">if</span> (temp.x == end.x &amp;&amp; temp.y == end.y) <span class="hljs-comment">// 如果到达了终点则直接结束，防止弹出栈或跑了</span><br>    &#123;<br>        track.<span class="hljs-built_in">push</span>(temp);<br>        <span class="hljs-keyword">break</span>;<br>    &#125;<br>    temp = <span class="hljs-built_in">judge</span>(temp);                     <span class="hljs-comment">// 判断小人周遭的情况</span><br>    temp = <span class="hljs-built_in">direction_confirmed</span>(temp, <span class="hljs-literal">true</span>); <span class="hljs-comment">// 判断小人接下来要走的方向</span><br>    <span class="hljs-keyword">if</span> (temp.dir)   <span class="hljs-comment">// 反向不是failed，说明可以走，则向指定方向走一步</span><br>    &#123;<br>        track.<span class="hljs-built_in">push</span>(temp);<br>        temp = <span class="hljs-built_in">step_forwards</span>(temp);<br>    &#125;<br>    <span class="hljs-keyword">else</span>    <span class="hljs-comment">// 方向是failed，寻路失败</span><br>    &#123;<br>        <span class="hljs-keyword">if</span> (temp.x == begin.x &amp;&amp; temp.y == begin.y) <span class="hljs-comment">// 回到了起点，说明无路可走</span><br>            <span class="hljs-keyword">break</span>;<br>        <span class="hljs-keyword">else</span>                                        <span class="hljs-comment">// 原路返回</span><br>        &#123;<br>            map[temp.x][temp.y] = blocked;          <span class="hljs-comment">// 将死路堵上</span><br>            temp = track.<span class="hljs-built_in">top</span>();<br>            temp = <span class="hljs-built_in">direction_confirmed</span>(temp, <span class="hljs-literal">false</span>);<br>            track.<span class="hljs-built_in">pop</span>();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>由于足迹中的栈弹出来是倒序的，因此需要再来一个栈把它弹成正常顺序</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">if</span> (!track.<span class="hljs-built_in">empty</span>() &amp;&amp; track.<span class="hljs-built_in">top</span>().x == end.x &amp;&amp; track.<span class="hljs-built_in">top</span>().y == end.y)<br>&#123;<br>    std::stack&lt;axis&gt; temp;<br>    std::string s;<br>    <span class="hljs-keyword">while</span> (!track.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        temp.<span class="hljs-built_in">push</span>(track.<span class="hljs-built_in">top</span>());<br>        track.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>    <span class="hljs-keyword">while</span> (!temp.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        s.<span class="hljs-built_in">append</span>(<span class="hljs-string">&quot;(&quot;</span>).<span class="hljs-built_in">append</span>(std::<span class="hljs-built_in">to_string</span>(temp.<span class="hljs-built_in">top</span>().x + <span class="hljs-number">1</span>)).<span class="hljs-built_in">append</span>(<span class="hljs-string">&quot;,&quot;</span>).<span class="hljs-built_in">append</span>(std::<span class="hljs-built_in">to_string</span>(temp.<span class="hljs-built_in">top</span>().y + <span class="hljs-number">1</span>)).<span class="hljs-built_in">append</span>(<span class="hljs-string">&quot;,&quot;</span>).<span class="hljs-built_in">append</span>(std::<span class="hljs-built_in">to_string</span>(temp.<span class="hljs-built_in">top</span>().dir)).<span class="hljs-built_in">append</span>(<span class="hljs-string">&quot;),&quot;</span>);<br>        temp.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>    s.<span class="hljs-built_in">pop_back</span>();<br>    std::cout &lt;&lt; s &lt;&lt; std::endl;<br>&#125;<br><span class="hljs-keyword">else</span><br>    std::cout &lt;&lt; <span class="hljs-string">&quot;no&quot;</span> &lt;&lt; std::endl;<br></code></pre></td></tr></table></figure><p>judge函数，用于判断小人周遭情况</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">axis <span class="hljs-title">judge</span><span class="hljs-params">(axis target)</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-keyword">if</span> (target.y == n - <span class="hljs-number">1</span>)<br>        target.is_right = blocked;<br>    <span class="hljs-keyword">else</span><br>        target.is_right = map[target.x][target.y + <span class="hljs-number">1</span>];<br><br>    <span class="hljs-keyword">if</span> (!target.y)<br>        target.is_left = blocked;<br>    <span class="hljs-keyword">else</span><br>        target.is_left = map[target.x][target.y - <span class="hljs-number">1</span>];<br><br>    <span class="hljs-keyword">if</span> (!target.x)<br>        target.is_up = blocked;<br>    <span class="hljs-keyword">else</span><br>        target.is_up = map[target.x - <span class="hljs-number">1</span>][target.y];<br><br>    <span class="hljs-keyword">if</span> (target.x == m - <span class="hljs-number">1</span>)<br>        target.is_down = blocked;<br>    <span class="hljs-keyword">else</span><br>        target.is_down = map[target.x + <span class="hljs-number">1</span>][target.y];<br><br>    <span class="hljs-keyword">return</span> target;<br>&#125;<br></code></pre></td></tr></table></figure><p>direction_confirm函数，用于判断方向，分向前和回溯两种功能</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">axis <span class="hljs-title">direction_confirmed</span><span class="hljs-params">(axis target, <span class="hljs-type">bool</span> is_forward)</span></span><br><span class="hljs-function"></span>&#123;<br>    surroundings status;<br>    <span class="hljs-keyword">if</span> (is_forward)<br>        status = uncover;<br>    <span class="hljs-keyword">else</span><br>        status = covered;<br><br>    <span class="hljs-keyword">if</span> (target.is_right == status)<br>        target.dir = right;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target.is_down == status)<br>        target.dir = down;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target.is_left == status)<br>        target.dir = left;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target.is_up == status)<br>        target.dir = up;<br>    <span class="hljs-keyword">else</span><br>        target.dir = failed;<br>    <span class="hljs-keyword">return</span> target;<br>&#125;<br></code></pre></td></tr></table></figure><p>step_forwards函数，用于向前迈出一步</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">axis <span class="hljs-title">step_forwards</span><span class="hljs-params">(axis target)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">if</span> (target.dir == right)<br>    &#123;<br>        map[target.x][target.y] = covered;<br>        target.y++;<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target.dir == down)<br>    &#123;<br>        map[target.x][target.y] = covered;<br>        target.x++;<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target.dir == left)<br>    &#123;<br>        map[target.x][target.y] = covered;<br>        target.y--;<br>    &#125;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (target.dir == up)<br>    &#123;<br>        map[target.x][target.y] = covered;<br>        target.x--;<br>    &#125;<br>    <span class="hljs-keyword">return</span> target;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="二叉树的遍历"><a href="#二叉树的遍历" class="headerlink" title="二叉树的遍历"></a>二叉树的遍历</h2><p><img src="/2024/10/16/topic-3/3-3.png" alt="题目描述"></p><h3 id="样例输入"><a href="#样例输入" class="headerlink" title="样例输入"></a>样例输入</h3><p>7<br>2 3 1 5 7 6 4<br>1 2 3 4 5 6 7</p><h3 id="样例输出"><a href="#样例输出" class="headerlink" title="样例输出"></a>样例输出</h3><p>4 1 6 3 5 7 2</p><h3 id="个人写法-1"><a href="#个人写法-1" class="headerlink" title="个人写法"></a>个人写法</h3><p>以样例为例，解释如何由两种遍历得到唯一指定的树</p><ol><li>后序遍历的最后一位是根节点为4。</li><li>在中序遍历中找到4，其左侧是左子树，右侧是右子树。</li><li>在左子树中，其后序遍历是[2,3,1]，中序遍历为[1,2,3]。循环以上操作继续。</li></ol><div class="note note-warning">            <p>但该思路中节省了不少细节，比如如何匹配到对应的字串，如何在子树为空是跳过，等等</p>          </div><p>首先定义树的节点</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">typedef</span> <span class="hljs-keyword">struct</span> <span class="hljs-title class_">TREE</span><br>&#123;<br>    <span class="hljs-type">int</span> value;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">TREE</span> *left;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">TREE</span> *right;<br>&#125; node, *tree;<br></code></pre></td></tr></table></figure><p>进行模糊匹配，只要两个<code>vector</code>数字相同即可匹配成功，为中序遍历的子树遍历寻找合适的后序遍历。但该匹配方法应该不是最优的。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">bool</span> <span class="hljs-title">unclear_match</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; v1, vector&lt;<span class="hljs-type">int</span>&gt; v2)</span></span><br><span class="hljs-function"></span>&#123;<br><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> it = v1.<span class="hljs-built_in">begin</span>(); it != v1.<span class="hljs-built_in">end</span>(); ++it)<br>        <span class="hljs-keyword">if</span>(<span class="hljs-built_in">find</span>(v2.<span class="hljs-built_in">begin</span>(), v2.<span class="hljs-built_in">end</span>(), *it) == v2.<span class="hljs-built_in">end</span>())<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">if</span>(v1.<span class="hljs-built_in">size</span>() != v2.<span class="hljs-built_in">size</span>())<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>生成树的主体函数。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">tree <span class="hljs-title">make_tree</span><span class="hljs-params">(vector&lt;<span class="hljs-type">int</span>&gt; after, vector&lt;<span class="hljs-type">int</span>&gt; middle)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-type">int</span> root_node = after.<span class="hljs-built_in">back</span>(); <span class="hljs-comment">// 后序遍历的最后一个是根节点</span><br>    after.<span class="hljs-built_in">pop_back</span>();<br>    <span class="hljs-keyword">auto</span> index_root_node = <span class="hljs-built_in">find</span>(middle.<span class="hljs-built_in">begin</span>(), middle.<span class="hljs-built_in">end</span>(), root_node); <span class="hljs-comment">// 找到根节点在中序遍历中的位置，返回其迭代器</span><br>    vector&lt;<span class="hljs-type">int</span>&gt; left_middle, right_middle, left_after, right_after; <span class="hljs-comment">// 左子树、右子树的后序、中序遍历</span><br><br>    left_middle.<span class="hljs-built_in">assign</span>(middle.<span class="hljs-built_in">begin</span>(), index_root_node); <span class="hljs-comment">// 将中序遍历分开为左子树遍历和右子树遍历</span><br>    right_middle.<span class="hljs-built_in">assign</span>(index_root_node + <span class="hljs-number">1</span>, middle.<span class="hljs-built_in">end</span>());<br><br>    <span class="hljs-keyword">auto</span> index_after_node = after.<span class="hljs-built_in">begin</span>(); <span class="hljs-comment">// 以下均为为子树的中序遍历寻找合适的后序遍历</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i != left_middle.<span class="hljs-built_in">size</span>() &amp;&amp; index_after_node != after.<span class="hljs-built_in">end</span>(); ++index_after_node, ++i);<br>    left_after.<span class="hljs-built_in">assign</span>(after.<span class="hljs-built_in">begin</span>(), index_after_node);<br>    <span class="hljs-keyword">if</span>(<span class="hljs-built_in">unclear_match</span>(left_middle, left_after))<br>        right_after.<span class="hljs-built_in">assign</span>(index_after_node, after.<span class="hljs-built_in">end</span>());<br>    <span class="hljs-keyword">else</span><br>    &#123;   index_after_node = after.<span class="hljs-built_in">begin</span>();<br>        <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i != right_middle.<span class="hljs-built_in">size</span>() &amp;&amp; index_after_node != after.<span class="hljs-built_in">end</span>(); ++index_after_node, ++i);<br>        left_after.<span class="hljs-built_in">assign</span>(after.<span class="hljs-built_in">begin</span>(), index_after_node);<br>        right_after.<span class="hljs-built_in">assign</span>(index_after_node + <span class="hljs-number">1</span>, after.<span class="hljs-built_in">end</span>());<br>    &#125;<br><br>    tree new_node = (tree)<span class="hljs-built_in">malloc</span>(<span class="hljs-built_in">sizeof</span>(node)); <span class="hljs-comment">// 生成新的子树节点</span><br>    new_node-&gt;value = root_node;<br><br>    <span class="hljs-keyword">if</span>(!left_middle.<span class="hljs-built_in">empty</span>() &amp;&amp; !left_after.<span class="hljs-built_in">empty</span>()) <span class="hljs-comment">// 递归生成子树</span><br>        new_node-&gt;left = <span class="hljs-built_in">make_tree</span>(left_after, left_middle);<br>    <span class="hljs-keyword">else</span><br>        new_node-&gt;left = <span class="hljs-literal">nullptr</span>;<br><br>    <span class="hljs-keyword">if</span>(!right_middle.<span class="hljs-built_in">empty</span>() &amp;&amp; !right_after.<span class="hljs-built_in">empty</span>())<br>        new_node-&gt;right = <span class="hljs-built_in">make_tree</span>(right_after, right_middle);<br>    <span class="hljs-keyword">else</span><br>        new_node-&gt;right = <span class="hljs-literal">nullptr</span>;<br>    <br>    <span class="hljs-keyword">return</span> new_node;<br>&#125;<br></code></pre></td></tr></table></figure><p>进行层序遍历。步骤如下</p><ol><li>指定队列<code>q</code>，开始时先往里面弹入根节点。</li><li>若节点中有子树，则弹入。</li><li>每次固定弹出一位，直到队列为空为止。</li></ol><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function">vector&lt;<span class="hljs-type">int</span>&gt; <span class="hljs-title">print_queue</span><span class="hljs-params">(tree certain_tree)</span></span><br><span class="hljs-function"></span>&#123;<br>    queue&lt;tree&gt; q;<br>    vector&lt;<span class="hljs-type">int</span>&gt; v;<br>    <span class="hljs-keyword">if</span>(certain_tree)<br>        q.<span class="hljs-built_in">push</span>(certain_tree);<br>    <span class="hljs-keyword">while</span>(!q.<span class="hljs-built_in">empty</span>())<br>    &#123;<br>        tree temp = q.<span class="hljs-built_in">front</span>();<br>        v.<span class="hljs-built_in">push_back</span>(temp-&gt;value);<br>        <span class="hljs-keyword">if</span>(temp-&gt;left)<br>            q.<span class="hljs-built_in">push</span>(temp-&gt;left);<br>        <span class="hljs-keyword">if</span>(temp-&gt;right)<br>            q.<span class="hljs-built_in">push</span>(temp-&gt;right);<br>        q.<span class="hljs-built_in">pop</span>();<br>    &#125;<br>    <span class="hljs-keyword">return</span> v;<br>&#125;<br></code></pre></td></tr></table></figure><p>main函数</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br>    vector&lt;<span class="hljs-type">int</span>&gt; after, middle, result;<br>    <span class="hljs-type">int</span> quantity, temp;<br>    cin &gt;&gt; quantity;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; quantity; i++)<br>    &#123;<br>        cin &gt;&gt; temp;<br>        after.<span class="hljs-built_in">push_back</span>(temp);<br>    &#125;<br>    <span class="hljs-keyword">for</span>(<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; quantity; i++)<br>    &#123;<br>        cin &gt;&gt; temp;<br>        middle.<span class="hljs-built_in">push_back</span>(temp);<br>    &#125;<br>    tree certain_tree = <span class="hljs-built_in">make_tree</span>(after, middle);<br>    result = <span class="hljs-built_in">print_queue</span>(certain_tree);<br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">auto</span> it = result.<span class="hljs-built_in">begin</span>(); it != result.<span class="hljs-built_in">end</span>(); ++it)<br>        cout &lt;&lt; *it &lt;&lt; <span class="hljs-string">&quot; &quot;</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;Z字形扫描&quot;&gt;&lt;a href=&quot;#Z字形扫描&quot; class=&quot;headerlink&quot; title=&quot;Z字形扫描&quot;&gt;&lt;/a&gt;Z字形扫描&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;/2024/10/16/topic-3/3-1.png&quot; alt=&quot;题目描述&quot;&gt;&lt;/p&gt;
&lt;h3</summary>
      
    
    
    
    <category term="算法题" scheme="http://example.com/categories/%E7%AE%97%E6%B3%95%E9%A2%98/"/>
    
    
    <category term="C++" scheme="http://example.com/tags/C/"/>
    
    <category term="xdoj" scheme="http://example.com/tags/xdoj/"/>
    
    <category term="算法题" scheme="http://example.com/tags/%E7%AE%97%E6%B3%95%E9%A2%98/"/>
    
  </entry>
  
  <entry>
    <title>链表</title>
    <link href="http://example.com/2024/10/13/list/"/>
    <id>http://example.com/2024/10/13/list/</id>
    <published>2024-10-13T02:28:33.000Z</published>
    <updated>2024-10-16T08:34:42.585Z</updated>
    
    <content type="html"><![CDATA[<h2 id="链表的初始化"><a href="#链表的初始化" class="headerlink" title="链表的初始化"></a>链表的初始化</h2><p>链表的最基础初始化，可以使用C语言的结构体。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> &#123;</span><br>    <span class="hljs-type">int</span> value;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">Node</span> *<span class="hljs-title">next</span>;</span><br>&#125;node, *list_node;<br></code></pre></td></tr></table></figure><p>也可以使用c++中对象的定义</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-keyword">class</span> <span class="hljs-title class_">node</span> &#123;<br><span class="hljs-keyword">public</span>:<br>    <span class="hljs-type">int</span> value;<br>    node *next;<br><br>    <span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">function</span><span class="hljs-params">()</span> </span>&#123;<br><br>    &#125;<br>&#125;;<br></code></pre></td></tr></table></figure><div class="note note-info">            <p>往后的示例以C语言为主。</p>          </div><h2 id="链表节点的插入"><a href="#链表节点的插入" class="headerlink" title="链表节点的插入"></a>链表节点的插入</h2><h3 id="尾插法"><a href="#尾插法" class="headerlink" title="尾插法"></a>尾插法</h3><p>在末尾插入新节点，返回最后节点的指针<br>C语言</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c">list_node <span class="hljs-title function_">insert_to_foot</span><span class="hljs-params">(list_node operation, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-keyword">if</span>(!operation) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;List Error!\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">-1</span>);<br>    &#125;<br>    list_node to_node;<br>    to_node-&gt;value = value;<br>    operation-&gt;next = to_node;<br>    <span class="hljs-keyword">return</span> to_node;<br>&#125;<br></code></pre></td></tr></table></figure><h3 id="头插法"><a href="#头插法" class="headerlink" title="头插法"></a>头插法</h3><p>在头部插入新节点，返回新的头节点<br>C语言</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs c">list_node <span class="hljs-title function_">insert_to_head</span><span class="hljs-params">(list_node operation, <span class="hljs-type">int</span> value)</span> &#123;<br>    <span class="hljs-keyword">if</span>(!operation) &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;list Error!\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">-1</span>);<br>    &#125;<br>    list_node to_node;<br>    to_node-&gt;value = value;<br>    to_node-&gt;next = operation;<br>    <span class="hljs-keyword">return</span> to_node;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="链表节点的删除"><a href="#链表节点的删除" class="headerlink" title="链表节点的删除"></a>链表节点的删除</h2><p>当不存在头部节点时，对节点的删除操作较为复杂。首先，我们需要找到头节点，然后开始向下遍历，搜索到需要的节点</p><ul><li>若头节点就是待删除的节点，则头节点指针下移，删除头节点。</li><li>若尾节点就是待删除的节点，则删除尾节点，前一节点的next指针赋空值。</li><li>其余的一般情况下，找到待删除节点的前一节点，让其指向待删除节点的下一节点，再删除指定节点。</li></ul><p>存在头部节点时，可以省略对第一种情况的讨论。</p><h2 id="链表相关功能"><a href="#链表相关功能" class="headerlink" title="链表相关功能"></a>链表相关功能</h2><h3 id="求尺寸或搜索"><a href="#求尺寸或搜索" class="headerlink" title="求尺寸或搜索"></a>求尺寸或搜索</h3><p>求尺寸需要从头节点开始遍历，而遍历可以通过迭代或递归实现<br>迭代</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">(list_node head)</span> &#123;<br>    <span class="hljs-type">int</span> i;<br>    <span class="hljs-keyword">for</span>(i = <span class="hljs-number">1</span>; head != <span class="hljs-literal">NULL</span>; head = head-&gt;next, ++i);<br>    <span class="hljs-keyword">return</span> i;<br>&#125;<br></code></pre></td></tr></table></figure><p>递归</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">(list_node head)</span> &#123;<br>    <span class="hljs-keyword">if</span>(head-&gt;next == <span class="hljs-literal">NULL</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1</span> + size(head-&gt;next);<br>&#125;<br></code></pre></td></tr></table></figure><p>当需要搜索时，需要再参加相关参数<br>迭代</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">bool</span> <span class="hljs-title function_">is_find</span><span class="hljs-params">(list_node head, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-keyword">for</span>(; head != <span class="hljs-literal">NULL</span>; head = head-&gt;next)<br>        <span class="hljs-keyword">if</span>(head-&gt;value = target)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>递归</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">bool</span> <span class="hljs-title function_">is_find</span><span class="hljs-params">(list_node head, <span class="hljs-type">int</span> target)</span> &#123;<br>    <span class="hljs-keyword">if</span>(head-&gt;value == target)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>    <span class="hljs-keyword">if</span>(head-&gt;next == <span class="hljs-literal">NULL</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>    <span class="hljs-keyword">return</span> is_find(head-&gt;next, target);<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;链表的初始化&quot;&gt;&lt;a href=&quot;#链表的初始化&quot; class=&quot;headerlink&quot; title=&quot;链表的初始化&quot;&gt;&lt;/a&gt;链表的初始化&lt;/h2&gt;&lt;p&gt;链表的最基础初始化，可以使用C语言的结构体。&lt;/p&gt;
&lt;figure class=&quot;highlight c&quot;</summary>
      
    
    
    
    <category term="算法" scheme="http://example.com/categories/%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="C++" scheme="http://example.com/tags/C/"/>
    
    <category term="链表" scheme="http://example.com/tags/%E9%93%BE%E8%A1%A8/"/>
    
  </entry>
  
</feed>
